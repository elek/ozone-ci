2019-09-24 12:07:45,574 INFO  util.LogUtils (LogUtils.java:setLogLevel(41)) - Set org.apache.ratis.conf.ConfUtils log level to WARN
2019-09-24 12:07:45,579 INFO  util.LogUtils (LogUtils.java:setLogLevel(41)) - Set org.apache.ratis.util.FileUtils log level to TRACE
2019-09-24 12:07:45,595 INFO  util.LogUtils (LogUtils.java:setLogLevel(41)) - Set org.apache.ratis.server.impl.RaftServerImpl log level to DEBUG
2019-09-24 12:07:45,598 INFO  util.LogUtils (LogUtils.java:setLogLevel(41)) - Set org.apache.ratis.server.raftlog.RaftLog log level to DEBUG
2019-09-24 12:07:45,599 INFO  util.LogUtils (LogUtils.java:setLogLevel(41)) - Set org.apache.ratis.client.RaftClient log level to DEBUG
2019-09-24 12:07:45,612 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:runWithNewCluster(119)) - Running runWithNewCluster
2019-09-24 12:07:45,684 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:<init>(253)) - new MiniRaftClusterWithGrpc with group-7235C4202B27:[s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079]
2019-09-24 12:07:45,684 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:start(287)) - .............................................................. 
2019-09-24 12:07:45,684 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:start(288)) - ... 
2019-09-24 12:07:45,684 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:start(289)) - ...     Starting MiniRaftClusterWithGrpc
2019-09-24 12:07:45,685 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:start(290)) - ... 
2019-09-24 12:07:45,685 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:start(291)) - .............................................................. 
2019-09-24 12:07:45,685 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:initServers(265)) - servers = {}
2019-09-24 12:07:45,695 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(330)) - newRaftServer: s0, group-7235C4202B27:[s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], format? true
2019-09-24 12:07:45,697 TRACE util.FileUtils (FileUtils.java:deleteFully(88)) - deleteFully target/test/data/ce901d9b/MiniRaftClusterWithGrpc3b5164c8/s0
2019-09-24 12:07:45,708 TRACE util.FileUtils (FileUtils.java:deleteFully(104)) - deleteFully: target/test/data/ce901d9b/MiniRaftClusterWithGrpc3b5164c8/s0 does not exist.
2019-09-24 12:07:45,710 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(335)) - Formatted directory target/test/data/ce901d9b/MiniRaftClusterWithGrpc3b5164c8/s0
2019-09-24 12:07:45,735 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-09-24 12:07:45,821 INFO  grpc.GrpcFactory (GrpcFactory.java:checkPooledByteBufAllocatorUseCacheForAllThreads(45)) - PERFORMANCE WARNING: useCacheForAllThreads is true that may cause Netty to create a lot garbage objects and, as a result, trigger GC.
	It is recommended to disable useCacheForAllThreads by setting -Dorg.apache.ratis.thirdparty.io.netty.allocator.useCacheForAllThreads=false in command line.
2019-09-24 12:07:45,825 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 37696 (custom)
2019-09-24 12:07:45,828 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2019-09-24 12:07:45,831 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-24 12:07:45,832 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-09-24 12:07:45,837 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-09-24 12:07:46,089 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpc3b5164c8/s0] (custom)
2019-09-24 12:07:46,099 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - s0: addNew group-7235C4202B27:[s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079] returns group-7235C4202B27:java.util.concurrent.CompletableFuture@11545e6b[Not completed]
2019-09-24 12:07:46,099 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(330)) - newRaftServer: s1, group-7235C4202B27:[s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], format? true
2019-09-24 12:07:46,099 TRACE util.FileUtils (FileUtils.java:deleteFully(88)) - deleteFully target/test/data/ce901d9b/MiniRaftClusterWithGrpc3b5164c8/s1
2019-09-24 12:07:46,099 TRACE util.FileUtils (FileUtils.java:deleteFully(104)) - deleteFully: target/test/data/ce901d9b/MiniRaftClusterWithGrpc3b5164c8/s1 does not exist.
2019-09-24 12:07:46,100 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(335)) - Formatted directory target/test/data/ce901d9b/MiniRaftClusterWithGrpc3b5164c8/s1
2019-09-24 12:07:46,100 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-09-24 12:07:46,100 INFO  grpc.GrpcFactory (GrpcFactory.java:checkPooledByteBufAllocatorUseCacheForAllThreads(45)) - PERFORMANCE WARNING: useCacheForAllThreads is true that may cause Netty to create a lot garbage objects and, as a result, trigger GC.
	It is recommended to disable useCacheForAllThreads by setting -Dorg.apache.ratis.thirdparty.io.netty.allocator.useCacheForAllThreads=false in command line.
2019-09-24 12:07:46,101 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 37652 (custom)
2019-09-24 12:07:46,101 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2019-09-24 12:07:46,101 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-24 12:07:46,102 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-09-24 12:07:46,102 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-09-24 12:07:46,103 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpc3b5164c8/s1] (custom)
2019-09-24 12:07:46,103 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - s1: addNew group-7235C4202B27:[s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079] returns group-7235C4202B27:java.util.concurrent.CompletableFuture@1366f284[Not completed]
2019-09-24 12:07:46,103 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(330)) - newRaftServer: s2, group-7235C4202B27:[s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], format? true
2019-09-24 12:07:46,104 TRACE util.FileUtils (FileUtils.java:deleteFully(88)) - deleteFully target/test/data/ce901d9b/MiniRaftClusterWithGrpc3b5164c8/s2
2019-09-24 12:07:46,104 TRACE util.FileUtils (FileUtils.java:deleteFully(104)) - deleteFully: target/test/data/ce901d9b/MiniRaftClusterWithGrpc3b5164c8/s2 does not exist.
2019-09-24 12:07:46,104 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(335)) - Formatted directory target/test/data/ce901d9b/MiniRaftClusterWithGrpc3b5164c8/s2
2019-09-24 12:07:46,105 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-09-24 12:07:46,105 INFO  grpc.GrpcFactory (GrpcFactory.java:checkPooledByteBufAllocatorUseCacheForAllThreads(45)) - PERFORMANCE WARNING: useCacheForAllThreads is true that may cause Netty to create a lot garbage objects and, as a result, trigger GC.
	It is recommended to disable useCacheForAllThreads by setting -Dorg.apache.ratis.thirdparty.io.netty.allocator.useCacheForAllThreads=false in command line.
2019-09-24 12:07:46,105 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 37079 (custom)
2019-09-24 12:07:46,105 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2019-09-24 12:07:46,106 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-24 12:07:46,106 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-09-24 12:07:46,106 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-09-24 12:07:46,107 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpc3b5164c8/s2] (custom)
2019-09-24 12:07:46,107 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - s2: addNew group-7235C4202B27:[s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079] returns group-7235C4202B27:java.util.concurrent.CompletableFuture@607cbc42[Not completed]
2019-09-24 12:07:46,108 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-24 12:07:46,108 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-24 12:07:46,108 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-24 12:07:46,109 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2019-09-24 12:07:46,109 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2019-09-24 12:07:46,109 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2019-09-24 12:07:46,110 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2019-09-24 12:07:46,110 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2019-09-24 12:07:46,110 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2019-09-24 12:07:46,116 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(95)) - s2: new RaftServerImpl for group-7235C4202B27:[s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079] with StateMachineWithException:uninitialized
2019-09-24 12:07:46,116 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(95)) - s0: new RaftServerImpl for group-7235C4202B27:[s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079] with StateMachineWithException:uninitialized
2019-09-24 12:07:46,116 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(95)) - s1: new RaftServerImpl for group-7235C4202B27:[s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079] with StateMachineWithException:uninitialized
2019-09-24 12:07:46,118 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 150ms (default)
2019-09-24 12:07:46,118 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 150ms (default)
2019-09-24 12:07:46,118 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 150ms (default)
2019-09-24 12:07:46,119 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 300ms (default)
2019-09-24 12:07:46,119 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 300ms (default)
2019-09-24 12:07:46,119 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 60s (default)
2019-09-24 12:07:46,119 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 300ms (default)
2019-09-24 12:07:46,120 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 60s (default)
2019-09-24 12:07:46,120 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 60s (default)
2019-09-24 12:07:46,121 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.sleep.deviation.threshold = 300 (default)
2019-09-24 12:07:46,121 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.sleep.deviation.threshold = 300 (default)
2019-09-24 12:07:46,121 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.sleep.deviation.threshold = 300 (default)
2019-09-24 12:07:46,122 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-09-24 12:07:46,122 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-09-24 12:07:46,122 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-09-24 12:07:46,130 INFO  impl.RaftServerImpl (ServerState.java:<init>(103)) - s0@group-7235C4202B27: ConfigurationManager, init=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null, confs=<EMPTY_MAP>
2019-09-24 12:07:46,130 INFO  impl.RaftServerImpl (ServerState.java:<init>(103)) - s1@group-7235C4202B27: ConfigurationManager, init=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null, confs=<EMPTY_MAP>
2019-09-24 12:07:46,130 INFO  impl.RaftServerImpl (ServerState.java:<init>(103)) - s2@group-7235C4202B27: ConfigurationManager, init=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null, confs=<EMPTY_MAP>
2019-09-24 12:07:46,130 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpc3b5164c8/s0] (custom)
2019-09-24 12:07:46,131 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpc3b5164c8/s2] (custom)
2019-09-24 12:07:46,131 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpc3b5164c8/s1] (custom)
2019-09-24 12:07:46,143 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.corruption.policy = EXCEPTION (default)
2019-09-24 12:07:46,143 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.corruption.policy = EXCEPTION (default)
2019-09-24 12:07:46,144 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.corruption.policy = EXCEPTION (default)
2019-09-24 12:07:46,145 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpc3b5164c8/s2/c7906edc-4249-4da4-9cc8-7235c4202b27 does not exist. Creating ...
2019-09-24 12:07:46,145 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpc3b5164c8/s1/c7906edc-4249-4da4-9cc8-7235c4202b27 does not exist. Creating ...
2019-09-24 12:07:46,145 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpc3b5164c8/s0/c7906edc-4249-4da4-9cc8-7235c4202b27 does not exist. Creating ...
2019-09-24 12:07:46,149 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpc3b5164c8/s2/c7906edc-4249-4da4-9cc8-7235c4202b27
2019-09-24 12:07:46,149 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpc3b5164c8/s1/c7906edc-4249-4da4-9cc8-7235c4202b27
2019-09-24 12:07:46,149 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpc3b5164c8/s0/c7906edc-4249-4da4-9cc8-7235c4202b27
2019-09-24 12:07:46,190 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpc3b5164c8/s0/c7906edc-4249-4da4-9cc8-7235c4202b27/in_use.lock acquired by nodename 19836@ratis-test-nppbd-817190658
2019-09-24 12:07:46,190 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpc3b5164c8/s1/c7906edc-4249-4da4-9cc8-7235c4202b27/in_use.lock acquired by nodename 19836@ratis-test-nppbd-817190658
2019-09-24 12:07:46,190 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpc3b5164c8/s2/c7906edc-4249-4da4-9cc8-7235c4202b27/in_use.lock acquired by nodename 19836@ratis-test-nppbd-817190658
2019-09-24 12:07:46,191 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpc3b5164c8/s1/c7906edc-4249-4da4-9cc8-7235c4202b27/current
2019-09-24 12:07:46,191 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpc3b5164c8/s2/c7906edc-4249-4da4-9cc8-7235c4202b27/current
2019-09-24 12:07:46,191 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpc3b5164c8/s0/c7906edc-4249-4da4-9cc8-7235c4202b27/current
2019-09-24 12:07:46,192 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpc3b5164c8/s2/c7906edc-4249-4da4-9cc8-7235c4202b27/sm
2019-09-24 12:07:46,192 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpc3b5164c8/s1/c7906edc-4249-4da4-9cc8-7235c4202b27/sm
2019-09-24 12:07:46,192 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpc3b5164c8/s0/c7906edc-4249-4da4-9cc8-7235c4202b27/sm
2019-09-24 12:07:46,219 INFO  storage.RaftStorage (RaftStorage.java:format(84)) - Storage directory /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpc3b5164c8/s1/c7906edc-4249-4da4-9cc8-7235c4202b27 has been successfully formatted.
2019-09-24 12:07:46,219 INFO  storage.RaftStorage (RaftStorage.java:format(84)) - Storage directory /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpc3b5164c8/s0/c7906edc-4249-4da4-9cc8-7235c4202b27 has been successfully formatted.
2019-09-24 12:07:46,219 INFO  storage.RaftStorage (RaftStorage.java:format(84)) - Storage directory /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpc3b5164c8/s2/c7906edc-4249-4da4-9cc8-7235c4202b27 has been successfully formatted.
2019-09-24 12:07:46,220 INFO  statemachine.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(206)) - Initializing StateMachineWithException:uninitialized
2019-09-24 12:07:46,220 INFO  statemachine.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(206)) - Initializing StateMachineWithException:uninitialized
2019-09-24 12:07:46,220 INFO  statemachine.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(206)) - Initializing StateMachineWithException:uninitialized
2019-09-24 12:07:46,226 INFO  statemachine.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(296)) - The snapshot file null does not exist
2019-09-24 12:07:46,226 INFO  statemachine.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(296)) - The snapshot file null does not exist
2019-09-24 12:07:46,226 INFO  statemachine.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(296)) - The snapshot file null does not exist
2019-09-24 12:07:46,228 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.notification.no-leader.timeout = 60s (default)
2019-09-24 12:07:46,228 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.notification.no-leader.timeout = 60s (default)
2019-09-24 12:07:46,228 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.notification.no-leader.timeout = 60s (default)
2019-09-24 12:07:46,231 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-09-24 12:07:46,231 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-09-24 12:07:46,231 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-09-24 12:07:46,239 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.purge.gap = 1024 (default)
2019-09-24 12:07:46,239 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.purge.gap = 1024 (default)
2019-09-24 12:07:46,239 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.purge.gap = 1024 (default)
2019-09-24 12:07:46,239 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-24 12:07:46,239 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-24 12:07:46,239 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-24 12:07:46,242 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-24 12:07:46,242 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-24 12:07:46,242 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-24 12:07:46,248 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 6 (default)
2019-09-24 12:07:46,248 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 6 (default)
2019-09-24 12:07:46,248 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 6 (default)
2019-09-24 12:07:46,255 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(172)) - new s1@group-7235C4202B27-SegmentedRaftLogWorker for RaftStorage:Storage Directory /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpc3b5164c8/s1/c7906edc-4249-4da4-9cc8-7235c4202b27
2019-09-24 12:07:46,255 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(172)) - new s2@group-7235C4202B27-SegmentedRaftLogWorker for RaftStorage:Storage Directory /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpc3b5164c8/s2/c7906edc-4249-4da4-9cc8-7235c4202b27
2019-09-24 12:07:46,255 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(172)) - new s0@group-7235C4202B27-SegmentedRaftLogWorker for RaftStorage:Storage Directory /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpc3b5164c8/s0/c7906edc-4249-4da4-9cc8-7235c4202b27
2019-09-24 12:07:46,340 WARN  impl.MetricsConfig (MetricsConfig.java:loadFirst(124)) - Cannot locate configuration: tried hadoop-metrics2-ratis.properties,hadoop-metrics2.properties
2019-09-24 12:07:46,434 INFO  impl.MetricsSystemImpl (MetricsSystemImpl.java:startTimer(376)) - Scheduled snapshot period at 10 second(s).
2019-09-24 12:07:46,435 INFO  impl.MetricsSystemImpl (MetricsSystemImpl.java:start(191)) - ratis metrics system started
2019-09-24 12:07:46,441 INFO  metrics.MetricRegistries (MetricRegistriesLoader.java:load(64)) - Loaded MetricRegistries class org.apache.ratis.metrics.impl.MetricRegistriesImpl
2019-09-24 12:07:46,478 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2019-09-24 12:07:46,478 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 4096 (default)
2019-09-24 12:07:46,480 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2019-09-24 12:07:46,480 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2019-09-24 12:07:46,480 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 4096 (default)
2019-09-24 12:07:46,480 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 4096 (default)
2019-09-24 12:07:46,481 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-24 12:07:46,481 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-24 12:07:46,481 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-24 12:07:46,482 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2019-09-24 12:07:46,481 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2019-09-24 12:07:46,482 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2019-09-24 12:07:46,482 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2019-09-24 12:07:46,482 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2019-09-24 12:07:46,483 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2019-09-24 12:07:46,483 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-09-24 12:07:46,483 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-09-24 12:07:46,483 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-09-24 12:07:46,485 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-09-24 12:07:46,485 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-09-24 12:07:46,485 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-09-24 12:07:46,485 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-09-24 12:07:46,486 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-09-24 12:07:46,485 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-09-24 12:07:46,486 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-09-24 12:07:46,486 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-09-24 12:07:46,487 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-09-24 12:07:46,495 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2019-09-24 12:07:46,495 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2019-09-24 12:07:46,495 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2019-09-24 12:07:46,500 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(132)) - s1@group-7235C4202B27-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2019-09-24 12:07:46,500 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(132)) - s2@group-7235C4202B27-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2019-09-24 12:07:46,500 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(132)) - s0@group-7235C4202B27-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2019-09-24 12:07:46,505 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2019-09-24 12:07:46,506 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2019-09-24 12:07:46,506 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2019-09-24 12:07:46,506 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.retention.file.num = -1 (default)
2019-09-24 12:07:46,506 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.retention.file.num = -1 (default)
2019-09-24 12:07:46,506 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.retention.file.num = -1 (default)
2019-09-24 12:07:46,507 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 60s (default)
2019-09-24 12:07:46,507 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 60s (default)
2019-09-24 12:07:46,507 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 60s (default)
2019-09-24 12:07:46,537 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(181)) - s0@group-7235C4202B27: start as a follower, conf=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null
2019-09-24 12:07:46,540 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s0@group-7235C4202B27: changes role from      null to FOLLOWER at term 0 for startAsFollower
2019-09-24 12:07:46,542 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s0: start FollowerState
2019-09-24 12:07:46,545 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-7235C4202B27,id=s0
2019-09-24 12:07:46,557 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - s0: start RPC server
2019-09-24 12:07:46,693 INFO  impl.FollowerState (FollowerState.java:run(108)) - s0@group-7235C4202B27-FollowerState: change to CANDIDATE, lastRpcTime:151ms, electionTimeout:150ms
2019-09-24 12:07:46,698 INFO  server.GrpcService (GrpcService.java:startImpl(158)) - s0: GrpcService started, listening on 0.0.0.0/0.0.0.0:37696
2019-09-24 12:07:46,699 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - s0: shutdown FollowerState
2019-09-24 12:07:46,699 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(181)) - s1@group-7235C4202B27: start as a follower, conf=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null
2019-09-24 12:07:46,699 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s0@group-7235C4202B27: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-09-24 12:07:46,699 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s1@group-7235C4202B27: changes role from      null to FOLLOWER at term 0 for startAsFollower
2019-09-24 12:07:46,700 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s1: start FollowerState
2019-09-24 12:07:46,700 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-7235C4202B27,id=s1
2019-09-24 12:07:46,703 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s0: start LeaderElection
2019-09-24 12:07:46,708 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - s1: start RPC server
2019-09-24 12:07:46,709 INFO  server.GrpcService (GrpcService.java:startImpl(158)) - s1: GrpcService started, listening on 0.0.0.0/0.0.0.0:37652
2019-09-24 12:07:46,709 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(181)) - s2@group-7235C4202B27: start as a follower, conf=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null
2019-09-24 12:07:46,709 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s2@group-7235C4202B27: changes role from      null to FOLLOWER at term 0 for startAsFollower
2019-09-24 12:07:46,710 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s2: start FollowerState
2019-09-24 12:07:46,710 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-7235C4202B27,id=s2
2019-09-24 12:07:46,714 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - s2: start RPC server
2019-09-24 12:07:46,715 INFO  server.GrpcService (GrpcService.java:startImpl(158)) - s2: GrpcService started, listening on 0.0.0.0/0.0.0.0:37079
2019-09-24 12:07:46,718 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(178)) - s0@group-7235C4202B27-LeaderElection1: begin an election at term 1 for -1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null
2019-09-24 12:07:46,718 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 300ms (default)
2019-09-24 12:07:46,722 INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(86)) - printing ALL groups
  s0:  RUNNING CANDIDATE s0@group-7235C4202B27:t1, leader=null, voted=s0, raftlog=s0@group-7235C4202B27-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-7235C4202B27:t0, leader=null, voted=null, raftlog=s1@group-7235C4202B27-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-7235C4202B27:t0, leader=null, voted=null, raftlog=s2@group-7235C4202B27-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null RUNNING
2019-09-24 12:07:46,727 WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(158)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #1/100: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING CANDIDATE s0@group-7235C4202B27:t1, leader=null, voted=s0, raftlog=s0@group-7235C4202B27-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-7235C4202B27:t0, leader=null, voted=null, raftlog=s1@group-7235C4202B27-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-7235C4202B27:t0, leader=null, voted=null, raftlog=s2@group-7235C4202B27-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null RUNNING, sleep 450ms and then retry.
java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING CANDIDATE s0@group-7235C4202B27:t1, leader=null, voted=s0, raftlog=s0@group-7235C4202B27-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-7235C4202B27:t0, leader=null, voted=null, raftlog=s1@group-7235C4202B27-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-7235C4202B27:t0, leader=null, voted=null, raftlog=s2@group-7235C4202B27-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null RUNNING
	at org.apache.ratis.MiniRaftCluster.newIllegalStateExceptionForNoLeaders(MiniRaftCluster.java:506)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$1(RaftTestUtil.java:90)
	at org.apache.ratis.MiniRaftCluster.getLeader(MiniRaftCluster.java:539)
	at org.apache.ratis.MiniRaftCluster.getLeader(MiniRaftCluster.java:532)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:98)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:152)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:97)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:77)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:72)
	at org.apache.ratis.server.impl.RaftStateMachineExceptionTests.runTestRetryOnStateMachineException(RaftStateMachineExceptionTests.java:103)
	at org.apache.ratis.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:125)
	at org.apache.ratis.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:113)
	at org.apache.ratis.server.impl.RaftStateMachineExceptionTests.testRetryOnStateMachineException(RaftStateMachineExceptionTests.java:99)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:748)
2019-09-24 12:07:46,897 INFO  impl.FollowerState (FollowerState.java:run(108)) - s2@group-7235C4202B27-FollowerState: change to CANDIDATE, lastRpcTime:187ms, electionTimeout:187ms
2019-09-24 12:07:46,898 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - s2: shutdown FollowerState
2019-09-24 12:07:46,898 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s2@group-7235C4202B27: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-09-24 12:07:46,899 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s2: start LeaderElection
2019-09-24 12:07:46,912 INFO  impl.FollowerState (FollowerState.java:run(108)) - s1@group-7235C4202B27-FollowerState: change to CANDIDATE, lastRpcTime:212ms, electionTimeout:212ms
2019-09-24 12:07:46,913 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - s1: shutdown FollowerState
2019-09-24 12:07:46,913 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s1@group-7235C4202B27: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-09-24 12:07:46,913 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s1: start LeaderElection
2019-09-24 12:07:46,921 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(178)) - s2@group-7235C4202B27-LeaderElection2: begin an election at term 1 for -1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null
2019-09-24 12:07:46,935 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(178)) - s1@group-7235C4202B27-LeaderElection3: begin an election at term 1 for -1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null
2019-09-24 12:07:46,983 INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(56)) - s0@group-7235C4202B27-LeaderElection1: Election TIMEOUT; received 0 response(s) [] and 0 exception(s); s0@group-7235C4202B27:t1, leader=null, voted=s0, raftlog=s0@group-7235C4202B27-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null
2019-09-24 12:07:46,999 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(178)) - s0@group-7235C4202B27-LeaderElection1: begin an election at term 2 for -1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null
2019-09-24 12:07:47,164 INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(56)) - s1@group-7235C4202B27-LeaderElection3: Election TIMEOUT; received 0 response(s) [] and 0 exception(s); s1@group-7235C4202B27:t1, leader=null, voted=s1, raftlog=s1@group-7235C4202B27-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null
2019-09-24 12:07:47,180 WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(158)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #2/100: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING CANDIDATE s0@group-7235C4202B27:t2, leader=null, voted=s0, raftlog=s0@group-7235C4202B27-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null RUNNING
  s1:  RUNNING CANDIDATE s1@group-7235C4202B27:t2, leader=null, voted=s1, raftlog=s1@group-7235C4202B27-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null RUNNING
  s2:  RUNNING CANDIDATE s2@group-7235C4202B27:t1, leader=null, voted=s2, raftlog=s2@group-7235C4202B27-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null RUNNING, sleep 450ms and then retry.
java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING CANDIDATE s0@group-7235C4202B27:t2, leader=null, voted=s0, raftlog=s0@group-7235C4202B27-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null RUNNING
  s1:  RUNNING CANDIDATE s1@group-7235C4202B27:t2, leader=null, voted=s1, raftlog=s1@group-7235C4202B27-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null RUNNING
  s2:  RUNNING CANDIDATE s2@group-7235C4202B27:t1, leader=null, voted=s2, raftlog=s2@group-7235C4202B27-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null RUNNING
	at org.apache.ratis.MiniRaftCluster.newIllegalStateExceptionForNoLeaders(MiniRaftCluster.java:506)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$1(RaftTestUtil.java:90)
	at org.apache.ratis.MiniRaftCluster.getLeader(MiniRaftCluster.java:539)
	at org.apache.ratis.MiniRaftCluster.getLeader(MiniRaftCluster.java:532)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:98)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:152)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:97)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:77)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:72)
	at org.apache.ratis.server.impl.RaftStateMachineExceptionTests.runTestRetryOnStateMachineException(RaftStateMachineExceptionTests.java:103)
	at org.apache.ratis.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:125)
	at org.apache.ratis.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:113)
	at org.apache.ratis.server.impl.RaftStateMachineExceptionTests.testRetryOnStateMachineException(RaftStateMachineExceptionTests.java:99)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:748)
2019-09-24 12:07:47,186 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(178)) - s1@group-7235C4202B27-LeaderElection3: begin an election at term 2 for -1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null
2019-09-24 12:07:47,187 INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(56)) - s2@group-7235C4202B27-LeaderElection2: Election TIMEOUT; received 0 response(s) [] and 0 exception(s); s2@group-7235C4202B27:t1, leader=null, voted=s2, raftlog=s2@group-7235C4202B27-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null
2019-09-24 12:07:47,202 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(178)) - s2@group-7235C4202B27-LeaderElection2: begin an election at term 2 for -1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null
2019-09-24 12:07:47,260 INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(56)) - s0@group-7235C4202B27-LeaderElection1: Election TIMEOUT; received 0 response(s) [] and 0 exception(s); s0@group-7235C4202B27:t2, leader=null, voted=s0, raftlog=s0@group-7235C4202B27-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null
2019-09-24 12:07:47,270 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(178)) - s0@group-7235C4202B27-LeaderElection1: begin an election at term 3 for -1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null
2019-09-24 12:07:47,383 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(743)) - s1@group-7235C4202B27: receive requestVote(s0, group-7235C4202B27, 1, (t:0, i:0))
2019-09-24 12:07:47,383 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(743)) - s2@group-7235C4202B27: receive requestVote(s0, group-7235C4202B27, 3, (t:0, i:0))
2019-09-24 12:07:47,383 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(743)) - s1@group-7235C4202B27: receive requestVote(s2, group-7235C4202B27, 1, (t:0, i:0))
2019-09-24 12:07:47,383 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(743)) - s1@group-7235C4202B27: receive requestVote(s0, group-7235C4202B27, 2, (t:0, i:0))
2019-09-24 12:07:47,383 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(743)) - s2@group-7235C4202B27: receive requestVote(s1, group-7235C4202B27, 1, (t:0, i:0))
2019-09-24 12:07:47,383 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(743)) - s0@group-7235C4202B27: receive requestVote(s1, group-7235C4202B27, 2, (t:0, i:0))
2019-09-24 12:07:47,383 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(743)) - s0@group-7235C4202B27: receive requestVote(s2, group-7235C4202B27, 2, (t:0, i:0))
2019-09-24 12:07:47,383 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(743)) - s1@group-7235C4202B27: receive requestVote(s2, group-7235C4202B27, 2, (t:0, i:0))
2019-09-24 12:07:47,383 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(743)) - s2@group-7235C4202B27: receive requestVote(s0, group-7235C4202B27, 2, (t:0, i:0))
2019-09-24 12:07:47,383 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(743)) - s0@group-7235C4202B27: receive requestVote(s1, group-7235C4202B27, 1, (t:0, i:0))
2019-09-24 12:07:47,383 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(743)) - s2@group-7235C4202B27: receive requestVote(s1, group-7235C4202B27, 2, (t:0, i:0))
2019-09-24 12:07:47,386 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s2@group-7235C4202B27: changes role from CANDIDATE to FOLLOWER at term 3 for recognizeCandidate:s0
2019-09-24 12:07:47,383 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(743)) - s1@group-7235C4202B27: receive requestVote(s0, group-7235C4202B27, 3, (t:0, i:0))
2019-09-24 12:07:47,383 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(743)) - s0@group-7235C4202B27: receive requestVote(s2, group-7235C4202B27, 1, (t:0, i:0))
2019-09-24 12:07:47,383 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(743)) - s2@group-7235C4202B27: receive requestVote(s0, group-7235C4202B27, 1, (t:0, i:0))
2019-09-24 12:07:47,386 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - s2: shutdown LeaderElection
2019-09-24 12:07:47,388 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s2: start FollowerState
2019-09-24 12:07:47,389 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(775)) - s1@group-7235C4202B27 replies to vote request: s0<-s1#0:FAIL-t2. Peer's state: s1@group-7235C4202B27:t2, leader=null, voted=s1, raftlog=s1@group-7235C4202B27-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null
2019-09-24 12:07:47,389 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(775)) - s0@group-7235C4202B27 replies to vote request: s1<-s0#0:FAIL-t3. Peer's state: s0@group-7235C4202B27:t3, leader=null, voted=s0, raftlog=s0@group-7235C4202B27-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null
2019-09-24 12:07:47,389 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s1@group-7235C4202B27: changes role from CANDIDATE to FOLLOWER at term 3 for recognizeCandidate:s0
2019-09-24 12:07:47,389 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - s1: shutdown LeaderElection
2019-09-24 12:07:47,389 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(775)) - s0@group-7235C4202B27 replies to vote request: s2<-s0#0:FAIL-t3. Peer's state: s0@group-7235C4202B27:t3, leader=null, voted=s0, raftlog=s0@group-7235C4202B27-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null
2019-09-24 12:07:47,389 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s1: start FollowerState
2019-09-24 12:07:47,390 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(775)) - s0@group-7235C4202B27 replies to vote request: s1<-s0#0:FAIL-t3. Peer's state: s0@group-7235C4202B27:t3, leader=null, voted=s0, raftlog=s0@group-7235C4202B27-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null
2019-09-24 12:07:47,390 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(775)) - s0@group-7235C4202B27 replies to vote request: s2<-s0#0:FAIL-t3. Peer's state: s0@group-7235C4202B27:t3, leader=null, voted=s0, raftlog=s0@group-7235C4202B27-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null
2019-09-24 12:07:47,400 INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(56)) - s2@group-7235C4202B27-LeaderElection2: Election DISCOVERED_A_NEW_TERM; received 1 response(s) [s2<-s0#0:FAIL-t3] and 0 exception(s); s2@group-7235C4202B27:t3, leader=null, voted=null, raftlog=s2@group-7235C4202B27-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null
2019-09-24 12:07:47,400 INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(56)) - s1@group-7235C4202B27-LeaderElection3: Election DISCOVERED_A_NEW_TERM; received 1 response(s) [s1<-s0#0:FAIL-t3] and 0 exception(s); s1@group-7235C4202B27:t3, leader=null, voted=null, raftlog=s1@group-7235C4202B27-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null
2019-09-24 12:07:47,404 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(775)) - s1@group-7235C4202B27 replies to vote request: s0<-s1#0:FAIL-t3. Peer's state: s1@group-7235C4202B27:t3, leader=null, voted=null, raftlog=s1@group-7235C4202B27-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null
2019-09-24 12:07:47,404 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(775)) - s2@group-7235C4202B27 replies to vote request: s0<-s2#0:FAIL-t3. Peer's state: s2@group-7235C4202B27:t3, leader=null, voted=null, raftlog=s2@group-7235C4202B27-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null
2019-09-24 12:07:47,404 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(775)) - s1@group-7235C4202B27 replies to vote request: s2<-s1#0:FAIL-t3. Peer's state: s1@group-7235C4202B27:t3, leader=null, voted=null, raftlog=s1@group-7235C4202B27-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null
2019-09-24 12:07:47,405 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(775)) - s2@group-7235C4202B27 replies to vote request: s0<-s2#0:FAIL-t3. Peer's state: s2@group-7235C4202B27:t3, leader=null, voted=null, raftlog=s2@group-7235C4202B27-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null
2019-09-24 12:07:47,405 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(775)) - s1@group-7235C4202B27 replies to vote request: s0<-s1#0:FAIL-t3. Peer's state: s1@group-7235C4202B27:t3, leader=null, voted=null, raftlog=s1@group-7235C4202B27-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null
2019-09-24 12:07:47,405 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(775)) - s2@group-7235C4202B27 replies to vote request: s1<-s2#0:FAIL-t3. Peer's state: s2@group-7235C4202B27:t3, leader=null, voted=null, raftlog=s2@group-7235C4202B27-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null
2019-09-24 12:07:47,405 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(775)) - s1@group-7235C4202B27 replies to vote request: s2<-s1#0:FAIL-t3. Peer's state: s1@group-7235C4202B27:t3, leader=null, voted=null, raftlog=s1@group-7235C4202B27-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null
2019-09-24 12:07:47,406 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(775)) - s2@group-7235C4202B27 replies to vote request: s0<-s2#0:FAIL-t3. Peer's state: s2@group-7235C4202B27:t3, leader=null, voted=null, raftlog=s2@group-7235C4202B27-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null
2019-09-24 12:07:47,406 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(775)) - s2@group-7235C4202B27 replies to vote request: s1<-s2#0:FAIL-t3. Peer's state: s2@group-7235C4202B27:t3, leader=null, voted=null, raftlog=s2@group-7235C4202B27-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null
2019-09-24 12:07:47,409 INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(56)) - s0@group-7235C4202B27-LeaderElection1: Election REJECTED; received 2 response(s) [s0<-s1#0:FAIL-t3, s0<-s2#0:FAIL-t3] and 0 exception(s); s0@group-7235C4202B27:t3, leader=null, voted=s0, raftlog=s0@group-7235C4202B27-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null
2019-09-24 12:07:47,409 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s0@group-7235C4202B27: changes role from CANDIDATE to FOLLOWER at term 3 for DISCOVERED_A_NEW_TERM
2019-09-24 12:07:47,410 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - s0: shutdown LeaderElection
2019-09-24 12:07:47,410 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s0: start FollowerState
2019-09-24 12:07:47,556 INFO  impl.FollowerState (FollowerState.java:run(108)) - s1@group-7235C4202B27-FollowerState: change to CANDIDATE, lastRpcTime:166ms, electionTimeout:166ms
2019-09-24 12:07:47,557 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - s1: shutdown FollowerState
2019-09-24 12:07:47,557 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s1@group-7235C4202B27: changes role from  FOLLOWER to CANDIDATE at term 3 for changeToCandidate
2019-09-24 12:07:47,557 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s1: start LeaderElection
2019-09-24 12:07:47,572 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(178)) - s1@group-7235C4202B27-LeaderElection4: begin an election at term 4 for -1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null
2019-09-24 12:07:47,577 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(743)) - s0@group-7235C4202B27: receive requestVote(s1, group-7235C4202B27, 4, (t:0, i:0))
2019-09-24 12:07:47,577 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s0@group-7235C4202B27: changes role from  FOLLOWER to FOLLOWER at term 4 for recognizeCandidate:s1
2019-09-24 12:07:47,578 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - s0: shutdown FollowerState
2019-09-24 12:07:47,578 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(743)) - s2@group-7235C4202B27: receive requestVote(s1, group-7235C4202B27, 4, (t:0, i:0))
2019-09-24 12:07:47,578 INFO  impl.FollowerState (FollowerState.java:run(117)) - s0@group-7235C4202B27-FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-09-24 12:07:47,578 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s0: start FollowerState
2019-09-24 12:07:47,578 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s2@group-7235C4202B27: changes role from  FOLLOWER to FOLLOWER at term 4 for recognizeCandidate:s1
2019-09-24 12:07:47,579 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - s2: shutdown FollowerState
2019-09-24 12:07:47,580 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s2: start FollowerState
2019-09-24 12:07:47,580 INFO  impl.FollowerState (FollowerState.java:run(117)) - s2@group-7235C4202B27-FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-09-24 12:07:47,602 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(775)) - s2@group-7235C4202B27 replies to vote request: s1<-s2#0:OK-t4. Peer's state: s2@group-7235C4202B27:t4, leader=null, voted=s1, raftlog=s2@group-7235C4202B27-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null
2019-09-24 12:07:47,602 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(775)) - s0@group-7235C4202B27 replies to vote request: s1<-s0#0:OK-t4. Peer's state: s0@group-7235C4202B27:t4, leader=null, voted=s1, raftlog=s0@group-7235C4202B27-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null
2019-09-24 12:07:47,605 INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(56)) - s1@group-7235C4202B27-LeaderElection4: Election PASSED; received 1 response(s) [s1<-s0#0:OK-t4] and 0 exception(s); s1@group-7235C4202B27:t4, leader=null, voted=s1, raftlog=s1@group-7235C4202B27-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null
2019-09-24 12:07:47,606 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - s1: shutdown LeaderElection
2019-09-24 12:07:47,606 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s1@group-7235C4202B27: changes role from CANDIDATE to LEADER at term 4 for changeToLeader
2019-09-24 12:07:47,606 INFO  impl.RaftServerImpl (ServerState.java:setLeader(254)) - s1@group-7235C4202B27: change Leader from null to s1 at term 4 for becomeLeader, leader elected after 1379ms
2019-09-24 12:07:47,613 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-09-24 12:07:47,613 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-09-24 12:07:47,620 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.write.element-limit = 4096 (default)
2019-09-24 12:07:47,626 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-09-24 12:07:47,626 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-09-24 12:07:47,628 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.element-limit = 65536 (default)
2019-09-24 12:07:47,632 INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(101)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-7235C4202B27:t4, leader=null, voted=s1, raftlog=s0@group-7235C4202B27-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null RUNNING
  s1:  RUNNING    LEADER s1@group-7235C4202B27:t4, leader=s1, voted=s1, raftlog=s1@group-7235C4202B27-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-7235C4202B27:t4, leader=null, voted=s1, raftlog=s2@group-7235C4202B27-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null RUNNING
2019-09-24 12:07:47,639 DEBUG client.RaftClient (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-09-24 12:07:47,644 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2019-09-24 12:07:47,645 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-24 12:07:47,645 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2019-09-24 12:07:47,649 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2019-09-24 12:07:47,649 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-09-24 12:07:47,650 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-09-24 12:07:47,651 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2019-09-24 12:07:47,651 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-24 12:07:47,651 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2019-09-24 12:07:47,652 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2019-09-24 12:07:47,652 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-09-24 12:07:47,652 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-09-24 12:07:47,654 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s1: start LeaderState
2019-09-24 12:07:47,664 DEBUG client.RaftClient (RaftClientImpl.java:sendRequest(275)) - client-5A85124EAC30: send RaftClientRequest:client-5A85124EAC30->s1@group-7235C4202B27, cid=0, seq=0, RW, first msg to make leader ready
2019-09-24 12:07:47,672 DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(425)) - truncateIndex=-1, arrayIndex=0
2019-09-24 12:07:47,676 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(380)) - s1@group-7235C4202B27-SegmentedRaftLogWorker: Starting segment from index:0
2019-09-24 12:07:47,686 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(355)) - s1@group-7235C4202B27: set configuration 0: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null at 0
2019-09-24 12:07:47,702 DEBUG impl.RaftServerImpl (RaftServerImpl.java:submitClientRequestAsync(533)) - s1@group-7235C4202B27: receive client request(RaftClientRequest:client-5A85124EAC30->s1@group-7235C4202B27, cid=0, seq=0, RW, Message:6669727374206d736720...(size=30))
2019-09-24 12:07:47,706 INFO  client.GrpcClientProtocolService (GrpcClientProtocolService.java:lambda$processClientRequest$0(278)) - Failed RaftClientRequest:client-5A85124EAC30->s1@group-7235C4202B27, cid=0, seq=0, RW, Message:6669727374206d736720...(size=30), reply=RaftClientReply:client-5A85124EAC30->s1@group-7235C4202B27, cid=0, FAILED org.apache.ratis.protocol.LeaderNotReadyException: s1@group-7235C4202B27 is in LEADER state but not ready yet., logIndex=0, commits[s1:c-1, s0:c-1, s2:c-1]
2019-09-24 12:07:47,716 INFO  impl.RaftServerImpl (ServerState.java:setLeader(254)) - s0@group-7235C4202B27: change Leader from null to s1 at term 4 for appendEntries, leader elected after 1488ms
2019-09-24 12:07:47,716 INFO  impl.RaftServerImpl (ServerState.java:setLeader(254)) - s2@group-7235C4202B27: change Leader from null to s1 at term 4 for appendEntries, leader elected after 1489ms
2019-09-24 12:07:47,731 DEBUG client.RaftClient (RaftClientImpl.java:sendRequest(285)) - client-5A85124EAC30: receive RaftClientReply:client-5A85124EAC30->s1@group-7235C4202B27, cid=0, FAILED org.apache.ratis.protocol.LeaderNotReadyException: s1@group-7235C4202B27 is in LEADER state but not ready yet., logIndex=0, commits[s1:c-1, s0:c-1, s2:c-1]
2019-09-24 12:07:47,734 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s2@group-7235C4202B27: receive appendEntries(s1, 4, null, -1, false, commits[s1:c-1, s0:c-1, s2:c-1], entries: (t:4, i:0), CONFIGURATIONENTRY
2019-09-24 12:07:47,734 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s0@group-7235C4202B27: receive appendEntries(s1, 4, null, -1, false, commits[s1:c-1, s0:c-1, s2:c-1], entries: (t:4, i:0), CONFIGURATIONENTRY
2019-09-24 12:07:47,737 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(355)) - s2@group-7235C4202B27: set configuration 0: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null at 0
2019-09-24 12:07:47,737 DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(425)) - truncateIndex=-1, arrayIndex=0
2019-09-24 12:07:47,737 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(355)) - s0@group-7235C4202B27: set configuration 0: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null at 0
2019-09-24 12:07:47,737 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(380)) - s2@group-7235C4202B27-SegmentedRaftLogWorker: Starting segment from index:0
2019-09-24 12:07:47,737 DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(425)) - truncateIndex=-1, arrayIndex=0
2019-09-24 12:07:47,738 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(380)) - s0@group-7235C4202B27-SegmentedRaftLogWorker: Starting segment from index:0
2019-09-24 12:07:47,832 DEBUG client.RaftClient (RaftClientImpl.java:sendRequest(275)) - client-5A85124EAC30: send RaftClientRequest:client-5A85124EAC30->s1@group-7235C4202B27, cid=0, seq=0, RW, first msg to make leader ready
2019-09-24 12:07:47,835 DEBUG impl.RaftServerImpl (RaftServerImpl.java:submitClientRequestAsync(533)) - s1@group-7235C4202B27: receive client request(RaftClientRequest:client-5A85124EAC30->s1@group-7235C4202B27, cid=0, seq=0, RW, Message:6669727374206d736720...(size=30))
2019-09-24 12:07:47,836 INFO  client.GrpcClientProtocolService (GrpcClientProtocolService.java:lambda$processClientRequest$0(278)) - Failed RaftClientRequest:client-5A85124EAC30->s1@group-7235C4202B27, cid=0, seq=0, RW, Message:6669727374206d736720...(size=30), reply=RaftClientReply:client-5A85124EAC30->s1@group-7235C4202B27, cid=0, FAILED org.apache.ratis.protocol.LeaderNotReadyException: s1@group-7235C4202B27 is in LEADER state but not ready yet., logIndex=0, commits[s1:c-1, s0:c-1, s2:c-1]
2019-09-24 12:07:47,838 DEBUG client.RaftClient (RaftClientImpl.java:sendRequest(285)) - client-5A85124EAC30: receive RaftClientReply:client-5A85124EAC30->s1@group-7235C4202B27, cid=0, FAILED org.apache.ratis.protocol.LeaderNotReadyException: s1@group-7235C4202B27 is in LEADER state but not ready yet., logIndex=0, commits[s1:c-1, s0:c-1, s2:c-1]
2019-09-24 12:07:47,939 DEBUG client.RaftClient (RaftClientImpl.java:sendRequest(275)) - client-5A85124EAC30: send RaftClientRequest:client-5A85124EAC30->s1@group-7235C4202B27, cid=0, seq=0, RW, first msg to make leader ready
2019-09-24 12:07:47,943 DEBUG impl.RaftServerImpl (RaftServerImpl.java:submitClientRequestAsync(533)) - s1@group-7235C4202B27: receive client request(RaftClientRequest:client-5A85124EAC30->s1@group-7235C4202B27, cid=0, seq=0, RW, Message:6669727374206d736720...(size=30))
2019-09-24 12:07:47,944 INFO  client.GrpcClientProtocolService (GrpcClientProtocolService.java:lambda$processClientRequest$0(278)) - Failed RaftClientRequest:client-5A85124EAC30->s1@group-7235C4202B27, cid=0, seq=0, RW, Message:6669727374206d736720...(size=30), reply=RaftClientReply:client-5A85124EAC30->s1@group-7235C4202B27, cid=0, FAILED org.apache.ratis.protocol.LeaderNotReadyException: s1@group-7235C4202B27 is in LEADER state but not ready yet., logIndex=0, commits[s1:c-1, s0:c-1, s2:c-1]
2019-09-24 12:07:47,947 DEBUG client.RaftClient (RaftClientImpl.java:sendRequest(285)) - client-5A85124EAC30: receive RaftClientReply:client-5A85124EAC30->s1@group-7235C4202B27, cid=0, FAILED org.apache.ratis.protocol.LeaderNotReadyException: s1@group-7235C4202B27 is in LEADER state but not ready yet., logIndex=0, commits[s1:c-1, s0:c-1, s2:c-1]
2019-09-24 12:07:48,006 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(569)) - s2@group-7235C4202B27-SegmentedRaftLogWorker: created new log segment /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpc3b5164c8/s2/c7906edc-4249-4da4-9cc8-7235c4202b27/current/log_inprogress_0
2019-09-24 12:07:48,006 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(569)) - s0@group-7235C4202B27-SegmentedRaftLogWorker: created new log segment /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpc3b5164c8/s0/c7906edc-4249-4da4-9cc8-7235c4202b27/current/log_inprogress_0
2019-09-24 12:07:48,006 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(569)) - s1@group-7235C4202B27-SegmentedRaftLogWorker: created new log segment /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpc3b5164c8/s1/c7906edc-4249-4da4-9cc8-7235c4202b27/current/log_inprogress_0
2019-09-24 12:07:48,026 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s2@group-7235C4202B27: succeeded to handle AppendEntries. Reply: s1<-s2#1:OK,SUCCESS,nextIndex:1,term:4,followerCommit:-1
2019-09-24 12:07:48,026 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s0@group-7235C4202B27: succeeded to handle AppendEntries. Reply: s1<-s0#1:OK,SUCCESS,nextIndex:1,term:4,followerCommit:-1
2019-09-24 12:07:48,047 DEBUG client.RaftClient (RaftClientImpl.java:sendRequest(275)) - client-5A85124EAC30: send RaftClientRequest:client-5A85124EAC30->s1@group-7235C4202B27, cid=0, seq=0, RW, first msg to make leader ready
2019-09-24 12:07:48,051 DEBUG impl.RaftServerImpl (RaftServerImpl.java:submitClientRequestAsync(533)) - s1@group-7235C4202B27: receive client request(RaftClientRequest:client-5A85124EAC30->s1@group-7235C4202B27, cid=0, seq=0, RW, Message:6669727374206d736720...(size=30))
2019-09-24 12:07:48,075 DEBUG impl.RaftServerImpl (LeaderState.java:addPendingRequest(317)) - s1@group-7235C4202B27-LeaderState: addPendingRequest at RaftClientRequest:client-5A85124EAC30->s1@group-7235C4202B27, cid=0, seq=0, RW, Message:6669727374206d736720...(size=30), entry=(t:4, i:1), STATEMACHINELOGENTRY, client-5A85124EAC30, cid=0
2019-09-24 12:07:48,081 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s2@group-7235C4202B27: receive appendEntries(s1, 4, (t:4, i:0), 0, false, commits[s1:c0, s0:c-1, s2:c-1], entries: (t:4, i:1), STATEMACHINELOGENTRY, client-5A85124EAC30, cid=0
2019-09-24 12:07:48,081 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s0@group-7235C4202B27: receive appendEntries(s1, 4, (t:4, i:0), 0, false, commits[s1:c0, s0:c-1, s2:c-1], entries: (t:4, i:1), STATEMACHINELOGENTRY, client-5A85124EAC30, cid=0
2019-09-24 12:07:48,081 DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(425)) - truncateIndex=-1, arrayIndex=0
2019-09-24 12:07:48,082 DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(425)) - truncateIndex=-1, arrayIndex=0
2019-09-24 12:07:48,087 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s0@group-7235C4202B27: succeeded to handle AppendEntries. Reply: s1<-s0#5:OK,SUCCESS,nextIndex:2,term:4,followerCommit:0
2019-09-24 12:07:48,088 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s2@group-7235C4202B27: succeeded to handle AppendEntries. Reply: s1<-s2#5:OK,SUCCESS,nextIndex:2,term:4,followerCommit:0
2019-09-24 12:07:48,096 INFO  client.GrpcClientProtocolService (GrpcClientProtocolService.java:lambda$processClientRequest$0(278)) - Failed RaftClientRequest:client-5A85124EAC30->s1@group-7235C4202B27, cid=0, seq=0, RW, Message:6669727374206d736720...(size=30), reply=RaftClientReply:client-5A85124EAC30->s1@group-7235C4202B27, cid=0, FAILED org.apache.ratis.protocol.StateMachineException: org.apache.ratis.protocol.StateMachineException from Server s1@group-7235C4202B27: Fake Exception, logIndex=1, commits[s1:c1, s0:c0, s2:c0]
2019-09-24 12:07:48,097 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s0@group-7235C4202B27: receive appendEntries(s1, 4, (t:4, i:1), 1, false, commits[s1:c1, s0:c0, s2:c0], entries: (t:4, i:2), METADATAENTRY(c1)
2019-09-24 12:07:48,097 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s2@group-7235C4202B27: receive appendEntries(s1, 4, (t:4, i:1), 1, false, commits[s1:c1, s0:c0, s2:c0], entries: (t:4, i:2), METADATAENTRY(c1)
2019-09-24 12:07:48,097 DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(425)) - truncateIndex=-1, arrayIndex=0
2019-09-24 12:07:48,098 DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(425)) - truncateIndex=-1, arrayIndex=0
2019-09-24 12:07:48,106 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s2@group-7235C4202B27: succeeded to handle AppendEntries. Reply: s1<-s2#6:OK,SUCCESS,nextIndex:3,term:4,followerCommit:1
2019-09-24 12:07:48,107 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s0@group-7235C4202B27: succeeded to handle AppendEntries. Reply: s1<-s0#6:OK,SUCCESS,nextIndex:3,term:4,followerCommit:1
2019-09-24 12:07:48,117 DEBUG client.RaftClient (RaftClientImpl.java:sendRequest(285)) - client-5A85124EAC30: receive RaftClientReply:client-5A85124EAC30->s1@group-7235C4202B27, cid=0, FAILED org.apache.ratis.protocol.StateMachineException: org.apache.ratis.protocol.StateMachineException from Server s1@group-7235C4202B27: Fake Exception, logIndex=1, commits[s1:c1, s0:c0, s2:c0]
2019-09-24 12:07:48,129 DEBUG client.RaftClient (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-09-24 12:07:48,138 DEBUG impl.RaftServerImpl (RaftServerImpl.java:submitClientRequestAsync(533)) - s1@group-7235C4202B27: receive client request(RaftClientRequest:client-9233FA2595BE->s1@group-7235C4202B27, cid=999, seq=0, RW, Message:6d657373616765)
2019-09-24 12:07:48,140 DEBUG impl.RaftServerImpl (LeaderState.java:addPendingRequest(317)) - s1@group-7235C4202B27-LeaderState: addPendingRequest at RaftClientRequest:client-9233FA2595BE->s1@group-7235C4202B27, cid=999, seq=0, RW, Message:6d657373616765, entry=(t:4, i:3), STATEMACHINELOGENTRY, client-9233FA2595BE, cid=999
2019-09-24 12:07:48,143 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s2@group-7235C4202B27: receive appendEntries(s1, 4, (t:4, i:2), 2, false, commits[s1:c2, s0:c1, s2:c1], entries: (t:4, i:3), STATEMACHINELOGENTRY, client-9233FA2595BE, cid=999
2019-09-24 12:07:48,143 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s0@group-7235C4202B27: receive appendEntries(s1, 4, (t:4, i:2), 2, false, commits[s1:c2, s0:c1, s2:c1], entries: (t:4, i:3), STATEMACHINELOGENTRY, client-9233FA2595BE, cid=999
2019-09-24 12:07:48,144 DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(425)) - truncateIndex=-1, arrayIndex=0
2019-09-24 12:07:48,144 DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(425)) - truncateIndex=-1, arrayIndex=0
2019-09-24 12:07:48,152 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s0@group-7235C4202B27: succeeded to handle AppendEntries. Reply: s1<-s0#7:OK,SUCCESS,nextIndex:4,term:4,followerCommit:2
2019-09-24 12:07:48,152 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s2@group-7235C4202B27: succeeded to handle AppendEntries. Reply: s1<-s2#7:OK,SUCCESS,nextIndex:4,term:4,followerCommit:2
2019-09-24 12:07:48,156 INFO  client.GrpcClientProtocolService (GrpcClientProtocolService.java:lambda$processClientRequest$0(278)) - Failed RaftClientRequest:client-9233FA2595BE->s1@group-7235C4202B27, cid=999, seq=0, RW, Message:6d657373616765, reply=RaftClientReply:client-9233FA2595BE->s1@group-7235C4202B27, cid=999, FAILED org.apache.ratis.protocol.StateMachineException: org.apache.ratis.protocol.StateMachineException from Server s1@group-7235C4202B27: Fake Exception, logIndex=3, commits[s1:c3, s0:c2, s2:c2]
2019-09-24 12:07:48,157 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s2@group-7235C4202B27: receive appendEntries(s1, 4, (t:4, i:3), 3, false, commits[s1:c3, s0:c2, s2:c2], entries: (t:4, i:4), METADATAENTRY(c3)
2019-09-24 12:07:48,157 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s0@group-7235C4202B27: receive appendEntries(s1, 4, (t:4, i:3), 3, false, commits[s1:c3, s0:c2, s2:c2], entries: (t:4, i:4), METADATAENTRY(c3)
2019-09-24 12:07:48,158 DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(425)) - truncateIndex=-1, arrayIndex=0
2019-09-24 12:07:48,158 DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(425)) - truncateIndex=-1, arrayIndex=0
2019-09-24 12:07:48,163 DEBUG impl.RaftServerImpl (RaftServerImpl.java:submitClientRequestAsync(533)) - s1@group-7235C4202B27: receive client request(RaftClientRequest:client-9233FA2595BE->s1@group-7235C4202B27, cid=999, seq=0, RW, Message:6d657373616765)
2019-09-24 12:07:48,164 INFO  client.GrpcClientProtocolService (GrpcClientProtocolService.java:lambda$processClientRequest$0(278)) - Failed RaftClientRequest:client-9233FA2595BE->s1@group-7235C4202B27, cid=999, seq=0, RW, Message:6d657373616765, reply=RaftClientReply:client-9233FA2595BE->s1@group-7235C4202B27, cid=999, FAILED org.apache.ratis.protocol.StateMachineException: org.apache.ratis.protocol.StateMachineException from Server s1@group-7235C4202B27: Fake Exception, logIndex=3, commits[s1:c3, s0:c2, s2:c2]
2019-09-24 12:07:48,170 DEBUG impl.RaftServerImpl (RaftServerImpl.java:submitClientRequestAsync(533)) - s1@group-7235C4202B27: receive client request(RaftClientRequest:client-9233FA2595BE->s1@group-7235C4202B27, cid=999, seq=0, RW, Message:6d657373616765)
2019-09-24 12:07:48,170 INFO  client.GrpcClientProtocolService (GrpcClientProtocolService.java:lambda$processClientRequest$0(278)) - Failed RaftClientRequest:client-9233FA2595BE->s1@group-7235C4202B27, cid=999, seq=0, RW, Message:6d657373616765, reply=RaftClientReply:client-9233FA2595BE->s1@group-7235C4202B27, cid=999, FAILED org.apache.ratis.protocol.StateMachineException: org.apache.ratis.protocol.StateMachineException from Server s1@group-7235C4202B27: Fake Exception, logIndex=3, commits[s1:c3, s0:c2, s2:c2]
2019-09-24 12:07:48,176 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s0@group-7235C4202B27: succeeded to handle AppendEntries. Reply: s1<-s0#8:OK,SUCCESS,nextIndex:5,term:4,followerCommit:3
2019-09-24 12:07:48,177 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s2@group-7235C4202B27: succeeded to handle AppendEntries. Reply: s1<-s2#8:OK,SUCCESS,nextIndex:5,term:4,followerCommit:3
2019-09-24 12:07:48,177 DEBUG impl.RaftServerImpl (RaftServerImpl.java:submitClientRequestAsync(533)) - s1@group-7235C4202B27: receive client request(RaftClientRequest:client-9233FA2595BE->s1@group-7235C4202B27, cid=999, seq=0, RW, Message:6d657373616765)
2019-09-24 12:07:48,178 INFO  client.GrpcClientProtocolService (GrpcClientProtocolService.java:lambda$processClientRequest$0(278)) - Failed RaftClientRequest:client-9233FA2595BE->s1@group-7235C4202B27, cid=999, seq=0, RW, Message:6d657373616765, reply=RaftClientReply:client-9233FA2595BE->s1@group-7235C4202B27, cid=999, FAILED org.apache.ratis.protocol.StateMachineException: org.apache.ratis.protocol.StateMachineException from Server s1@group-7235C4202B27: Fake Exception, logIndex=3, commits[s1:c3, s0:c2, s2:c2]
2019-09-24 12:07:48,183 DEBUG impl.RaftServerImpl (RaftServerImpl.java:submitClientRequestAsync(533)) - s1@group-7235C4202B27: receive client request(RaftClientRequest:client-9233FA2595BE->s1@group-7235C4202B27, cid=999, seq=0, RW, Message:6d657373616765)
2019-09-24 12:07:48,184 INFO  client.GrpcClientProtocolService (GrpcClientProtocolService.java:lambda$processClientRequest$0(278)) - Failed RaftClientRequest:client-9233FA2595BE->s1@group-7235C4202B27, cid=999, seq=0, RW, Message:6d657373616765, reply=RaftClientReply:client-9233FA2595BE->s1@group-7235C4202B27, cid=999, FAILED org.apache.ratis.protocol.StateMachineException: org.apache.ratis.protocol.StateMachineException from Server s1@group-7235C4202B27: Fake Exception, logIndex=3, commits[s1:c3, s0:c2, s2:c2]
2019-09-24 12:07:48,190 DEBUG impl.RaftServerImpl (RaftServerImpl.java:submitClientRequestAsync(533)) - s1@group-7235C4202B27: receive client request(RaftClientRequest:client-9233FA2595BE->s1@group-7235C4202B27, cid=999, seq=0, RW, Message:6d657373616765)
2019-09-24 12:07:48,191 INFO  client.GrpcClientProtocolService (GrpcClientProtocolService.java:lambda$processClientRequest$0(278)) - Failed RaftClientRequest:client-9233FA2595BE->s1@group-7235C4202B27, cid=999, seq=0, RW, Message:6d657373616765, reply=RaftClientReply:client-9233FA2595BE->s1@group-7235C4202B27, cid=999, FAILED org.apache.ratis.protocol.StateMachineException: org.apache.ratis.protocol.StateMachineException from Server s1@group-7235C4202B27: Fake Exception, logIndex=3, commits[s1:c3, s0:c2, s2:c2]
2019-09-24 12:07:48,196 INFO  grpc.TestRaftStateMachineExceptionWithGrpc (RaftStateMachineExceptionTests.java:runTestRetryOnStateMachineException(129)) - check server s0
2019-09-24 12:07:49,196 INFO  grpc.TestRaftStateMachineExceptionWithGrpc (RaftStateMachineExceptionTests.java:runTestRetryOnStateMachineException(129)) - check server s1
2019-09-24 12:07:49,197 INFO  grpc.TestRaftStateMachineExceptionWithGrpc (RaftStateMachineExceptionTests.java:runTestRetryOnStateMachineException(129)) - check server s2
2019-09-24 12:07:49,198 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(700)) - ************************************************************** 
2019-09-24 12:07:49,199 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(701)) - *** 
2019-09-24 12:07:49,199 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(702)) - ***     Stopping MiniRaftClusterWithGrpc
2019-09-24 12:07:49,199 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(703)) - *** 
2019-09-24 12:07:49,199 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(704)) - ************************************************************** 
2019-09-24 12:07:49,200 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(705)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-7235C4202B27:t4, leader=s1, voted=s1, raftlog=s0@group-7235C4202B27-SegmentedRaftLog:OPENED:c4,f4,i4, conf=0: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null RUNNING
  s1:  RUNNING    LEADER s1@group-7235C4202B27:t4, leader=s1, voted=s1, raftlog=s1@group-7235C4202B27-SegmentedRaftLog:OPENED:c4,f4,i4, conf=0: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-7235C4202B27:t4, leader=s1, voted=s1, raftlog=s2@group-7235C4202B27-SegmentedRaftLog:OPENED:c4,f4,i4, conf=0: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null RUNNING
2019-09-24 12:07:49,204 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - s0: close
2019-09-24 12:07:49,204 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - s1: close
2019-09-24 12:07:49,204 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - s2: close
2019-09-24 12:07:49,209 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(247)) - s1@group-7235C4202B27: shutdown
2019-09-24 12:07:49,209 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(247)) - s0@group-7235C4202B27: shutdown
2019-09-24 12:07:49,209 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-7235C4202B27,id=s1
2019-09-24 12:07:49,209 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(247)) - s2@group-7235C4202B27: shutdown
2019-09-24 12:07:49,210 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - s1: shutdown LeaderState
2019-09-24 12:07:49,209 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-7235C4202B27,id=s0
2019-09-24 12:07:49,212 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - s0: shutdown FollowerState
2019-09-24 12:07:49,210 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-7235C4202B27,id=s2
2019-09-24 12:07:49,212 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - s2: shutdown FollowerState
2019-09-24 12:07:49,212 INFO  impl.FollowerState (FollowerState.java:run(117)) - s0@group-7235C4202B27-FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-09-24 12:07:49,212 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(136)) - s0@group-7235C4202B27-StateMachineUpdater: set stopIndex = 4
2019-09-24 12:07:49,213 INFO  impl.FollowerState (FollowerState.java:run(117)) - s2@group-7235C4202B27-FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-09-24 12:07:49,213 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(202)) - s1@group-7235C4202B27-PendingRequests: sendNotLeaderResponses
2019-09-24 12:07:49,213 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(136)) - s2@group-7235C4202B27-StateMachineUpdater: set stopIndex = 4
2019-09-24 12:07:49,214 INFO  impl.RaftServerImpl (ServerState.java:close(386)) - s2@group-7235C4202B27: closes. applyIndex: 4
2019-09-24 12:07:49,212 WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(143)) - s1@group-7235C4202B27->s2-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2019-09-24 12:07:49,212 WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(143)) - s1@group-7235C4202B27->s0-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2019-09-24 12:07:49,213 INFO  impl.RaftServerImpl (ServerState.java:close(386)) - s0@group-7235C4202B27: closes. applyIndex: 4
2019-09-24 12:07:49,216 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(136)) - s1@group-7235C4202B27-StateMachineUpdater: set stopIndex = 4
2019-09-24 12:07:49,216 INFO  impl.RaftServerImpl (ServerState.java:close(386)) - s1@group-7235C4202B27: closes. applyIndex: 4
2019-09-24 12:07:49,217 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(313)) - s0@group-7235C4202B27-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-09-24 12:07:49,218 INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(113)) - s2: Completed APPEND_ENTRIES, lastRequest: s1->s2#21-t4, previous=(t:4, i:4), leaderCommit=4, initializing? false, entries: <empty>
2019-09-24 12:07:49,218 INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(113)) - s0: Completed APPEND_ENTRIES, lastRequest: s1->s0#21-t4, previous=(t:4, i:4), leaderCommit=4, initializing? false, entries: <empty>
2019-09-24 12:07:49,217 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(313)) - s1@group-7235C4202B27-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-09-24 12:07:49,217 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(313)) - s2@group-7235C4202B27-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-09-24 12:07:49,219 INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(293)) - s1@group-7235C4202B27->s2-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2019-09-24 12:07:49,219 INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(293)) - s1@group-7235C4202B27->s0-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2019-09-24 12:07:49,220 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(228)) - s0@group-7235C4202B27-SegmentedRaftLogWorker close()
2019-09-24 12:07:49,221 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(228)) - s1@group-7235C4202B27-SegmentedRaftLogWorker close()
2019-09-24 12:07:49,221 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(228)) - s2@group-7235C4202B27-SegmentedRaftLogWorker close()
2019-09-24 12:07:49,222 INFO  impl.FollowerInfo (FollowerInfo.java:lambda$new$0(51)) - s1@group-7235C4202B27->s2: nextIndex: updateUnconditionally 5 -> 4
2019-09-24 12:07:49,222 INFO  impl.FollowerInfo (FollowerInfo.java:lambda$new$0(51)) - s1@group-7235C4202B27->s0: nextIndex: updateUnconditionally 5 -> 4
2019-09-24 12:07:49,223 INFO  server.GrpcService (GrpcService.java:closeImpl(164)) - s2: shutdown server with port 37079 now
2019-09-24 12:07:49,223 INFO  server.GrpcService (GrpcService.java:closeImpl(164)) - s0: shutdown server with port 37696 now
2019-09-24 12:07:49,223 INFO  server.GrpcService (GrpcService.java:closeImpl(164)) - s1: shutdown server with port 37652 now
2019-09-24 12:07:49,229 INFO  server.GrpcService (GrpcService.java:closeImpl(172)) - s1: shutdown server with port 37652 successfully
2019-09-24 12:07:49,233 INFO  server.GrpcService (GrpcService.java:closeImpl(172)) - s2: shutdown server with port 37079 successfully
2019-09-24 12:07:49,233 INFO  server.GrpcService (GrpcService.java:closeImpl(172)) - s0: shutdown server with port 37696 successfully
2019-09-24 12:07:49,234 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(722)) - MiniRaftClusterWithGrpc shutdown completed
2019-09-24 12:07:49,234 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(700)) - ************************************************************** 
2019-09-24 12:07:49,235 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(701)) - *** 
2019-09-24 12:07:49,235 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(702)) - ***     Stopping MiniRaftClusterWithGrpc
2019-09-24 12:07:49,235 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(703)) - *** 
2019-09-24 12:07:49,235 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(704)) - ************************************************************** 
2019-09-24 12:07:49,235 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(705)) - printing ALL groups
  s0:   CLOSED  FOLLOWER s0@group-7235C4202B27:t4, leader=s1, voted=s1, raftlog=s0@group-7235C4202B27-SegmentedRaftLog:CLOSED:c4, conf=0: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null CLOSED
  s1:   CLOSED    LEADER s1@group-7235C4202B27:t4, leader=s1, voted=s1, raftlog=s1@group-7235C4202B27-SegmentedRaftLog:CLOSED:c4, conf=0: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null CLOSED
  s2:   CLOSED  FOLLOWER s2@group-7235C4202B27:t4, leader=s1, voted=s1, raftlog=s2@group-7235C4202B27-SegmentedRaftLog:CLOSED:c4, conf=0: [s0:0.0.0.0:37696, s1:0.0.0.0:37652, s2:0.0.0.0:37079], old=null CLOSED
2019-09-24 12:07:49,237 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(722)) - MiniRaftClusterWithGrpc shutdown completed
2019-09-24 12:07:49,240 INFO  util.LogUtils (LogUtils.java:setLogLevel(41)) - Set org.apache.ratis.conf.ConfUtils log level to WARN
2019-09-24 12:07:49,241 INFO  util.LogUtils (LogUtils.java:setLogLevel(41)) - Set org.apache.ratis.util.FileUtils log level to TRACE
2019-09-24 12:07:49,241 INFO  util.LogUtils (LogUtils.java:setLogLevel(41)) - Set org.apache.ratis.server.impl.RaftServerImpl log level to DEBUG
2019-09-24 12:07:49,241 INFO  util.LogUtils (LogUtils.java:setLogLevel(41)) - Set org.apache.ratis.server.raftlog.RaftLog log level to DEBUG
2019-09-24 12:07:49,242 INFO  util.LogUtils (LogUtils.java:setLogLevel(41)) - Set org.apache.ratis.client.RaftClient log level to DEBUG
2019-09-24 12:07:49,243 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:runWithNewCluster(119)) - Running runWithNewCluster
2019-09-24 12:07:49,244 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:<init>(253)) - new MiniRaftClusterWithGrpc with group-2286EECED0FF:[s0:0.0.0.0:43358, s1:0.0.0.0:37249, s2:0.0.0.0:46545]
2019-09-24 12:07:49,244 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:start(287)) - .............................................................. 
2019-09-24 12:07:49,245 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:start(288)) - ... 
2019-09-24 12:07:49,245 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:start(289)) - ...     Starting MiniRaftClusterWithGrpc
2019-09-24 12:07:49,245 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:start(290)) - ... 
2019-09-24 12:07:49,245 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:start(291)) - .............................................................. 
2019-09-24 12:07:49,245 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:initServers(265)) - servers = {}
2019-09-24 12:07:49,245 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(330)) - newRaftServer: s0, group-2286EECED0FF:[s0:0.0.0.0:43358, s1:0.0.0.0:37249, s2:0.0.0.0:46545], format? true
2019-09-24 12:07:49,246 TRACE util.FileUtils (FileUtils.java:deleteFully(88)) - deleteFully target/test/data/ce901d9b/MiniRaftClusterWithGrpcfe4f6f01/s0
2019-09-24 12:07:49,246 TRACE util.FileUtils (FileUtils.java:deleteFully(104)) - deleteFully: target/test/data/ce901d9b/MiniRaftClusterWithGrpcfe4f6f01/s0 does not exist.
2019-09-24 12:07:49,246 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(335)) - Formatted directory target/test/data/ce901d9b/MiniRaftClusterWithGrpcfe4f6f01/s0
2019-09-24 12:07:49,247 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-09-24 12:07:49,247 INFO  grpc.GrpcFactory (GrpcFactory.java:checkPooledByteBufAllocatorUseCacheForAllThreads(45)) - PERFORMANCE WARNING: useCacheForAllThreads is true that may cause Netty to create a lot garbage objects and, as a result, trigger GC.
	It is recommended to disable useCacheForAllThreads by setting -Dorg.apache.ratis.thirdparty.io.netty.allocator.useCacheForAllThreads=false in command line.
2019-09-24 12:07:49,248 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 43358 (custom)
2019-09-24 12:07:49,248 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2019-09-24 12:07:49,248 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-24 12:07:49,249 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-09-24 12:07:49,249 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-09-24 12:07:49,250 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfe4f6f01/s0] (custom)
2019-09-24 12:07:49,251 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - s0: addNew group-2286EECED0FF:[s0:0.0.0.0:43358, s1:0.0.0.0:37249, s2:0.0.0.0:46545] returns group-2286EECED0FF:java.util.concurrent.CompletableFuture@5d6bc546[Not completed]
2019-09-24 12:07:49,252 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(330)) - newRaftServer: s1, group-2286EECED0FF:[s0:0.0.0.0:43358, s1:0.0.0.0:37249, s2:0.0.0.0:46545], format? true
2019-09-24 12:07:49,252 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-24 12:07:49,252 TRACE util.FileUtils (FileUtils.java:deleteFully(88)) - deleteFully target/test/data/ce901d9b/MiniRaftClusterWithGrpcfe4f6f01/s1
2019-09-24 12:07:49,252 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2019-09-24 12:07:49,253 TRACE util.FileUtils (FileUtils.java:deleteFully(104)) - deleteFully: target/test/data/ce901d9b/MiniRaftClusterWithGrpcfe4f6f01/s1 does not exist.
2019-09-24 12:07:49,253 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2019-09-24 12:07:49,253 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(335)) - Formatted directory target/test/data/ce901d9b/MiniRaftClusterWithGrpcfe4f6f01/s1
2019-09-24 12:07:49,253 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(95)) - s0: new RaftServerImpl for group-2286EECED0FF:[s0:0.0.0.0:43358, s1:0.0.0.0:37249, s2:0.0.0.0:46545] with StateMachineWithException:uninitialized
2019-09-24 12:07:49,254 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 150ms (default)
2019-09-24 12:07:49,254 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-09-24 12:07:49,254 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 300ms (default)
2019-09-24 12:07:49,254 INFO  grpc.GrpcFactory (GrpcFactory.java:checkPooledByteBufAllocatorUseCacheForAllThreads(45)) - PERFORMANCE WARNING: useCacheForAllThreads is true that may cause Netty to create a lot garbage objects and, as a result, trigger GC.
	It is recommended to disable useCacheForAllThreads by setting -Dorg.apache.ratis.thirdparty.io.netty.allocator.useCacheForAllThreads=false in command line.
2019-09-24 12:07:49,255 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 60s (default)
2019-09-24 12:07:49,255 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 37249 (custom)
2019-09-24 12:07:49,255 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.sleep.deviation.threshold = 300 (default)
2019-09-24 12:07:49,255 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2019-09-24 12:07:49,255 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-09-24 12:07:49,256 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-24 12:07:49,256 INFO  impl.RaftServerImpl (ServerState.java:<init>(103)) - s0@group-2286EECED0FF: ConfigurationManager, init=-1: [s0:0.0.0.0:43358, s1:0.0.0.0:37249, s2:0.0.0.0:46545], old=null, confs=<EMPTY_MAP>
2019-09-24 12:07:49,256 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-09-24 12:07:49,257 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfe4f6f01/s0] (custom)
2019-09-24 12:07:49,257 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-09-24 12:07:49,257 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.corruption.policy = EXCEPTION (default)
2019-09-24 12:07:49,257 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfe4f6f01/s0/8a8635cc-4537-44ab-bff8-2286eeced0ff does not exist. Creating ...
2019-09-24 12:07:49,258 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfe4f6f01/s1] (custom)
2019-09-24 12:07:49,258 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - s1: addNew group-2286EECED0FF:[s0:0.0.0.0:43358, s1:0.0.0.0:37249, s2:0.0.0.0:46545] returns group-2286EECED0FF:java.util.concurrent.CompletableFuture@7e874b7b[Not completed]
2019-09-24 12:07:49,258 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfe4f6f01/s0/8a8635cc-4537-44ab-bff8-2286eeced0ff
2019-09-24 12:07:49,259 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-24 12:07:49,259 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(330)) - newRaftServer: s2, group-2286EECED0FF:[s0:0.0.0.0:43358, s1:0.0.0.0:37249, s2:0.0.0.0:46545], format? true
2019-09-24 12:07:49,259 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2019-09-24 12:07:49,259 TRACE util.FileUtils (FileUtils.java:deleteFully(88)) - deleteFully target/test/data/ce901d9b/MiniRaftClusterWithGrpcfe4f6f01/s2
2019-09-24 12:07:49,260 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2019-09-24 12:07:49,260 TRACE util.FileUtils (FileUtils.java:deleteFully(104)) - deleteFully: target/test/data/ce901d9b/MiniRaftClusterWithGrpcfe4f6f01/s2 does not exist.
2019-09-24 12:07:49,260 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(95)) - s1: new RaftServerImpl for group-2286EECED0FF:[s0:0.0.0.0:43358, s1:0.0.0.0:37249, s2:0.0.0.0:46545] with StateMachineWithException:uninitialized
2019-09-24 12:07:49,260 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(335)) - Formatted directory target/test/data/ce901d9b/MiniRaftClusterWithGrpcfe4f6f01/s2
2019-09-24 12:07:49,261 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 150ms (default)
2019-09-24 12:07:49,261 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-09-24 12:07:49,261 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 300ms (default)
2019-09-24 12:07:49,262 INFO  grpc.GrpcFactory (GrpcFactory.java:checkPooledByteBufAllocatorUseCacheForAllThreads(45)) - PERFORMANCE WARNING: useCacheForAllThreads is true that may cause Netty to create a lot garbage objects and, as a result, trigger GC.
	It is recommended to disable useCacheForAllThreads by setting -Dorg.apache.ratis.thirdparty.io.netty.allocator.useCacheForAllThreads=false in command line.
2019-09-24 12:07:49,262 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 60s (default)
2019-09-24 12:07:49,262 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 46545 (custom)
2019-09-24 12:07:49,262 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.sleep.deviation.threshold = 300 (default)
2019-09-24 12:07:49,263 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2019-09-24 12:07:49,263 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-09-24 12:07:49,263 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-24 12:07:49,263 INFO  impl.RaftServerImpl (ServerState.java:<init>(103)) - s1@group-2286EECED0FF: ConfigurationManager, init=-1: [s0:0.0.0.0:43358, s1:0.0.0.0:37249, s2:0.0.0.0:46545], old=null, confs=<EMPTY_MAP>
2019-09-24 12:07:49,263 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-09-24 12:07:49,264 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfe4f6f01/s1] (custom)
2019-09-24 12:07:49,264 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-09-24 12:07:49,264 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.corruption.policy = EXCEPTION (default)
2019-09-24 12:07:49,265 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfe4f6f01/s1/8a8635cc-4537-44ab-bff8-2286eeced0ff does not exist. Creating ...
2019-09-24 12:07:49,265 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfe4f6f01/s2] (custom)
2019-09-24 12:07:49,266 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - s2: addNew group-2286EECED0FF:[s0:0.0.0.0:43358, s1:0.0.0.0:37249, s2:0.0.0.0:46545] returns group-2286EECED0FF:java.util.concurrent.CompletableFuture@3ed18977[Not completed]
2019-09-24 12:07:49,266 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-24 12:07:49,266 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfe4f6f01/s1/8a8635cc-4537-44ab-bff8-2286eeced0ff
2019-09-24 12:07:49,266 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2019-09-24 12:07:49,267 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2019-09-24 12:07:49,267 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(95)) - s2: new RaftServerImpl for group-2286EECED0FF:[s0:0.0.0.0:43358, s1:0.0.0.0:37249, s2:0.0.0.0:46545] with StateMachineWithException:uninitialized
2019-09-24 12:07:49,267 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 150ms (default)
2019-09-24 12:07:49,268 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 300ms (default)
2019-09-24 12:07:49,268 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 60s (default)
2019-09-24 12:07:49,268 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.sleep.deviation.threshold = 300 (default)
2019-09-24 12:07:49,268 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-09-24 12:07:49,268 INFO  impl.RaftServerImpl (ServerState.java:<init>(103)) - s2@group-2286EECED0FF: ConfigurationManager, init=-1: [s0:0.0.0.0:43358, s1:0.0.0.0:37249, s2:0.0.0.0:46545], old=null, confs=<EMPTY_MAP>
2019-09-24 12:07:49,269 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfe4f6f01/s2] (custom)
2019-09-24 12:07:49,269 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.corruption.policy = EXCEPTION (default)
2019-09-24 12:07:49,269 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfe4f6f01/s2/8a8635cc-4537-44ab-bff8-2286eeced0ff does not exist. Creating ...
2019-09-24 12:07:49,270 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfe4f6f01/s2/8a8635cc-4537-44ab-bff8-2286eeced0ff
2019-09-24 12:07:49,293 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfe4f6f01/s0/8a8635cc-4537-44ab-bff8-2286eeced0ff/in_use.lock acquired by nodename 19836@ratis-test-nppbd-817190658
2019-09-24 12:07:49,293 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfe4f6f01/s1/8a8635cc-4537-44ab-bff8-2286eeced0ff/in_use.lock acquired by nodename 19836@ratis-test-nppbd-817190658
2019-09-24 12:07:49,293 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfe4f6f01/s0/8a8635cc-4537-44ab-bff8-2286eeced0ff/current
2019-09-24 12:07:49,293 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfe4f6f01/s1/8a8635cc-4537-44ab-bff8-2286eeced0ff/current
2019-09-24 12:07:49,294 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfe4f6f01/s0/8a8635cc-4537-44ab-bff8-2286eeced0ff/sm
2019-09-24 12:07:49,294 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfe4f6f01/s1/8a8635cc-4537-44ab-bff8-2286eeced0ff/sm
2019-09-24 12:07:49,294 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfe4f6f01/s2/8a8635cc-4537-44ab-bff8-2286eeced0ff/in_use.lock acquired by nodename 19836@ratis-test-nppbd-817190658
2019-09-24 12:07:49,295 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfe4f6f01/s2/8a8635cc-4537-44ab-bff8-2286eeced0ff/current
2019-09-24 12:07:49,295 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfe4f6f01/s2/8a8635cc-4537-44ab-bff8-2286eeced0ff/sm
2019-09-24 12:07:49,319 INFO  storage.RaftStorage (RaftStorage.java:format(84)) - Storage directory /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfe4f6f01/s2/8a8635cc-4537-44ab-bff8-2286eeced0ff has been successfully formatted.
2019-09-24 12:07:49,319 INFO  storage.RaftStorage (RaftStorage.java:format(84)) - Storage directory /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfe4f6f01/s1/8a8635cc-4537-44ab-bff8-2286eeced0ff has been successfully formatted.
2019-09-24 12:07:49,319 INFO  storage.RaftStorage (RaftStorage.java:format(84)) - Storage directory /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfe4f6f01/s0/8a8635cc-4537-44ab-bff8-2286eeced0ff has been successfully formatted.
2019-09-24 12:07:49,320 INFO  statemachine.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(206)) - Initializing StateMachineWithException:uninitialized
2019-09-24 12:07:49,319 INFO  statemachine.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(206)) - Initializing StateMachineWithException:uninitialized
2019-09-24 12:07:49,320 INFO  statemachine.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(206)) - Initializing StateMachineWithException:uninitialized
2019-09-24 12:07:49,320 INFO  statemachine.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(296)) - The snapshot file null does not exist
2019-09-24 12:07:49,320 INFO  statemachine.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(296)) - The snapshot file null does not exist
2019-09-24 12:07:49,321 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.notification.no-leader.timeout = 60s (default)
2019-09-24 12:07:49,321 INFO  statemachine.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(296)) - The snapshot file null does not exist
2019-09-24 12:07:49,321 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-09-24 12:07:49,321 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.notification.no-leader.timeout = 60s (default)
2019-09-24 12:07:49,321 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.purge.gap = 1024 (default)
2019-09-24 12:07:49,321 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.notification.no-leader.timeout = 60s (default)
2019-09-24 12:07:49,322 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-24 12:07:49,322 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-09-24 12:07:49,322 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-24 12:07:49,322 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-09-24 12:07:49,323 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 6 (default)
2019-09-24 12:07:49,322 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.purge.gap = 1024 (default)
2019-09-24 12:07:49,323 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(172)) - new s1@group-2286EECED0FF-SegmentedRaftLogWorker for RaftStorage:Storage Directory /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfe4f6f01/s1/8a8635cc-4537-44ab-bff8-2286eeced0ff
2019-09-24 12:07:49,323 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.purge.gap = 1024 (default)
2019-09-24 12:07:49,323 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2019-09-24 12:07:49,323 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-24 12:07:49,324 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 4096 (default)
2019-09-24 12:07:49,324 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-24 12:07:49,324 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-24 12:07:49,324 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-24 12:07:49,325 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2019-09-24 12:07:49,324 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-24 12:07:49,325 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2019-09-24 12:07:49,325 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 6 (default)
2019-09-24 12:07:49,325 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-09-24 12:07:49,325 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 6 (default)
2019-09-24 12:07:49,326 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-09-24 12:07:49,326 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(172)) - new s2@group-2286EECED0FF-SegmentedRaftLogWorker for RaftStorage:Storage Directory /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfe4f6f01/s2/8a8635cc-4537-44ab-bff8-2286eeced0ff
2019-09-24 12:07:49,326 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-09-24 12:07:49,326 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(172)) - new s0@group-2286EECED0FF-SegmentedRaftLogWorker for RaftStorage:Storage Directory /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfe4f6f01/s0/8a8635cc-4537-44ab-bff8-2286eeced0ff
2019-09-24 12:07:49,327 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-09-24 12:07:49,327 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2019-09-24 12:07:49,327 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2019-09-24 12:07:49,327 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2019-09-24 12:07:49,327 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 4096 (default)
2019-09-24 12:07:49,328 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 4096 (default)
2019-09-24 12:07:49,328 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(132)) - s1@group-2286EECED0FF-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2019-09-24 12:07:49,328 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-24 12:07:49,328 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-24 12:07:49,329 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2019-09-24 12:07:49,329 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2019-09-24 12:07:49,329 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2019-09-24 12:07:49,329 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2019-09-24 12:07:49,329 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-09-24 12:07:49,329 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.retention.file.num = -1 (default)
2019-09-24 12:07:49,330 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-09-24 12:07:49,330 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2019-09-24 12:07:49,330 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-09-24 12:07:49,330 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 60s (default)
2019-09-24 12:07:49,331 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-09-24 12:07:49,331 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-09-24 12:07:49,331 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2019-09-24 12:07:49,331 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-09-24 12:07:49,332 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-09-24 12:07:49,332 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(132)) - s0@group-2286EECED0FF-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2019-09-24 12:07:49,332 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-09-24 12:07:49,332 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2019-09-24 12:07:49,332 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2019-09-24 12:07:49,333 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.retention.file.num = -1 (default)
2019-09-24 12:07:49,333 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 60s (default)
2019-09-24 12:07:49,333 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(132)) - s2@group-2286EECED0FF-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2019-09-24 12:07:49,333 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2019-09-24 12:07:49,334 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.retention.file.num = -1 (default)
2019-09-24 12:07:49,334 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 60s (default)
2019-09-24 12:07:49,340 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(181)) - s0@group-2286EECED0FF: start as a follower, conf=-1: [s0:0.0.0.0:43358, s1:0.0.0.0:37249, s2:0.0.0.0:46545], old=null
2019-09-24 12:07:49,340 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s0@group-2286EECED0FF: changes role from      null to FOLLOWER at term 0 for startAsFollower
2019-09-24 12:07:49,340 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s0: start FollowerState
2019-09-24 12:07:49,341 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-2286EECED0FF,id=s0
2019-09-24 12:07:49,347 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - s0: start RPC server
2019-09-24 12:07:49,350 INFO  server.GrpcService (GrpcService.java:startImpl(158)) - s0: GrpcService started, listening on 0.0.0.0/0.0.0.0:43358
2019-09-24 12:07:49,350 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(181)) - s1@group-2286EECED0FF: start as a follower, conf=-1: [s0:0.0.0.0:43358, s1:0.0.0.0:37249, s2:0.0.0.0:46545], old=null
2019-09-24 12:07:49,351 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s1@group-2286EECED0FF: changes role from      null to FOLLOWER at term 0 for startAsFollower
2019-09-24 12:07:49,351 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s1: start FollowerState
2019-09-24 12:07:49,352 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-2286EECED0FF,id=s1
2019-09-24 12:07:49,357 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - s1: start RPC server
2019-09-24 12:07:49,359 INFO  server.GrpcService (GrpcService.java:startImpl(158)) - s1: GrpcService started, listening on 0.0.0.0/0.0.0.0:37249
2019-09-24 12:07:49,360 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(181)) - s2@group-2286EECED0FF: start as a follower, conf=-1: [s0:0.0.0.0:43358, s1:0.0.0.0:37249, s2:0.0.0.0:46545], old=null
2019-09-24 12:07:49,360 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s2@group-2286EECED0FF: changes role from      null to FOLLOWER at term 0 for startAsFollower
2019-09-24 12:07:49,361 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s2: start FollowerState
2019-09-24 12:07:49,361 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-2286EECED0FF,id=s2
2019-09-24 12:07:49,366 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - s2: start RPC server
2019-09-24 12:07:49,368 INFO  server.GrpcService (GrpcService.java:startImpl(158)) - s2: GrpcService started, listening on 0.0.0.0/0.0.0.0:46545
2019-09-24 12:07:49,369 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 300ms (default)
2019-09-24 12:07:49,370 INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(86)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-2286EECED0FF:t0, leader=null, voted=null, raftlog=s0@group-2286EECED0FF-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:43358, s1:0.0.0.0:37249, s2:0.0.0.0:46545], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-2286EECED0FF:t0, leader=null, voted=null, raftlog=s1@group-2286EECED0FF-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:43358, s1:0.0.0.0:37249, s2:0.0.0.0:46545], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-2286EECED0FF:t0, leader=null, voted=null, raftlog=s2@group-2286EECED0FF-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:43358, s1:0.0.0.0:37249, s2:0.0.0.0:46545], old=null RUNNING
2019-09-24 12:07:49,370 WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(158)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #1/100: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-2286EECED0FF:t0, leader=null, voted=null, raftlog=s0@group-2286EECED0FF-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:43358, s1:0.0.0.0:37249, s2:0.0.0.0:46545], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-2286EECED0FF:t0, leader=null, voted=null, raftlog=s1@group-2286EECED0FF-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:43358, s1:0.0.0.0:37249, s2:0.0.0.0:46545], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-2286EECED0FF:t0, leader=null, voted=null, raftlog=s2@group-2286EECED0FF-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:43358, s1:0.0.0.0:37249, s2:0.0.0.0:46545], old=null RUNNING, sleep 450ms and then retry.
java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-2286EECED0FF:t0, leader=null, voted=null, raftlog=s0@group-2286EECED0FF-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:43358, s1:0.0.0.0:37249, s2:0.0.0.0:46545], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-2286EECED0FF:t0, leader=null, voted=null, raftlog=s1@group-2286EECED0FF-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:43358, s1:0.0.0.0:37249, s2:0.0.0.0:46545], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-2286EECED0FF:t0, leader=null, voted=null, raftlog=s2@group-2286EECED0FF-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:43358, s1:0.0.0.0:37249, s2:0.0.0.0:46545], old=null RUNNING
	at org.apache.ratis.MiniRaftCluster.newIllegalStateExceptionForNoLeaders(MiniRaftCluster.java:506)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$1(RaftTestUtil.java:90)
	at org.apache.ratis.MiniRaftCluster.getLeader(MiniRaftCluster.java:539)
	at org.apache.ratis.MiniRaftCluster.getLeader(MiniRaftCluster.java:532)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:98)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:152)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:97)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:77)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:72)
	at org.apache.ratis.server.impl.RaftStateMachineExceptionTests.runTestHandleStateMachineException(RaftStateMachineExceptionTests.java:85)
	at org.apache.ratis.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:125)
	at org.apache.ratis.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:113)
	at org.apache.ratis.server.impl.RaftStateMachineExceptionTests.testHandleStateMachineException(RaftStateMachineExceptionTests.java:81)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:748)
2019-09-24 12:07:49,520 INFO  impl.FollowerState (FollowerState.java:run(108)) - s0@group-2286EECED0FF-FollowerState: change to CANDIDATE, lastRpcTime:179ms, electionTimeout:179ms
2019-09-24 12:07:49,521 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - s0: shutdown FollowerState
2019-09-24 12:07:49,521 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s0@group-2286EECED0FF: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-09-24 12:07:49,521 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s0: start LeaderElection
2019-09-24 12:07:49,531 INFO  impl.FollowerState (FollowerState.java:run(108)) - s1@group-2286EECED0FF-FollowerState: change to CANDIDATE, lastRpcTime:179ms, electionTimeout:179ms
2019-09-24 12:07:49,531 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - s1: shutdown FollowerState
2019-09-24 12:07:49,532 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s1@group-2286EECED0FF: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-09-24 12:07:49,532 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s1: start LeaderElection
2019-09-24 12:07:49,537 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(178)) - s0@group-2286EECED0FF-LeaderElection5: begin an election at term 1 for -1: [s0:0.0.0.0:43358, s1:0.0.0.0:37249, s2:0.0.0.0:46545], old=null
2019-09-24 12:07:49,537 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(178)) - s1@group-2286EECED0FF-LeaderElection6: begin an election at term 1 for -1: [s0:0.0.0.0:43358, s1:0.0.0.0:37249, s2:0.0.0.0:46545], old=null
2019-09-24 12:07:49,566 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(743)) - s2@group-2286EECED0FF: receive requestVote(s1, group-2286EECED0FF, 1, (t:0, i:0))
2019-09-24 12:07:49,567 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(743)) - s2@group-2286EECED0FF: receive requestVote(s0, group-2286EECED0FF, 1, (t:0, i:0))
2019-09-24 12:07:49,567 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s2@group-2286EECED0FF: changes role from  FOLLOWER to FOLLOWER at term 1 for recognizeCandidate:s1
2019-09-24 12:07:49,566 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(743)) - s0@group-2286EECED0FF: receive requestVote(s1, group-2286EECED0FF, 1, (t:0, i:0))
2019-09-24 12:07:49,568 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - s2: shutdown FollowerState
2019-09-24 12:07:49,568 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(743)) - s1@group-2286EECED0FF: receive requestVote(s0, group-2286EECED0FF, 1, (t:0, i:0))
2019-09-24 12:07:49,568 INFO  impl.FollowerState (FollowerState.java:run(117)) - s2@group-2286EECED0FF-FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-09-24 12:07:49,569 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(775)) - s1@group-2286EECED0FF replies to vote request: s0<-s1#0:FAIL-t1. Peer's state: s1@group-2286EECED0FF:t1, leader=null, voted=s1, raftlog=s1@group-2286EECED0FF-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:43358, s1:0.0.0.0:37249, s2:0.0.0.0:46545], old=null
2019-09-24 12:07:49,568 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s2: start FollowerState
2019-09-24 12:07:49,568 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(775)) - s0@group-2286EECED0FF replies to vote request: s1<-s0#0:FAIL-t1. Peer's state: s0@group-2286EECED0FF:t1, leader=null, voted=s0, raftlog=s0@group-2286EECED0FF-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:43358, s1:0.0.0.0:37249, s2:0.0.0.0:46545], old=null
2019-09-24 12:07:49,584 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(775)) - s2@group-2286EECED0FF replies to vote request: s1<-s2#0:OK-t1. Peer's state: s2@group-2286EECED0FF:t1, leader=null, voted=s1, raftlog=s2@group-2286EECED0FF-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:43358, s1:0.0.0.0:37249, s2:0.0.0.0:46545], old=null
2019-09-24 12:07:49,584 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(775)) - s2@group-2286EECED0FF replies to vote request: s0<-s2#0:FAIL-t1. Peer's state: s2@group-2286EECED0FF:t1, leader=null, voted=s1, raftlog=s2@group-2286EECED0FF-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:43358, s1:0.0.0.0:37249, s2:0.0.0.0:46545], old=null
2019-09-24 12:07:49,588 INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(56)) - s1@group-2286EECED0FF-LeaderElection6: Election PASSED; received 2 response(s) [s1<-s0#0:FAIL-t1, s1<-s2#0:OK-t1] and 0 exception(s); s1@group-2286EECED0FF:t1, leader=null, voted=s1, raftlog=s1@group-2286EECED0FF-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:43358, s1:0.0.0.0:37249, s2:0.0.0.0:46545], old=null
2019-09-24 12:07:49,589 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - s1: shutdown LeaderElection
2019-09-24 12:07:49,590 INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(56)) - s0@group-2286EECED0FF-LeaderElection5: Election REJECTED; received 2 response(s) [s0<-s1#0:FAIL-t1, s0<-s2#0:FAIL-t1] and 0 exception(s); s0@group-2286EECED0FF:t1, leader=null, voted=s0, raftlog=s0@group-2286EECED0FF-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:43358, s1:0.0.0.0:37249, s2:0.0.0.0:46545], old=null
2019-09-24 12:07:49,590 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s1@group-2286EECED0FF: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-09-24 12:07:49,590 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s0@group-2286EECED0FF: changes role from CANDIDATE to FOLLOWER at term 1 for DISCOVERED_A_NEW_TERM
2019-09-24 12:07:49,591 INFO  impl.RaftServerImpl (ServerState.java:setLeader(254)) - s1@group-2286EECED0FF: change Leader from null to s1 at term 1 for becomeLeader, leader elected after 270ms
2019-09-24 12:07:49,591 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - s0: shutdown LeaderElection
2019-09-24 12:07:49,591 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-09-24 12:07:49,592 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s0: start FollowerState
2019-09-24 12:07:49,592 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-09-24 12:07:49,592 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.write.element-limit = 4096 (default)
2019-09-24 12:07:49,593 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-09-24 12:07:49,593 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-09-24 12:07:49,593 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.element-limit = 65536 (default)
2019-09-24 12:07:49,597 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2019-09-24 12:07:49,597 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-24 12:07:49,597 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2019-09-24 12:07:49,598 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2019-09-24 12:07:49,598 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-09-24 12:07:49,598 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-09-24 12:07:49,599 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2019-09-24 12:07:49,599 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-24 12:07:49,599 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2019-09-24 12:07:49,600 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2019-09-24 12:07:49,600 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-09-24 12:07:49,600 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-09-24 12:07:49,601 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s1: start LeaderState
2019-09-24 12:07:49,601 DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(425)) - truncateIndex=-1, arrayIndex=0
2019-09-24 12:07:49,601 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(380)) - s1@group-2286EECED0FF-SegmentedRaftLogWorker: Starting segment from index:0
2019-09-24 12:07:49,602 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(355)) - s1@group-2286EECED0FF: set configuration 0: [s0:0.0.0.0:43358, s1:0.0.0.0:37249, s2:0.0.0.0:46545], old=null at 0
2019-09-24 12:07:49,607 INFO  impl.RaftServerImpl (ServerState.java:setLeader(254)) - s2@group-2286EECED0FF: change Leader from null to s1 at term 1 for appendEntries, leader elected after 286ms
2019-09-24 12:07:49,607 INFO  impl.RaftServerImpl (ServerState.java:setLeader(254)) - s0@group-2286EECED0FF: change Leader from null to s1 at term 1 for appendEntries, leader elected after 285ms
2019-09-24 12:07:49,614 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s2@group-2286EECED0FF: receive appendEntries(s1, 1, null, -1, false, commits[s1:c-1, s0:c-1, s2:c-1], entries: (t:1, i:0), CONFIGURATIONENTRY
2019-09-24 12:07:49,614 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s0@group-2286EECED0FF: receive appendEntries(s1, 1, null, -1, false, commits[s1:c-1, s0:c-1, s2:c-1], entries: (t:1, i:0), CONFIGURATIONENTRY
2019-09-24 12:07:49,615 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(355)) - s2@group-2286EECED0FF: set configuration 0: [s0:0.0.0.0:43358, s1:0.0.0.0:37249, s2:0.0.0.0:46545], old=null at 0
2019-09-24 12:07:49,615 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(355)) - s0@group-2286EECED0FF: set configuration 0: [s0:0.0.0.0:43358, s1:0.0.0.0:37249, s2:0.0.0.0:46545], old=null at 0
2019-09-24 12:07:49,615 DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(425)) - truncateIndex=-1, arrayIndex=0
2019-09-24 12:07:49,615 DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(425)) - truncateIndex=-1, arrayIndex=0
2019-09-24 12:07:49,615 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(380)) - s2@group-2286EECED0FF-SegmentedRaftLogWorker: Starting segment from index:0
2019-09-24 12:07:49,616 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(380)) - s0@group-2286EECED0FF-SegmentedRaftLogWorker: Starting segment from index:0
2019-09-24 12:07:49,743 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(569)) - s0@group-2286EECED0FF-SegmentedRaftLogWorker: created new log segment /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfe4f6f01/s0/8a8635cc-4537-44ab-bff8-2286eeced0ff/current/log_inprogress_0
2019-09-24 12:07:49,743 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(569)) - s2@group-2286EECED0FF-SegmentedRaftLogWorker: created new log segment /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfe4f6f01/s2/8a8635cc-4537-44ab-bff8-2286eeced0ff/current/log_inprogress_0
2019-09-24 12:07:49,743 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(569)) - s1@group-2286EECED0FF-SegmentedRaftLogWorker: created new log segment /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfe4f6f01/s1/8a8635cc-4537-44ab-bff8-2286eeced0ff/current/log_inprogress_0
2019-09-24 12:07:49,756 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s0@group-2286EECED0FF: succeeded to handle AppendEntries. Reply: s1<-s0#1:OK,SUCCESS,nextIndex:1,term:1,followerCommit:-1
2019-09-24 12:07:49,756 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s2@group-2286EECED0FF: succeeded to handle AppendEntries. Reply: s1<-s2#1:OK,SUCCESS,nextIndex:1,term:1,followerCommit:-1
2019-09-24 12:07:49,822 INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(101)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-2286EECED0FF:t1, leader=s1, voted=s0, raftlog=s0@group-2286EECED0FF-SegmentedRaftLog:OPENED:c-1,f0,i0, conf=0: [s0:0.0.0.0:43358, s1:0.0.0.0:37249, s2:0.0.0.0:46545], old=null RUNNING
  s1:  RUNNING    LEADER s1@group-2286EECED0FF:t1, leader=s1, voted=s1, raftlog=s1@group-2286EECED0FF-SegmentedRaftLog:OPENED:c0,f0,i0, conf=0: [s0:0.0.0.0:43358, s1:0.0.0.0:37249, s2:0.0.0.0:46545], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-2286EECED0FF:t1, leader=s1, voted=s1, raftlog=s2@group-2286EECED0FF-SegmentedRaftLog:OPENED:c-1,f0,i0, conf=0: [s0:0.0.0.0:43358, s1:0.0.0.0:37249, s2:0.0.0.0:46545], old=null RUNNING
2019-09-24 12:07:49,822 DEBUG client.RaftClient (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-09-24 12:07:49,823 DEBUG client.RaftClient (RaftClientImpl.java:sendRequest(275)) - client-09FDB68C80E1: send RaftClientRequest:client-09FDB68C80E1->s1@group-2286EECED0FF, cid=1, seq=0, RW, m
2019-09-24 12:07:49,836 DEBUG impl.RaftServerImpl (RaftServerImpl.java:submitClientRequestAsync(533)) - s1@group-2286EECED0FF: receive client request(RaftClientRequest:client-09FDB68C80E1->s1@group-2286EECED0FF, cid=1, seq=0, RW, Message:6d)
2019-09-24 12:07:49,838 DEBUG impl.RaftServerImpl (LeaderState.java:addPendingRequest(317)) - s1@group-2286EECED0FF-LeaderState: addPendingRequest at RaftClientRequest:client-09FDB68C80E1->s1@group-2286EECED0FF, cid=1, seq=0, RW, Message:6d, entry=(t:1, i:1), STATEMACHINELOGENTRY, client-09FDB68C80E1, cid=1
2019-09-24 12:07:49,843 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s2@group-2286EECED0FF: receive appendEntries(s1, 1, (t:1, i:0), 0, false, commits[s1:c0, s0:c-1, s2:c-1], entries: (t:1, i:1), STATEMACHINELOGENTRY, client-09FDB68C80E1, cid=1
2019-09-24 12:07:49,843 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s0@group-2286EECED0FF: receive appendEntries(s1, 1, (t:1, i:0), 0, false, commits[s1:c0, s0:c-1, s2:c-1], entries: (t:1, i:1), STATEMACHINELOGENTRY, client-09FDB68C80E1, cid=1
2019-09-24 12:07:49,844 DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(425)) - truncateIndex=-1, arrayIndex=0
2019-09-24 12:07:49,844 DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(425)) - truncateIndex=-1, arrayIndex=0
2019-09-24 12:07:49,849 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s2@group-2286EECED0FF: succeeded to handle AppendEntries. Reply: s1<-s2#4:OK,SUCCESS,nextIndex:2,term:1,followerCommit:0
2019-09-24 12:07:49,849 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s0@group-2286EECED0FF: succeeded to handle AppendEntries. Reply: s1<-s0#4:OK,SUCCESS,nextIndex:2,term:1,followerCommit:0
2019-09-24 12:07:49,853 INFO  client.GrpcClientProtocolService (GrpcClientProtocolService.java:lambda$processClientRequest$0(278)) - Failed RaftClientRequest:client-09FDB68C80E1->s1@group-2286EECED0FF, cid=1, seq=0, RW, Message:6d, reply=RaftClientReply:client-09FDB68C80E1->s1@group-2286EECED0FF, cid=1, FAILED org.apache.ratis.protocol.StateMachineException: org.apache.ratis.protocol.StateMachineException from Server s1@group-2286EECED0FF: Fake Exception, logIndex=1, commits[s1:c1, s0:c0, s2:c0]
2019-09-24 12:07:49,855 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s0@group-2286EECED0FF: receive appendEntries(s1, 1, (t:1, i:1), 1, false, commits[s1:c1, s0:c0, s2:c0], entries: (t:1, i:2), METADATAENTRY(c1)
2019-09-24 12:07:49,855 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s2@group-2286EECED0FF: receive appendEntries(s1, 1, (t:1, i:1), 1, false, commits[s1:c1, s0:c0, s2:c0], entries: (t:1, i:2), METADATAENTRY(c1)
2019-09-24 12:07:49,856 DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(425)) - truncateIndex=-1, arrayIndex=0
2019-09-24 12:07:49,856 DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(425)) - truncateIndex=-1, arrayIndex=0
2019-09-24 12:07:49,859 DEBUG client.RaftClient (RaftClientImpl.java:sendRequest(285)) - client-09FDB68C80E1: receive RaftClientReply:client-09FDB68C80E1->s1@group-2286EECED0FF, cid=1, FAILED org.apache.ratis.protocol.StateMachineException: org.apache.ratis.protocol.StateMachineException from Server s1@group-2286EECED0FF: Fake Exception, logIndex=1, commits[s1:c1, s0:c0, s2:c0]
org.apache.ratis.protocol.StateMachineException: org.apache.ratis.protocol.StateMachineException from Server s1@group-2286EECED0FF: Fake Exception
	at org.apache.ratis.server.impl.RaftStateMachineExceptionTests$StateMachineWithException.applyTransaction(RaftStateMachineExceptionTests.java:59)
	at org.apache.ratis.server.impl.RaftServerImpl.applyLogToStateMachine(RaftServerImpl.java:1274)
	at org.apache.ratis.server.impl.StateMachineUpdater.applyLog(StateMachineUpdater.java:224)
	at org.apache.ratis.server.impl.StateMachineUpdater.run(StateMachineUpdater.java:165)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.apache.ratis.protocol.StateMachineException: Fake Exception
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at org.apache.ratis.util.ReflectionUtils.instantiateException(ReflectionUtils.java:222)
	at org.apache.ratis.client.impl.ClientProtoUtils.wrapStateMachineException(ClientProtoUtils.java:296)
	at org.apache.ratis.client.impl.ClientProtoUtils.toRaftClientReply(ClientProtoUtils.java:249)
	at java.util.concurrent.CompletableFuture.uniApply(CompletableFuture.java:602)
	at java.util.concurrent.CompletableFuture$UniApply.tryFire(CompletableFuture.java:577)
	at java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:474)
	at java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:1962)
	at org.apache.ratis.grpc.client.GrpcClientRpc$1.onNext(GrpcClientRpc.java:134)
	at org.apache.ratis.grpc.client.GrpcClientRpc$1.onNext(GrpcClientRpc.java:131)
	at org.apache.ratis.thirdparty.io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onMessage(ClientCalls.java:421)
	at org.apache.ratis.thirdparty.io.grpc.ForwardingClientCallListener.onMessage(ForwardingClientCallListener.java:33)
	at org.apache.ratis.thirdparty.io.grpc.ForwardingClientCallListener.onMessage(ForwardingClientCallListener.java:33)
	at org.apache.ratis.thirdparty.io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1MessagesAvailable.runInContext(ClientCallImpl.java:519)
	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:123)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	... 1 more
2019-09-24 12:07:49,863 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(700)) - ************************************************************** 
2019-09-24 12:07:49,864 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(701)) - *** 
2019-09-24 12:07:49,864 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(702)) - ***     Stopping MiniRaftClusterWithGrpc
2019-09-24 12:07:49,864 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(703)) - *** 
2019-09-24 12:07:49,864 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(704)) - ************************************************************** 
2019-09-24 12:07:49,864 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s2@group-2286EECED0FF: succeeded to handle AppendEntries. Reply: s1<-s2#5:OK,SUCCESS,nextIndex:3,term:1,followerCommit:1
2019-09-24 12:07:49,864 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s0@group-2286EECED0FF: succeeded to handle AppendEntries. Reply: s1<-s0#5:OK,SUCCESS,nextIndex:3,term:1,followerCommit:1
2019-09-24 12:07:49,865 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(705)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-2286EECED0FF:t1, leader=s1, voted=s0, raftlog=s0@group-2286EECED0FF-SegmentedRaftLog:OPENED:c1,f2,i2, conf=0: [s0:0.0.0.0:43358, s1:0.0.0.0:37249, s2:0.0.0.0:46545], old=null RUNNING
  s1:  RUNNING    LEADER s1@group-2286EECED0FF:t1, leader=s1, voted=s1, raftlog=s1@group-2286EECED0FF-SegmentedRaftLog:OPENED:c1,f2,i2, conf=0: [s0:0.0.0.0:43358, s1:0.0.0.0:37249, s2:0.0.0.0:46545], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-2286EECED0FF:t1, leader=s1, voted=s1, raftlog=s2@group-2286EECED0FF-SegmentedRaftLog:OPENED:c1,f2,i2, conf=0: [s0:0.0.0.0:43358, s1:0.0.0.0:37249, s2:0.0.0.0:46545], old=null RUNNING
2019-09-24 12:07:49,867 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - s0: close
2019-09-24 12:07:49,868 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - s1: close
2019-09-24 12:07:49,869 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - s2: close
2019-09-24 12:07:49,870 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(247)) - s1@group-2286EECED0FF: shutdown
2019-09-24 12:07:49,869 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(247)) - s0@group-2286EECED0FF: shutdown
2019-09-24 12:07:49,870 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-2286EECED0FF,id=s1
2019-09-24 12:07:49,870 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(247)) - s2@group-2286EECED0FF: shutdown
2019-09-24 12:07:49,871 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - s1: shutdown LeaderState
2019-09-24 12:07:49,871 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-2286EECED0FF,id=s0
2019-09-24 12:07:49,872 WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(143)) - s1@group-2286EECED0FF->s0-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2019-09-24 12:07:49,871 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-2286EECED0FF,id=s2
2019-09-24 12:07:49,873 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - s2: shutdown FollowerState
2019-09-24 12:07:49,872 WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(143)) - s1@group-2286EECED0FF->s2-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2019-09-24 12:07:49,872 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - s0: shutdown FollowerState
2019-09-24 12:07:49,872 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(202)) - s1@group-2286EECED0FF-PendingRequests: sendNotLeaderResponses
2019-09-24 12:07:49,874 INFO  impl.FollowerState (FollowerState.java:run(117)) - s0@group-2286EECED0FF-FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-09-24 12:07:49,874 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(136)) - s0@group-2286EECED0FF-StateMachineUpdater: set stopIndex = 1
2019-09-24 12:07:49,874 INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(113)) - s0: Completed APPEND_ENTRIES, lastRequest: s1->s0#5-t1, previous=(t:1, i:1), leaderCommit=1, initializing? false, entries: size=1, first=(t:1, i:2), METADATAENTRY(c1)
2019-09-24 12:07:49,873 INFO  impl.FollowerState (FollowerState.java:run(117)) - s2@group-2286EECED0FF-FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-09-24 12:07:49,873 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(136)) - s2@group-2286EECED0FF-StateMachineUpdater: set stopIndex = 1
2019-09-24 12:07:49,877 INFO  impl.RaftServerImpl (ServerState.java:close(386)) - s2@group-2286EECED0FF: closes. applyIndex: 1
2019-09-24 12:07:49,876 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(136)) - s1@group-2286EECED0FF-StateMachineUpdater: set stopIndex = 2
2019-09-24 12:07:49,879 INFO  impl.RaftServerImpl (ServerState.java:close(386)) - s1@group-2286EECED0FF: closes. applyIndex: 2
2019-09-24 12:07:49,876 INFO  impl.RaftServerImpl (ServerState.java:close(386)) - s0@group-2286EECED0FF: closes. applyIndex: 1
2019-09-24 12:07:49,876 INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(113)) - s2: Completed APPEND_ENTRIES, lastRequest: s1->s2#5-t1, previous=(t:1, i:1), leaderCommit=1, initializing? false, entries: size=1, first=(t:1, i:2), METADATAENTRY(c1)
2019-09-24 12:07:49,880 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(313)) - s0@group-2286EECED0FF-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-09-24 12:07:49,879 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(313)) - s1@group-2286EECED0FF-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-09-24 12:07:49,879 INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(293)) - s1@group-2286EECED0FF->s0-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2019-09-24 12:07:49,878 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(313)) - s2@group-2286EECED0FF-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-09-24 12:07:49,883 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(228)) - s0@group-2286EECED0FF-SegmentedRaftLogWorker close()
2019-09-24 12:07:49,884 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(228)) - s1@group-2286EECED0FF-SegmentedRaftLogWorker close()
2019-09-24 12:07:49,885 INFO  server.GrpcService (GrpcService.java:closeImpl(164)) - s0: shutdown server with port 43358 now
2019-09-24 12:07:49,886 INFO  impl.FollowerInfo (FollowerInfo.java:lambda$new$0(51)) - s1@group-2286EECED0FF->s0: nextIndex: updateUnconditionally 3 -> 2
2019-09-24 12:07:49,887 INFO  server.GrpcService (GrpcService.java:closeImpl(164)) - s1: shutdown server with port 37249 now
2019-09-24 12:07:49,884 INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(293)) - s1@group-2286EECED0FF->s2-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2019-09-24 12:07:49,886 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(228)) - s2@group-2286EECED0FF-SegmentedRaftLogWorker close()
2019-09-24 12:07:49,890 INFO  server.GrpcService (GrpcService.java:closeImpl(172)) - s1: shutdown server with port 37249 successfully
2019-09-24 12:07:49,890 INFO  impl.FollowerInfo (FollowerInfo.java:lambda$new$0(51)) - s1@group-2286EECED0FF->s2: nextIndex: updateUnconditionally 3 -> 2
2019-09-24 12:07:49,890 INFO  server.GrpcService (GrpcService.java:closeImpl(164)) - s2: shutdown server with port 46545 now
2019-09-24 12:07:49,891 INFO  server.GrpcService (GrpcService.java:closeImpl(172)) - s0: shutdown server with port 43358 successfully
2019-09-24 12:07:49,891 INFO  server.GrpcService (GrpcService.java:closeImpl(172)) - s2: shutdown server with port 46545 successfully
2019-09-24 12:07:49,892 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(722)) - MiniRaftClusterWithGrpc shutdown completed
2019-09-24 12:07:49,892 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(700)) - ************************************************************** 
2019-09-24 12:07:49,893 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(701)) - *** 
2019-09-24 12:07:49,893 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(702)) - ***     Stopping MiniRaftClusterWithGrpc
2019-09-24 12:07:49,893 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(703)) - *** 
2019-09-24 12:07:49,893 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(704)) - ************************************************************** 
2019-09-24 12:07:49,893 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(705)) - printing ALL groups
  s0:   CLOSED  FOLLOWER s0@group-2286EECED0FF:t1, leader=s1, voted=s0, raftlog=s0@group-2286EECED0FF-SegmentedRaftLog:CLOSED:c1, conf=0: [s0:0.0.0.0:43358, s1:0.0.0.0:37249, s2:0.0.0.0:46545], old=null CLOSED
  s1:   CLOSED    LEADER s1@group-2286EECED0FF:t1, leader=s1, voted=s1, raftlog=s1@group-2286EECED0FF-SegmentedRaftLog:CLOSED:c2, conf=0: [s0:0.0.0.0:43358, s1:0.0.0.0:37249, s2:0.0.0.0:46545], old=null CLOSED
  s2:   CLOSED  FOLLOWER s2@group-2286EECED0FF:t1, leader=s1, voted=s1, raftlog=s2@group-2286EECED0FF-SegmentedRaftLog:CLOSED:c1, conf=0: [s0:0.0.0.0:43358, s1:0.0.0.0:37249, s2:0.0.0.0:46545], old=null CLOSED
2019-09-24 12:07:49,895 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(722)) - MiniRaftClusterWithGrpc shutdown completed
2019-09-24 12:07:49,897 INFO  util.LogUtils (LogUtils.java:setLogLevel(41)) - Set org.apache.ratis.conf.ConfUtils log level to WARN
2019-09-24 12:07:49,897 INFO  util.LogUtils (LogUtils.java:setLogLevel(41)) - Set org.apache.ratis.util.FileUtils log level to TRACE
2019-09-24 12:07:49,897 INFO  util.LogUtils (LogUtils.java:setLogLevel(41)) - Set org.apache.ratis.server.impl.RaftServerImpl log level to DEBUG
2019-09-24 12:07:49,897 INFO  util.LogUtils (LogUtils.java:setLogLevel(41)) - Set org.apache.ratis.server.raftlog.RaftLog log level to DEBUG
2019-09-24 12:07:49,898 INFO  util.LogUtils (LogUtils.java:setLogLevel(41)) - Set org.apache.ratis.client.RaftClient log level to DEBUG
2019-09-24 12:07:49,899 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:runWithNewCluster(119)) - Running runWithNewCluster
2019-09-24 12:07:49,900 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:<init>(253)) - new MiniRaftClusterWithGrpc with group-93DF23ABB718:[s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661]
2019-09-24 12:07:49,900 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:start(287)) - .............................................................. 
2019-09-24 12:07:49,900 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:start(288)) - ... 
2019-09-24 12:07:49,901 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:start(289)) - ...     Starting MiniRaftClusterWithGrpc
2019-09-24 12:07:49,901 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:start(290)) - ... 
2019-09-24 12:07:49,901 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:start(291)) - .............................................................. 
2019-09-24 12:07:49,901 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:initServers(265)) - servers = {}
2019-09-24 12:07:49,901 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(330)) - newRaftServer: s0, group-93DF23ABB718:[s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], format? true
2019-09-24 12:07:49,902 TRACE util.FileUtils (FileUtils.java:deleteFully(88)) - deleteFully target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s0
2019-09-24 12:07:49,902 TRACE util.FileUtils (FileUtils.java:deleteFully(104)) - deleteFully: target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s0 does not exist.
2019-09-24 12:07:49,903 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(335)) - Formatted directory target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s0
2019-09-24 12:07:49,903 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-09-24 12:07:49,904 INFO  grpc.GrpcFactory (GrpcFactory.java:checkPooledByteBufAllocatorUseCacheForAllThreads(45)) - PERFORMANCE WARNING: useCacheForAllThreads is true that may cause Netty to create a lot garbage objects and, as a result, trigger GC.
	It is recommended to disable useCacheForAllThreads by setting -Dorg.apache.ratis.thirdparty.io.netty.allocator.useCacheForAllThreads=false in command line.
2019-09-24 12:07:49,904 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 37370 (custom)
2019-09-24 12:07:49,904 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2019-09-24 12:07:49,905 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-24 12:07:49,905 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-09-24 12:07:49,905 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-09-24 12:07:49,906 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s0] (custom)
2019-09-24 12:07:49,908 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - s0: addNew group-93DF23ABB718:[s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661] returns group-93DF23ABB718:java.util.concurrent.CompletableFuture@56b58761[Not completed]
2019-09-24 12:07:49,908 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(330)) - newRaftServer: s1, group-93DF23ABB718:[s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], format? true
2019-09-24 12:07:49,908 TRACE util.FileUtils (FileUtils.java:deleteFully(88)) - deleteFully target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s1
2019-09-24 12:07:49,909 TRACE util.FileUtils (FileUtils.java:deleteFully(104)) - deleteFully: target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s1 does not exist.
2019-09-24 12:07:49,909 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(335)) - Formatted directory target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s1
2019-09-24 12:07:49,909 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-09-24 12:07:49,910 INFO  grpc.GrpcFactory (GrpcFactory.java:checkPooledByteBufAllocatorUseCacheForAllThreads(45)) - PERFORMANCE WARNING: useCacheForAllThreads is true that may cause Netty to create a lot garbage objects and, as a result, trigger GC.
	It is recommended to disable useCacheForAllThreads by setting -Dorg.apache.ratis.thirdparty.io.netty.allocator.useCacheForAllThreads=false in command line.
2019-09-24 12:07:49,910 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-24 12:07:49,911 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2019-09-24 12:07:49,911 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2019-09-24 12:07:49,911 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(95)) - s0: new RaftServerImpl for group-93DF23ABB718:[s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661] with StateMachineWithException:uninitialized
2019-09-24 12:07:49,912 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 150ms (default)
2019-09-24 12:07:49,910 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 37937 (custom)
2019-09-24 12:07:49,913 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2019-09-24 12:07:49,913 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-24 12:07:49,913 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-09-24 12:07:49,914 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-09-24 12:07:49,912 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 300ms (default)
2019-09-24 12:07:49,914 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 60s (default)
2019-09-24 12:07:49,915 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.sleep.deviation.threshold = 300 (default)
2019-09-24 12:07:49,915 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-09-24 12:07:49,915 INFO  impl.RaftServerImpl (ServerState.java:<init>(103)) - s0@group-93DF23ABB718: ConfigurationManager, init=-1: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null, confs=<EMPTY_MAP>
2019-09-24 12:07:49,916 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s0] (custom)
2019-09-24 12:07:49,916 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.corruption.policy = EXCEPTION (default)
2019-09-24 12:07:49,917 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s0/9f556200-3bc1-45de-bb71-93df23abb718 does not exist. Creating ...
2019-09-24 12:07:49,915 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s1] (custom)
2019-09-24 12:07:49,918 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s0/9f556200-3bc1-45de-bb71-93df23abb718
2019-09-24 12:07:49,918 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - s1: addNew group-93DF23ABB718:[s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661] returns group-93DF23ABB718:java.util.concurrent.CompletableFuture@506631cc[Not completed]
2019-09-24 12:07:49,918 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(330)) - newRaftServer: s2, group-93DF23ABB718:[s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], format? true
2019-09-24 12:07:49,919 TRACE util.FileUtils (FileUtils.java:deleteFully(88)) - deleteFully target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s2
2019-09-24 12:07:49,919 TRACE util.FileUtils (FileUtils.java:deleteFully(104)) - deleteFully: target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s2 does not exist.
2019-09-24 12:07:49,920 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:newRaftServer(335)) - Formatted directory target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s2
2019-09-24 12:07:49,920 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-24 12:07:49,921 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2019-09-24 12:07:49,921 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2019-09-24 12:07:49,921 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(95)) - s1: new RaftServerImpl for group-93DF23ABB718:[s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661] with StateMachineWithException:uninitialized
2019-09-24 12:07:49,920 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-09-24 12:07:49,922 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 150ms (default)
2019-09-24 12:07:49,922 INFO  grpc.GrpcFactory (GrpcFactory.java:checkPooledByteBufAllocatorUseCacheForAllThreads(45)) - PERFORMANCE WARNING: useCacheForAllThreads is true that may cause Netty to create a lot garbage objects and, as a result, trigger GC.
	It is recommended to disable useCacheForAllThreads by setting -Dorg.apache.ratis.thirdparty.io.netty.allocator.useCacheForAllThreads=false in command line.
2019-09-24 12:07:49,922 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 300ms (default)
2019-09-24 12:07:49,923 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 45661 (custom)
2019-09-24 12:07:49,923 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 60s (default)
2019-09-24 12:07:49,923 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 64MB (=67108864) (default)
2019-09-24 12:07:49,923 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.sleep.deviation.threshold = 300 (default)
2019-09-24 12:07:49,923 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-24 12:07:49,923 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-09-24 12:07:49,924 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-09-24 12:07:49,924 INFO  impl.RaftServerImpl (ServerState.java:<init>(103)) - s1@group-93DF23ABB718: ConfigurationManager, init=-1: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null, confs=<EMPTY_MAP>
2019-09-24 12:07:49,924 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-09-24 12:07:49,924 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s1] (custom)
2019-09-24 12:07:49,925 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.corruption.policy = EXCEPTION (default)
2019-09-24 12:07:49,925 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s1/9f556200-3bc1-45de-bb71-93df23abb718 does not exist. Creating ...
2019-09-24 12:07:49,925 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s2] (custom)
2019-09-24 12:07:49,925 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s1/9f556200-3bc1-45de-bb71-93df23abb718
2019-09-24 12:07:49,926 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - s2: addNew group-93DF23ABB718:[s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661] returns group-93DF23ABB718:java.util.concurrent.CompletableFuture@35212222[Not completed]
2019-09-24 12:07:49,926 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-24 12:07:49,926 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2019-09-24 12:07:49,926 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2019-09-24 12:07:49,926 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(95)) - s2: new RaftServerImpl for group-93DF23ABB718:[s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661] with StateMachineWithException:uninitialized
2019-09-24 12:07:49,927 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 150ms (default)
2019-09-24 12:07:49,927 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 300ms (default)
2019-09-24 12:07:49,927 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 60s (default)
2019-09-24 12:07:49,927 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.sleep.deviation.threshold = 300 (default)
2019-09-24 12:07:49,927 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-09-24 12:07:49,927 INFO  impl.RaftServerImpl (ServerState.java:<init>(103)) - s2@group-93DF23ABB718: ConfigurationManager, init=-1: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null, confs=<EMPTY_MAP>
2019-09-24 12:07:49,927 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s2] (custom)
2019-09-24 12:07:49,928 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.corruption.policy = EXCEPTION (default)
2019-09-24 12:07:49,928 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s2/9f556200-3bc1-45de-bb71-93df23abb718 does not exist. Creating ...
2019-09-24 12:07:49,928 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s2/9f556200-3bc1-45de-bb71-93df23abb718
2019-09-24 12:07:49,944 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s0/9f556200-3bc1-45de-bb71-93df23abb718/in_use.lock acquired by nodename 19836@ratis-test-nppbd-817190658
2019-09-24 12:07:49,944 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s1/9f556200-3bc1-45de-bb71-93df23abb718/in_use.lock acquired by nodename 19836@ratis-test-nppbd-817190658
2019-09-24 12:07:49,944 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s2/9f556200-3bc1-45de-bb71-93df23abb718/in_use.lock acquired by nodename 19836@ratis-test-nppbd-817190658
2019-09-24 12:07:49,944 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s0/9f556200-3bc1-45de-bb71-93df23abb718/current
2019-09-24 12:07:49,944 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s2/9f556200-3bc1-45de-bb71-93df23abb718/current
2019-09-24 12:07:49,944 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s1/9f556200-3bc1-45de-bb71-93df23abb718/current
2019-09-24 12:07:49,944 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s2/9f556200-3bc1-45de-bb71-93df23abb718/sm
2019-09-24 12:07:49,944 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s0/9f556200-3bc1-45de-bb71-93df23abb718/sm
2019-09-24 12:07:49,945 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.createDirectories /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s1/9f556200-3bc1-45de-bb71-93df23abb718/sm
2019-09-24 12:07:49,961 INFO  storage.RaftStorage (RaftStorage.java:format(84)) - Storage directory /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s2/9f556200-3bc1-45de-bb71-93df23abb718 has been successfully formatted.
2019-09-24 12:07:49,961 INFO  storage.RaftStorage (RaftStorage.java:format(84)) - Storage directory /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s1/9f556200-3bc1-45de-bb71-93df23abb718 has been successfully formatted.
2019-09-24 12:07:49,961 INFO  storage.RaftStorage (RaftStorage.java:format(84)) - Storage directory /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s0/9f556200-3bc1-45de-bb71-93df23abb718 has been successfully formatted.
2019-09-24 12:07:49,961 INFO  statemachine.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(206)) - Initializing StateMachineWithException:uninitialized
2019-09-24 12:07:49,961 INFO  statemachine.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(206)) - Initializing StateMachineWithException:uninitialized
2019-09-24 12:07:49,962 INFO  statemachine.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:initialize(206)) - Initializing StateMachineWithException:uninitialized
2019-09-24 12:07:49,962 INFO  statemachine.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(296)) - The snapshot file null does not exist
2019-09-24 12:07:49,962 INFO  statemachine.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(296)) - The snapshot file null does not exist
2019-09-24 12:07:49,962 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.notification.no-leader.timeout = 60s (default)
2019-09-24 12:07:49,962 INFO  statemachine.SimpleStateMachine4Testing (SimpleStateMachine4Testing.java:loadSnapshot(296)) - The snapshot file null does not exist
2019-09-24 12:07:49,962 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-09-24 12:07:49,962 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.notification.no-leader.timeout = 60s (default)
2019-09-24 12:07:49,963 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.purge.gap = 1024 (default)
2019-09-24 12:07:49,963 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.notification.no-leader.timeout = 60s (default)
2019-09-24 12:07:49,963 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-24 12:07:49,963 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-09-24 12:07:49,963 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-24 12:07:49,963 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-09-24 12:07:49,963 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 6 (default)
2019-09-24 12:07:49,963 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.purge.gap = 1024 (default)
2019-09-24 12:07:49,964 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(172)) - new s2@group-93DF23ABB718-SegmentedRaftLogWorker for RaftStorage:Storage Directory /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s2/9f556200-3bc1-45de-bb71-93df23abb718
2019-09-24 12:07:49,964 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.purge.gap = 1024 (default)
2019-09-24 12:07:49,964 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2019-09-24 12:07:49,964 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-24 12:07:49,964 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 4096 (default)
2019-09-24 12:07:49,964 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-24 12:07:49,965 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-24 12:07:49,965 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2019-09-24 12:07:49,964 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-24 12:07:49,965 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2019-09-24 12:07:49,965 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-24 12:07:49,965 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-09-24 12:07:49,965 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-09-24 12:07:49,965 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 6 (default)
2019-09-24 12:07:49,965 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-09-24 12:07:49,965 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 6 (default)
2019-09-24 12:07:49,966 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-09-24 12:07:49,966 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(172)) - new s1@group-93DF23ABB718-SegmentedRaftLogWorker for RaftStorage:Storage Directory /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s1/9f556200-3bc1-45de-bb71-93df23abb718
2019-09-24 12:07:49,966 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2019-09-24 12:07:49,966 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(172)) - new s0@group-93DF23ABB718-SegmentedRaftLogWorker for RaftStorage:Storage Directory /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s0/9f556200-3bc1-45de-bb71-93df23abb718
2019-09-24 12:07:49,966 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2019-09-24 12:07:49,966 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(132)) - s2@group-93DF23ABB718-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2019-09-24 12:07:49,966 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2019-09-24 12:07:49,967 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 4096 (default)
2019-09-24 12:07:49,967 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2019-09-24 12:07:49,967 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-24 12:07:49,967 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 4096 (default)
2019-09-24 12:07:49,967 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2019-09-24 12:07:49,967 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.retention.file.num = -1 (default)
2019-09-24 12:07:49,967 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2019-09-24 12:07:49,967 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 8MB (=8388608) (default)
2019-09-24 12:07:49,968 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-09-24 12:07:49,968 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 60s (default)
2019-09-24 12:07:49,968 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-09-24 12:07:49,968 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 4MB (=4194304) (default)
2019-09-24 12:07:49,968 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-09-24 12:07:49,968 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2019-09-24 12:07:49,968 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-09-24 12:07:49,969 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-09-24 12:07:49,969 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2019-09-24 12:07:49,969 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-09-24 12:07:49,969 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-09-24 12:07:49,969 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(132)) - s1@group-93DF23ABB718-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2019-09-24 12:07:49,969 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-09-24 12:07:49,969 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2019-09-24 12:07:49,970 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2019-09-24 12:07:49,970 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.retention.file.num = -1 (default)
2019-09-24 12:07:49,970 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(132)) - s0@group-93DF23ABB718-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2019-09-24 12:07:49,970 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 60s (default)
2019-09-24 12:07:49,970 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = false (default)
2019-09-24 12:07:49,970 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.retention.file.num = -1 (default)
2019-09-24 12:07:49,971 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 60s (default)
2019-09-24 12:07:49,974 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(181)) - s0@group-93DF23ABB718: start as a follower, conf=-1: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null
2019-09-24 12:07:49,974 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s0@group-93DF23ABB718: changes role from      null to FOLLOWER at term 0 for startAsFollower
2019-09-24 12:07:49,975 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s0: start FollowerState
2019-09-24 12:07:49,976 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-93DF23ABB718,id=s0
2019-09-24 12:07:49,981 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - s0: start RPC server
2019-09-24 12:07:49,982 INFO  server.GrpcService (GrpcService.java:startImpl(158)) - s0: GrpcService started, listening on 0.0.0.0/0.0.0.0:37370
2019-09-24 12:07:49,983 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(181)) - s1@group-93DF23ABB718: start as a follower, conf=-1: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null
2019-09-24 12:07:49,983 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s1@group-93DF23ABB718: changes role from      null to FOLLOWER at term 0 for startAsFollower
2019-09-24 12:07:49,984 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s1: start FollowerState
2019-09-24 12:07:49,984 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-93DF23ABB718,id=s1
2019-09-24 12:07:49,989 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - s1: start RPC server
2019-09-24 12:07:49,991 INFO  server.GrpcService (GrpcService.java:startImpl(158)) - s1: GrpcService started, listening on 0.0.0.0/0.0.0.0:37937
2019-09-24 12:07:49,991 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(181)) - s2@group-93DF23ABB718: start as a follower, conf=-1: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null
2019-09-24 12:07:49,992 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s2@group-93DF23ABB718: changes role from      null to FOLLOWER at term 0 for startAsFollower
2019-09-24 12:07:49,992 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s2: start FollowerState
2019-09-24 12:07:49,993 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-93DF23ABB718,id=s2
2019-09-24 12:07:49,997 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - s2: start RPC server
2019-09-24 12:07:49,998 INFO  server.GrpcService (GrpcService.java:startImpl(158)) - s2: GrpcService started, listening on 0.0.0.0/0.0.0.0:45661
2019-09-24 12:07:49,999 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 300ms (default)
2019-09-24 12:07:49,999 INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(86)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-93DF23ABB718:t0, leader=null, voted=null, raftlog=s0@group-93DF23ABB718-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-93DF23ABB718:t0, leader=null, voted=null, raftlog=s1@group-93DF23ABB718-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-93DF23ABB718:t0, leader=null, voted=null, raftlog=s2@group-93DF23ABB718-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null RUNNING
2019-09-24 12:07:50,000 WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(158)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #1/100: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-93DF23ABB718:t0, leader=null, voted=null, raftlog=s0@group-93DF23ABB718-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-93DF23ABB718:t0, leader=null, voted=null, raftlog=s1@group-93DF23ABB718-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-93DF23ABB718:t0, leader=null, voted=null, raftlog=s2@group-93DF23ABB718-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null RUNNING, sleep 450ms and then retry.
java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-93DF23ABB718:t0, leader=null, voted=null, raftlog=s0@group-93DF23ABB718-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-93DF23ABB718:t0, leader=null, voted=null, raftlog=s1@group-93DF23ABB718-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-93DF23ABB718:t0, leader=null, voted=null, raftlog=s2@group-93DF23ABB718-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null RUNNING
	at org.apache.ratis.MiniRaftCluster.newIllegalStateExceptionForNoLeaders(MiniRaftCluster.java:506)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$1(RaftTestUtil.java:90)
	at org.apache.ratis.MiniRaftCluster.getLeader(MiniRaftCluster.java:539)
	at org.apache.ratis.MiniRaftCluster.getLeader(MiniRaftCluster.java:532)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:98)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:152)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:97)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:77)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:72)
	at org.apache.ratis.server.impl.RaftStateMachineExceptionTests.runTestRetryOnExceptionDuringReplication(RaftStateMachineExceptionTests.java:149)
	at org.apache.ratis.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:125)
	at org.apache.ratis.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:113)
	at org.apache.ratis.server.impl.RaftStateMachineExceptionTests.testRetryOnExceptionDuringReplication(RaftStateMachineExceptionTests.java:145)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:748)
2019-09-24 12:07:50,135 INFO  impl.FollowerState (FollowerState.java:run(108)) - s1@group-93DF23ABB718-FollowerState: change to CANDIDATE, lastRpcTime:151ms, electionTimeout:151ms
2019-09-24 12:07:50,136 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - s1: shutdown FollowerState
2019-09-24 12:07:50,136 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s1@group-93DF23ABB718: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-09-24 12:07:50,136 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s1: start LeaderElection
2019-09-24 12:07:50,160 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(178)) - s1@group-93DF23ABB718-LeaderElection7: begin an election at term 1 for -1: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null
2019-09-24 12:07:50,173 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(743)) - s2@group-93DF23ABB718: receive requestVote(s1, group-93DF23ABB718, 1, (t:0, i:0))
2019-09-24 12:07:50,173 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(743)) - s0@group-93DF23ABB718: receive requestVote(s1, group-93DF23ABB718, 1, (t:0, i:0))
2019-09-24 12:07:50,173 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s2@group-93DF23ABB718: changes role from  FOLLOWER to FOLLOWER at term 1 for recognizeCandidate:s1
2019-09-24 12:07:50,173 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s0@group-93DF23ABB718: changes role from  FOLLOWER to FOLLOWER at term 1 for recognizeCandidate:s1
2019-09-24 12:07:50,174 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - s2: shutdown FollowerState
2019-09-24 12:07:50,174 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - s0: shutdown FollowerState
2019-09-24 12:07:50,174 INFO  impl.FollowerState (FollowerState.java:run(117)) - s2@group-93DF23ABB718-FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-09-24 12:07:50,174 INFO  impl.FollowerState (FollowerState.java:run(117)) - s0@group-93DF23ABB718-FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-09-24 12:07:50,174 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s2: start FollowerState
2019-09-24 12:07:50,174 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s0: start FollowerState
2019-09-24 12:07:50,190 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(775)) - s0@group-93DF23ABB718 replies to vote request: s1<-s0#0:OK-t1. Peer's state: s0@group-93DF23ABB718:t1, leader=null, voted=s1, raftlog=s0@group-93DF23ABB718-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null
2019-09-24 12:07:50,190 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(775)) - s2@group-93DF23ABB718 replies to vote request: s1<-s2#0:OK-t1. Peer's state: s2@group-93DF23ABB718:t1, leader=null, voted=s1, raftlog=s2@group-93DF23ABB718-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null
2019-09-24 12:07:50,194 INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(56)) - s1@group-93DF23ABB718-LeaderElection7: Election PASSED; received 1 response(s) [s1<-s2#0:OK-t1] and 0 exception(s); s1@group-93DF23ABB718:t1, leader=null, voted=s1, raftlog=s1@group-93DF23ABB718-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null
2019-09-24 12:07:50,195 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - s1: shutdown LeaderElection
2019-09-24 12:07:50,196 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s1@group-93DF23ABB718: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-09-24 12:07:50,196 INFO  impl.RaftServerImpl (ServerState.java:setLeader(254)) - s1@group-93DF23ABB718: change Leader from null to s1 at term 1 for becomeLeader, leader elected after 233ms
2019-09-24 12:07:50,196 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-09-24 12:07:50,196 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-09-24 12:07:50,196 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.write.element-limit = 4096 (default)
2019-09-24 12:07:50,197 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-09-24 12:07:50,197 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-09-24 12:07:50,197 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.element-limit = 65536 (default)
2019-09-24 12:07:50,200 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2019-09-24 12:07:50,200 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-24 12:07:50,201 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2019-09-24 12:07:50,201 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2019-09-24 12:07:50,201 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-09-24 12:07:50,201 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-09-24 12:07:50,202 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2019-09-24 12:07:50,202 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-24 12:07:50,202 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2019-09-24 12:07:50,203 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2019-09-24 12:07:50,203 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-09-24 12:07:50,203 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-09-24 12:07:50,203 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s1: start LeaderState
2019-09-24 12:07:50,204 DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(425)) - truncateIndex=-1, arrayIndex=0
2019-09-24 12:07:50,204 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(380)) - s1@group-93DF23ABB718-SegmentedRaftLogWorker: Starting segment from index:0
2019-09-24 12:07:50,205 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(355)) - s1@group-93DF23ABB718: set configuration 0: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null at 0
2019-09-24 12:07:50,209 INFO  impl.RaftServerImpl (ServerState.java:setLeader(254)) - s2@group-93DF23ABB718: change Leader from null to s1 at term 1 for appendEntries, leader elected after 246ms
2019-09-24 12:07:50,209 INFO  impl.RaftServerImpl (ServerState.java:setLeader(254)) - s0@group-93DF23ABB718: change Leader from null to s1 at term 1 for appendEntries, leader elected after 246ms
2019-09-24 12:07:50,215 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s2@group-93DF23ABB718: receive appendEntries(s1, 1, null, -1, false, commits[s1:c-1, s0:c-1, s2:c-1], entries: (t:1, i:0), CONFIGURATIONENTRY
2019-09-24 12:07:50,215 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(355)) - s2@group-93DF23ABB718: set configuration 0: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null at 0
2019-09-24 12:07:50,216 DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(425)) - truncateIndex=-1, arrayIndex=0
2019-09-24 12:07:50,216 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s0@group-93DF23ABB718: receive appendEntries(s1, 1, null, -1, false, commits[s1:c-1, s0:c-1, s2:c-1], entries: (t:1, i:0), CONFIGURATIONENTRY
2019-09-24 12:07:50,216 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(380)) - s2@group-93DF23ABB718-SegmentedRaftLogWorker: Starting segment from index:0
2019-09-24 12:07:50,216 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(355)) - s0@group-93DF23ABB718: set configuration 0: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null at 0
2019-09-24 12:07:50,217 DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(425)) - truncateIndex=-1, arrayIndex=0
2019-09-24 12:07:50,217 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(380)) - s0@group-93DF23ABB718-SegmentedRaftLogWorker: Starting segment from index:0
2019-09-24 12:07:50,376 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(569)) - s2@group-93DF23ABB718-SegmentedRaftLogWorker: created new log segment /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s2/9f556200-3bc1-45de-bb71-93df23abb718/current/log_inprogress_0
2019-09-24 12:07:50,376 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(569)) - s1@group-93DF23ABB718-SegmentedRaftLogWorker: created new log segment /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s1/9f556200-3bc1-45de-bb71-93df23abb718/current/log_inprogress_0
2019-09-24 12:07:50,376 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(569)) - s0@group-93DF23ABB718-SegmentedRaftLogWorker: created new log segment /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s0/9f556200-3bc1-45de-bb71-93df23abb718/current/log_inprogress_0
2019-09-24 12:07:50,382 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s2@group-93DF23ABB718: succeeded to handle AppendEntries. Reply: s1<-s2#1:OK,SUCCESS,nextIndex:1,term:1,followerCommit:-1
2019-09-24 12:07:50,383 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s0@group-93DF23ABB718: succeeded to handle AppendEntries. Reply: s1<-s0#1:OK,SUCCESS,nextIndex:1,term:1,followerCommit:-1
2019-09-24 12:07:50,452 INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(101)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-93DF23ABB718:t1, leader=s1, voted=s1, raftlog=s0@group-93DF23ABB718-SegmentedRaftLog:OPENED:c-1,f0,i0, conf=0: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null RUNNING
  s1:  RUNNING    LEADER s1@group-93DF23ABB718:t1, leader=s1, voted=s1, raftlog=s1@group-93DF23ABB718-SegmentedRaftLog:OPENED:c0,f0,i0, conf=0: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-93DF23ABB718:t1, leader=s1, voted=s1, raftlog=s2@group-93DF23ABB718-SegmentedRaftLog:OPENED:c-1,f0,i0, conf=0: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null RUNNING
2019-09-24 12:07:50,453 DEBUG client.RaftClient (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-09-24 12:07:50,453 DEBUG client.RaftClient (RaftClientImpl.java:sendRequest(275)) - client-E5A43AADA673: send RaftClientRequest:client-E5A43AADA673->s1@group-93DF23ABB718, cid=2, seq=0, RW, first msg to make leader ready
2019-09-24 12:07:50,464 DEBUG impl.RaftServerImpl (RaftServerImpl.java:submitClientRequestAsync(533)) - s1@group-93DF23ABB718: receive client request(RaftClientRequest:client-E5A43AADA673->s1@group-93DF23ABB718, cid=2, seq=0, RW, Message:6669727374206d736720...(size=30))
2019-09-24 12:07:50,466 DEBUG impl.RaftServerImpl (LeaderState.java:addPendingRequest(317)) - s1@group-93DF23ABB718-LeaderState: addPendingRequest at RaftClientRequest:client-E5A43AADA673->s1@group-93DF23ABB718, cid=2, seq=0, RW, Message:6669727374206d736720...(size=30), entry=(t:1, i:1), STATEMACHINELOGENTRY, client-E5A43AADA673, cid=2
2019-09-24 12:07:50,467 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s0@group-93DF23ABB718: receive appendEntries(s1, 1, (t:1, i:0), 0, false, commits[s1:c0, s0:c0, s2:c0], entries: (t:1, i:1), STATEMACHINELOGENTRY, client-E5A43AADA673, cid=2
2019-09-24 12:07:50,468 DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(425)) - truncateIndex=-1, arrayIndex=0
2019-09-24 12:07:50,468 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s2@group-93DF23ABB718: receive appendEntries(s1, 1, (t:1, i:0), 0, false, commits[s1:c0, s0:c0, s2:c0], entries: (t:1, i:1), STATEMACHINELOGENTRY, client-E5A43AADA673, cid=2
2019-09-24 12:07:50,469 DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(425)) - truncateIndex=-1, arrayIndex=0
2019-09-24 12:07:50,478 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s2@group-93DF23ABB718: succeeded to handle AppendEntries. Reply: s1<-s2#5:OK,SUCCESS,nextIndex:2,term:1,followerCommit:0
2019-09-24 12:07:50,478 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s0@group-93DF23ABB718: succeeded to handle AppendEntries. Reply: s1<-s0#5:OK,SUCCESS,nextIndex:2,term:1,followerCommit:0
2019-09-24 12:07:50,481 INFO  client.GrpcClientProtocolService (GrpcClientProtocolService.java:lambda$processClientRequest$0(278)) - Failed RaftClientRequest:client-E5A43AADA673->s1@group-93DF23ABB718, cid=2, seq=0, RW, Message:6669727374206d736720...(size=30), reply=RaftClientReply:client-E5A43AADA673->s1@group-93DF23ABB718, cid=2, FAILED org.apache.ratis.protocol.StateMachineException: org.apache.ratis.protocol.StateMachineException from Server s1@group-93DF23ABB718: Fake Exception, logIndex=1, commits[s1:c1, s0:c0, s2:c0]
2019-09-24 12:07:50,482 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s2@group-93DF23ABB718: receive appendEntries(s1, 1, (t:1, i:1), 1, false, commits[s1:c1, s0:c0, s2:c0], entries: (t:1, i:2), METADATAENTRY(c1)
2019-09-24 12:07:50,482 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s0@group-93DF23ABB718: receive appendEntries(s1, 1, (t:1, i:1), 1, false, commits[s1:c1, s0:c0, s2:c0], entries: (t:1, i:2), METADATAENTRY(c1)
2019-09-24 12:07:50,483 DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(425)) - truncateIndex=-1, arrayIndex=0
2019-09-24 12:07:50,483 DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(425)) - truncateIndex=-1, arrayIndex=0
2019-09-24 12:07:50,488 DEBUG client.RaftClient (RaftClientImpl.java:sendRequest(285)) - client-E5A43AADA673: receive RaftClientReply:client-E5A43AADA673->s1@group-93DF23ABB718, cid=2, FAILED org.apache.ratis.protocol.StateMachineException: org.apache.ratis.protocol.StateMachineException from Server s1@group-93DF23ABB718: Fake Exception, logIndex=1, commits[s1:c1, s0:c0, s2:c0]
2019-09-24 12:07:50,489 DEBUG client.RaftClient (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-09-24 12:07:50,492 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s2@group-93DF23ABB718: succeeded to handle AppendEntries. Reply: s1<-s2#6:OK,SUCCESS,nextIndex:3,term:1,followerCommit:1
2019-09-24 12:07:50,493 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s0@group-93DF23ABB718: succeeded to handle AppendEntries. Reply: s1<-s0#6:OK,SUCCESS,nextIndex:3,term:1,followerCommit:1
2019-09-24 12:07:50,499 DEBUG impl.RaftServerImpl (RaftServerImpl.java:submitClientRequestAsync(533)) - s1@group-93DF23ABB718: receive client request(RaftClientRequest:client-8F5732491BC0->s1@group-93DF23ABB718, cid=999, seq=0, RW, Message:6d657373616765)
2019-09-24 12:07:50,502 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s1@group-93DF23ABB718: changes role from    LEADER to FOLLOWER at term 1 for stepDown
2019-09-24 12:07:50,502 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - s1: shutdown LeaderState
2019-09-24 12:07:50,503 WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(143)) - s1@group-93DF23ABB718->s2-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2019-09-24 12:07:50,503 INFO  client.GrpcClientProtocolService (GrpcClientProtocolService.java:lambda$processClientRequest$0(278)) - Failed RaftClientRequest:client-8F5732491BC0->s1@group-93DF23ABB718, cid=999, seq=0, RW, Message:6d657373616765, reply=RaftClientReply:client-8F5732491BC0->s1@group-93DF23ABB718, cid=999, FAILED org.apache.ratis.protocol.StateMachineException: java.io.IOException from Server s1@group-93DF23ABB718: Fake Exception in preAppend, logIndex=0, commits[s1:c2, s0:c1, s2:c1]
2019-09-24 12:07:50,503 WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(143)) - s1@group-93DF23ABB718->s0-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2019-09-24 12:07:50,505 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(202)) - s1@group-93DF23ABB718-PendingRequests: sendNotLeaderResponses
2019-09-24 12:07:50,506 INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(113)) - s2: Completed APPEND_ENTRIES, lastRequest: s1->s2#6-t1, previous=(t:1, i:1), leaderCommit=1, initializing? false, entries: size=1, first=(t:1, i:2), METADATAENTRY(c1)
2019-09-24 12:07:50,507 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s1: start FollowerState
2019-09-24 12:07:50,507 INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(113)) - s0: Completed APPEND_ENTRIES, lastRequest: s1->s0#6-t1, previous=(t:1, i:1), leaderCommit=1, initializing? false, entries: size=1, first=(t:1, i:2), METADATAENTRY(c1)
2019-09-24 12:07:50,508 INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(293)) - s1@group-93DF23ABB718->s2-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2019-09-24 12:07:50,509 INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(293)) - s1@group-93DF23ABB718->s0-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2019-09-24 12:07:50,510 INFO  impl.FollowerInfo (FollowerInfo.java:lambda$new$0(51)) - s1@group-93DF23ABB718->s2: nextIndex: updateUnconditionally 3 -> 2
2019-09-24 12:07:50,512 INFO  impl.FollowerInfo (FollowerInfo.java:lambda$new$0(51)) - s1@group-93DF23ABB718->s0: nextIndex: updateUnconditionally 3 -> 2
2019-09-24 12:07:50,517 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 300ms (default)
2019-09-24 12:07:50,518 INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(86)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-93DF23ABB718:t1, leader=s1, voted=s1, raftlog=s0@group-93DF23ABB718-SegmentedRaftLog:OPENED:c1,f2,i2, conf=0: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-93DF23ABB718:t1, leader=s1, voted=s1, raftlog=s1@group-93DF23ABB718-SegmentedRaftLog:OPENED:c2,f2,i2, conf=0: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-93DF23ABB718:t1, leader=s1, voted=s1, raftlog=s2@group-93DF23ABB718-SegmentedRaftLog:OPENED:c1,f2,i2, conf=0: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null RUNNING
2019-09-24 12:07:50,518 WARN  ratis.RaftTestUtil (JavaUtils.java:attempt(158)) - FAILED "waitForLeader-null-(expectLeader? true)", attempt #1/100: java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-93DF23ABB718:t1, leader=s1, voted=s1, raftlog=s0@group-93DF23ABB718-SegmentedRaftLog:OPENED:c1,f2,i2, conf=0: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-93DF23ABB718:t1, leader=s1, voted=s1, raftlog=s1@group-93DF23ABB718-SegmentedRaftLog:OPENED:c2,f2,i2, conf=0: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-93DF23ABB718:t1, leader=s1, voted=s1, raftlog=s2@group-93DF23ABB718-SegmentedRaftLog:OPENED:c1,f2,i2, conf=0: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null RUNNING, sleep 450ms and then retry.
java.lang.IllegalStateException: No leader yet : printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-93DF23ABB718:t1, leader=s1, voted=s1, raftlog=s0@group-93DF23ABB718-SegmentedRaftLog:OPENED:c1,f2,i2, conf=0: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null RUNNING
  s1:  RUNNING  FOLLOWER s1@group-93DF23ABB718:t1, leader=s1, voted=s1, raftlog=s1@group-93DF23ABB718-SegmentedRaftLog:OPENED:c2,f2,i2, conf=0: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-93DF23ABB718:t1, leader=s1, voted=s1, raftlog=s2@group-93DF23ABB718-SegmentedRaftLog:OPENED:c1,f2,i2, conf=0: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null RUNNING
	at org.apache.ratis.MiniRaftCluster.newIllegalStateExceptionForNoLeaders(MiniRaftCluster.java:506)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$1(RaftTestUtil.java:90)
	at org.apache.ratis.MiniRaftCluster.getLeader(MiniRaftCluster.java:539)
	at org.apache.ratis.MiniRaftCluster.getLeader(MiniRaftCluster.java:532)
	at org.apache.ratis.RaftTestUtil.lambda$waitForLeader$3(RaftTestUtil.java:98)
	at org.apache.ratis.util.JavaUtils.attempt(JavaUtils.java:152)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:97)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:77)
	at org.apache.ratis.RaftTestUtil.waitForLeader(RaftTestUtil.java:72)
	at org.apache.ratis.server.impl.RaftStateMachineExceptionTests.runTestRetryOnExceptionDuringReplication(RaftStateMachineExceptionTests.java:166)
	at org.apache.ratis.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:125)
	at org.apache.ratis.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:113)
	at org.apache.ratis.server.impl.RaftStateMachineExceptionTests.testRetryOnExceptionDuringReplication(RaftStateMachineExceptionTests.java:145)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:748)
2019-09-24 12:07:50,706 INFO  impl.FollowerState (FollowerState.java:run(108)) - s1@group-93DF23ABB718-FollowerState: change to CANDIDATE, lastRpcTime:199ms, electionTimeout:197ms
2019-09-24 12:07:50,707 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - s1: shutdown FollowerState
2019-09-24 12:07:50,708 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s1@group-93DF23ABB718: changes role from  FOLLOWER to CANDIDATE at term 1 for changeToCandidate
2019-09-24 12:07:50,708 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s1: start LeaderElection
2019-09-24 12:07:50,709 INFO  impl.RaftServerImpl (ServerState.java:setLeader(254)) - s1@group-93DF23ABB718: change Leader from s1 to null at term 1 for initElection
2019-09-24 12:07:50,735 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(178)) - s1@group-93DF23ABB718-LeaderElection8: begin an election at term 2 for 0: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null
2019-09-24 12:07:50,747 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(743)) - s0@group-93DF23ABB718: receive requestVote(s1, group-93DF23ABB718, 2, (t:1, i:2))
2019-09-24 12:07:50,747 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(743)) - s2@group-93DF23ABB718: receive requestVote(s1, group-93DF23ABB718, 2, (t:1, i:2))
2019-09-24 12:07:50,747 INFO  impl.RaftServerImpl (ServerState.java:setLeader(254)) - s0@group-93DF23ABB718: change Leader from s1 to null at term 2 for updateCurrentTerm
2019-09-24 12:07:50,747 INFO  impl.RaftServerImpl (ServerState.java:setLeader(254)) - s2@group-93DF23ABB718: change Leader from s1 to null at term 2 for updateCurrentTerm
2019-09-24 12:07:50,747 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s0@group-93DF23ABB718: changes role from  FOLLOWER to FOLLOWER at term 2 for recognizeCandidate:s1
2019-09-24 12:07:50,748 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s2@group-93DF23ABB718: changes role from  FOLLOWER to FOLLOWER at term 2 for recognizeCandidate:s1
2019-09-24 12:07:50,748 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - s0: shutdown FollowerState
2019-09-24 12:07:50,748 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - s2: shutdown FollowerState
2019-09-24 12:07:50,748 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s0: start FollowerState
2019-09-24 12:07:50,748 INFO  impl.FollowerState (FollowerState.java:run(117)) - s2@group-93DF23ABB718-FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-09-24 12:07:50,748 INFO  impl.FollowerState (FollowerState.java:run(117)) - s0@group-93DF23ABB718-FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-09-24 12:07:50,748 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s2: start FollowerState
2019-09-24 12:07:50,764 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(775)) - s2@group-93DF23ABB718 replies to vote request: s1<-s2#0:OK-t2. Peer's state: s2@group-93DF23ABB718:t2, leader=null, voted=s1, raftlog=s2@group-93DF23ABB718-SegmentedRaftLog:OPENED:c1,f2,i2, conf=0: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null
2019-09-24 12:07:50,764 DEBUG impl.RaftServerImpl (RaftServerImpl.java:requestVote(775)) - s0@group-93DF23ABB718 replies to vote request: s1<-s0#0:OK-t2. Peer's state: s0@group-93DF23ABB718:t2, leader=null, voted=s1, raftlog=s0@group-93DF23ABB718-SegmentedRaftLog:OPENED:c1,f2,i2, conf=0: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null
2019-09-24 12:07:50,767 INFO  impl.LeaderElection (LeaderElection.java:logAndReturn(56)) - s1@group-93DF23ABB718-LeaderElection8: Election PASSED; received 1 response(s) [s1<-s2#0:OK-t2] and 0 exception(s); s1@group-93DF23ABB718:t2, leader=null, voted=s1, raftlog=s1@group-93DF23ABB718-SegmentedRaftLog:OPENED:c2,f2,i2, conf=0: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null
2019-09-24 12:07:50,768 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - s1: shutdown LeaderElection
2019-09-24 12:07:50,768 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(170)) - s1@group-93DF23ABB718: changes role from CANDIDATE to LEADER at term 2 for changeToLeader
2019-09-24 12:07:50,768 INFO  impl.RaftServerImpl (ServerState.java:setLeader(254)) - s1@group-93DF23ABB718: change Leader from null to s1 at term 2 for becomeLeader, leader elected after 59ms
2019-09-24 12:07:50,769 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-09-24 12:07:50,769 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-09-24 12:07:50,769 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.write.element-limit = 4096 (default)
2019-09-24 12:07:50,769 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-09-24 12:07:50,769 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-09-24 12:07:50,769 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.element-limit = 65536 (default)
2019-09-24 12:07:50,770 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2019-09-24 12:07:50,770 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-24 12:07:50,770 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2019-09-24 12:07:50,770 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2019-09-24 12:07:50,771 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-09-24 12:07:50,771 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-09-24 12:07:50,771 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2019-09-24 12:07:50,771 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 4MB (=4194304) (default)
2019-09-24 12:07:50,772 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.element-limit = 0 (default)
2019-09-24 12:07:50,772 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2019-09-24 12:07:50,772 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-09-24 12:07:50,772 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = true (default)
2019-09-24 12:07:50,773 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - s1: start LeaderState
2019-09-24 12:07:50,773 DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(425)) - truncateIndex=-1, arrayIndex=0
2019-09-24 12:07:50,773 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:rollLogSegment(385)) - s1@group-93DF23ABB718-SegmentedRaftLogWorker: Rolling segment log-0_2 to index:2
2019-09-24 12:07:50,779 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(355)) - s1@group-93DF23ABB718: set configuration 3: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null at 3
2019-09-24 12:07:50,780 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.move /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s1/9f556200-3bc1-45de-bb71-93df23abb718/current/log_inprogress_0 to /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s1/9f556200-3bc1-45de-bb71-93df23abb718/current/log_0-2
2019-09-24 12:07:50,780 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(526)) - s1@group-93DF23ABB718-SegmentedRaftLogWorker: Rolled log segment from /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s1/9f556200-3bc1-45de-bb71-93df23abb718/current/log_inprogress_0 to /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s1/9f556200-3bc1-45de-bb71-93df23abb718/current/log_0-2
2019-09-24 12:07:50,782 INFO  impl.RaftServerImpl (ServerState.java:setLeader(254)) - s2@group-93DF23ABB718: change Leader from null to s1 at term 2 for appendEntries, leader elected after 34ms
2019-09-24 12:07:50,782 INFO  impl.RaftServerImpl (ServerState.java:setLeader(254)) - s0@group-93DF23ABB718: change Leader from null to s1 at term 2 for appendEntries, leader elected after 35ms
2019-09-24 12:07:50,786 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s2@group-93DF23ABB718: receive appendEntries(s1, 2, (t:1, i:2), 2, false, commits[s1:c2, s0:c1, s2:c1], entries: (t:2, i:3), CONFIGURATIONENTRY
2019-09-24 12:07:50,787 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s0@group-93DF23ABB718: receive appendEntries(s1, 2, (t:1, i:2), 2, false, commits[s1:c2, s0:c1, s2:c1], entries: (t:2, i:3), CONFIGURATIONENTRY
2019-09-24 12:07:50,787 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(355)) - s2@group-93DF23ABB718: set configuration 3: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null at 3
2019-09-24 12:07:50,787 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(355)) - s0@group-93DF23ABB718: set configuration 3: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null at 3
2019-09-24 12:07:50,787 DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(425)) - truncateIndex=-1, arrayIndex=0
2019-09-24 12:07:50,787 DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(425)) - truncateIndex=-1, arrayIndex=0
2019-09-24 12:07:50,787 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:rollLogSegment(385)) - s2@group-93DF23ABB718-SegmentedRaftLogWorker: Rolling segment log-0_2 to index:2
2019-09-24 12:07:50,788 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:rollLogSegment(385)) - s0@group-93DF23ABB718-SegmentedRaftLogWorker: Rolling segment log-0_2 to index:2
2019-09-24 12:07:50,790 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.move /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s2/9f556200-3bc1-45de-bb71-93df23abb718/current/log_inprogress_0 to /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s2/9f556200-3bc1-45de-bb71-93df23abb718/current/log_0-2
2019-09-24 12:07:50,790 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(526)) - s2@group-93DF23ABB718-SegmentedRaftLogWorker: Rolled log segment from /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s2/9f556200-3bc1-45de-bb71-93df23abb718/current/log_inprogress_0 to /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s2/9f556200-3bc1-45de-bb71-93df23abb718/current/log_0-2
2019-09-24 12:07:50,790 TRACE util.FileUtils (LogUtils.java:runAndLog(61)) - Successfully ran Files.move /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s0/9f556200-3bc1-45de-bb71-93df23abb718/current/log_inprogress_0 to /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s0/9f556200-3bc1-45de-bb71-93df23abb718/current/log_0-2
2019-09-24 12:07:50,791 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(526)) - s0@group-93DF23ABB718-SegmentedRaftLogWorker: Rolled log segment from /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s0/9f556200-3bc1-45de-bb71-93df23abb718/current/log_inprogress_0 to /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s0/9f556200-3bc1-45de-bb71-93df23abb718/current/log_0-2
2019-09-24 12:07:50,966 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(569)) - s2@group-93DF23ABB718-SegmentedRaftLogWorker: created new log segment /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s2/9f556200-3bc1-45de-bb71-93df23abb718/current/log_inprogress_3
2019-09-24 12:07:50,966 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(569)) - s0@group-93DF23ABB718-SegmentedRaftLogWorker: created new log segment /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s0/9f556200-3bc1-45de-bb71-93df23abb718/current/log_inprogress_3
2019-09-24 12:07:50,966 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(569)) - s1@group-93DF23ABB718-SegmentedRaftLogWorker: created new log segment /workdir/ratis-test/target/test/data/ce901d9b/MiniRaftClusterWithGrpcfa6d396a/s1/9f556200-3bc1-45de-bb71-93df23abb718/current/log_inprogress_3
2019-09-24 12:07:50,970 INFO  ratis.RaftTestUtil (RaftTestUtil.java:waitForLeader(101)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-93DF23ABB718:t2, leader=s1, voted=s1, raftlog=s0@group-93DF23ABB718-SegmentedRaftLog:OPENED:c1,f2,i3, conf=3: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null RUNNING
  s1:  RUNNING    LEADER s1@group-93DF23ABB718:t2, leader=s1, voted=s1, raftlog=s1@group-93DF23ABB718-SegmentedRaftLog:OPENED:c2,f2,i3, conf=3: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-93DF23ABB718:t2, leader=s1, voted=s1, raftlog=s2@group-93DF23ABB718-SegmentedRaftLog:OPENED:c1,f2,i3, conf=3: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null RUNNING
2019-09-24 12:07:50,974 DEBUG impl.RaftServerImpl (RaftServerImpl.java:submitClientRequestAsync(533)) - s1@group-93DF23ABB718: receive client request(RaftClientRequest:client-8F5732491BC0->s1@group-93DF23ABB718, cid=999, seq=0, RW, Message:6d657373616765)
2019-09-24 12:07:50,975 INFO  client.GrpcClientProtocolService (GrpcClientProtocolService.java:lambda$processClientRequest$0(278)) - Failed RaftClientRequest:client-8F5732491BC0->s1@group-93DF23ABB718, cid=999, seq=0, RW, Message:6d657373616765, reply=RaftClientReply:client-8F5732491BC0->s1@group-93DF23ABB718, cid=999, FAILED org.apache.ratis.protocol.LeaderNotReadyException: s1@group-93DF23ABB718 is in LEADER state but not ready yet., logIndex=0, commits[s1:c2, s0:c1, s2:c1]
2019-09-24 12:07:50,976 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s2@group-93DF23ABB718: succeeded to handle AppendEntries. Reply: s1<-s2#1:OK,SUCCESS,nextIndex:4,term:2,followerCommit:1
2019-09-24 12:07:50,977 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s0@group-93DF23ABB718: succeeded to handle AppendEntries. Reply: s1<-s0#1:OK,SUCCESS,nextIndex:4,term:2,followerCommit:1
2019-09-24 12:07:50,978 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:runWithNewCluster(127)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-93DF23ABB718:t2, leader=s1, voted=s1, raftlog=s0@group-93DF23ABB718-SegmentedRaftLog:OPENED:c1,f3,i3, conf=3: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null RUNNING
  s1:  RUNNING    LEADER s1@group-93DF23ABB718:t2, leader=s1, voted=s1, raftlog=s1@group-93DF23ABB718-SegmentedRaftLog:OPENED:c2,f3,i3, conf=3: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-93DF23ABB718:t2, leader=s1, voted=s1, raftlog=s2@group-93DF23ABB718-SegmentedRaftLog:OPENED:c1,f3,i3, conf=3: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null RUNNING
2019-09-24 12:07:50,979 ERROR ratis.MiniRaftCluster (MiniRaftCluster.java:runWithNewCluster(128)) - Failed org.apache.ratis.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:113)
java.lang.NullPointerException
	at java.util.Objects.requireNonNull(Objects.java:203)
	at org.apache.ratis.server.impl.RaftStateMachineExceptionTests.runTestRetryOnExceptionDuringReplication(RaftStateMachineExceptionTests.java:170)
	at org.apache.ratis.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:125)
	at org.apache.ratis.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:113)
	at org.apache.ratis.server.impl.RaftStateMachineExceptionTests.testRetryOnExceptionDuringReplication(RaftStateMachineExceptionTests.java:145)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:748)
2019-09-24 12:07:50,980 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(700)) - ************************************************************** 
2019-09-24 12:07:50,981 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(701)) - *** 
2019-09-24 12:07:50,981 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(702)) - ***     Stopping MiniRaftClusterWithGrpc
2019-09-24 12:07:50,981 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(703)) - *** 
2019-09-24 12:07:50,981 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(704)) - ************************************************************** 
2019-09-24 12:07:50,981 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s2@group-93DF23ABB718: receive appendEntries(s1, 2, (t:2, i:3), 3, false, commits[s1:c3, s0:c1, s2:c1], entries: (t:2, i:4), METADATAENTRY(c3)
2019-09-24 12:07:50,982 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s0@group-93DF23ABB718: receive appendEntries(s1, 2, (t:2, i:3), 3, false, commits[s1:c3, s0:c1, s2:c1], entries: (t:2, i:4), METADATAENTRY(c3)
2019-09-24 12:07:50,982 DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(425)) - truncateIndex=-1, arrayIndex=0
2019-09-24 12:07:50,982 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(705)) - printing ALL groups
  s0:  RUNNING  FOLLOWER s0@group-93DF23ABB718:t2, leader=s1, voted=s1, raftlog=s0@group-93DF23ABB718-SegmentedRaftLog:OPENED:c1,f3,i3, conf=3: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null RUNNING
  s1:  RUNNING    LEADER s1@group-93DF23ABB718:t2, leader=s1, voted=s1, raftlog=s1@group-93DF23ABB718-SegmentedRaftLog:OPENED:c3,f3,i4, conf=3: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null RUNNING
  s2:  RUNNING  FOLLOWER s2@group-93DF23ABB718:t2, leader=s1, voted=s1, raftlog=s2@group-93DF23ABB718-SegmentedRaftLog:OPENED:c1,f3,i3, conf=3: [s0:0.0.0.0:37370, s1:0.0.0.0:37937, s2:0.0.0.0:45661], old=null RUNNING
2019-09-24 12:07:50,982 DEBUG raftlog.RaftLog (SegmentedRaftLog.java:appendImpl(425)) - truncateIndex=-1, arrayIndex=0
2019-09-24 12:07:50,983 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - s0: close
2019-09-24 12:07:50,984 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - s1: close
2019-09-24 12:07:50,985 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(247)) - s0@group-93DF23ABB718: shutdown
2019-09-24 12:07:50,985 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(247)) - s1@group-93DF23ABB718: shutdown
2019-09-24 12:07:50,985 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - s2: close
2019-09-24 12:07:50,986 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-93DF23ABB718,id=s1
2019-09-24 12:07:50,986 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-93DF23ABB718,id=s0
2019-09-24 12:07:50,987 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - s1: shutdown LeaderState
2019-09-24 12:07:50,986 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(247)) - s2@group-93DF23ABB718: shutdown
2019-09-24 12:07:50,988 WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(143)) - s1@group-93DF23ABB718->s0-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2019-09-24 12:07:50,988 WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(143)) - s1@group-93DF23ABB718->s2-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2019-09-24 12:07:50,988 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(202)) - s1@group-93DF23ABB718-PendingRequests: sendNotLeaderResponses
2019-09-24 12:07:50,987 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - s0: shutdown FollowerState
2019-09-24 12:07:50,991 INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(113)) - s0: Completed APPEND_ENTRIES, lastRequest: s1->s0#4-t2, previous=(t:2, i:3), leaderCommit=3, initializing? false, entries: size=1, first=(t:2, i:4), METADATAENTRY(c3)
2019-09-24 12:07:50,991 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(136)) - s1@group-93DF23ABB718-StateMachineUpdater: set stopIndex = 3
2019-09-24 12:07:50,988 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-93DF23ABB718,id=s2
2019-09-24 12:07:50,991 INFO  impl.RaftServerImpl (ServerState.java:close(386)) - s1@group-93DF23ABB718: closes. applyIndex: 3
2019-09-24 12:07:50,991 INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(113)) - s2: Completed APPEND_ENTRIES, lastRequest: s1->s2#4-t2, previous=(t:2, i:3), leaderCommit=3, initializing? false, entries: size=1, first=(t:2, i:4), METADATAENTRY(c3)
2019-09-24 12:07:50,991 INFO  impl.FollowerState (FollowerState.java:run(117)) - s0@group-93DF23ABB718-FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-09-24 12:07:50,991 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(136)) - s0@group-93DF23ABB718-StateMachineUpdater: set stopIndex = 1
2019-09-24 12:07:50,992 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(313)) - s1@group-93DF23ABB718-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-09-24 12:07:50,992 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s0@group-93DF23ABB718: succeeded to handle AppendEntries. Reply: s1<-s0#4:OK,SUCCESS,nextIndex:5,term:2,followerCommit:3
2019-09-24 12:07:50,992 DEBUG impl.RaftServerImpl (RaftServerImpl.java:logAppendEntries(850)) - s2@group-93DF23ABB718: succeeded to handle AppendEntries. Reply: s1<-s2#4:OK,SUCCESS,nextIndex:5,term:2,followerCommit:3
2019-09-24 12:07:50,992 INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(293)) - s1@group-93DF23ABB718->s0-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2019-09-24 12:07:50,992 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - s2: shutdown FollowerState
2019-09-24 12:07:50,994 INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(293)) - s1@group-93DF23ABB718->s2-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2019-09-24 12:07:50,993 INFO  impl.RaftServerImpl (ServerState.java:close(386)) - s0@group-93DF23ABB718: closes. applyIndex: 1
2019-09-24 12:07:50,996 INFO  impl.FollowerState (FollowerState.java:run(117)) - s2@group-93DF23ABB718-FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-09-24 12:07:50,997 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(313)) - s0@group-93DF23ABB718-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-09-24 12:07:50,996 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(136)) - s2@group-93DF23ABB718-StateMachineUpdater: set stopIndex = 3
2019-09-24 12:07:50,999 INFO  impl.RaftServerImpl (ServerState.java:close(386)) - s2@group-93DF23ABB718: closes. applyIndex: 3
2019-09-24 12:07:50,997 INFO  impl.FollowerInfo (FollowerInfo.java:lambda$new$0(51)) - s1@group-93DF23ABB718->s0: nextIndex: updateUnconditionally 5 -> 4
2019-09-24 12:07:50,997 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(228)) - s1@group-93DF23ABB718-SegmentedRaftLogWorker close()
2019-09-24 12:07:51,000 INFO  impl.FollowerInfo (FollowerInfo.java:lambda$new$0(51)) - s1@group-93DF23ABB718->s2: nextIndex: updateUnconditionally 5 -> 4
2019-09-24 12:07:50,999 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(313)) - s2@group-93DF23ABB718-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-09-24 12:07:51,001 INFO  server.GrpcService (GrpcService.java:closeImpl(164)) - s1: shutdown server with port 37937 now
2019-09-24 12:07:51,001 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(228)) - s0@group-93DF23ABB718-SegmentedRaftLogWorker close()
2019-09-24 12:07:51,004 INFO  server.GrpcService (GrpcService.java:closeImpl(164)) - s0: shutdown server with port 37370 now
2019-09-24 12:07:51,004 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(228)) - s2@group-93DF23ABB718-SegmentedRaftLogWorker close()
2019-09-24 12:07:51,004 INFO  server.GrpcService (GrpcService.java:closeImpl(172)) - s0: shutdown server with port 37370 successfully
2019-09-24 12:07:51,004 INFO  server.GrpcService (GrpcService.java:closeImpl(172)) - s1: shutdown server with port 37937 successfully
2019-09-24 12:07:51,005 INFO  server.GrpcService (GrpcService.java:closeImpl(164)) - s2: shutdown server with port 45661 now
2019-09-24 12:07:51,006 INFO  server.GrpcService (GrpcService.java:closeImpl(172)) - s2: shutdown server with port 45661 successfully
2019-09-24 12:07:51,007 INFO  ratis.MiniRaftCluster (MiniRaftCluster.java:shutdown(722)) - MiniRaftClusterWithGrpc shutdown completed

2019-08-28 06:27:30,268 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler27ea89cd-c382-4116-a03e-f01e9912aa0f/hdds of  storage type : DISK and capacity : 1482555576320
2019-08-28 06:27:30,273 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler27ea89cd-c382-4116-a03e-f01e9912aa0f/hdds to VolumeSet
2019-08-28 06:27:30,285 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@126253fd
2019-08-28 06:27:30,312 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@126253fd
ERROR StatusLogger No Log4j 2 configuration file found. Using default configuration (logging only errors to the console), or user programmatically provided configurations. Set system property 'log4j2.debug' to show Log4j 2 internal initialization logging. See https://logging.apache.org/log4j/2.x/manual/configuration.html for instructions on how to configure Log4j 2
2019-08-28 06:27:31,300 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-08-28 06:27:31,324 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-08-28 06:27:31,384 INFO  grpc.GrpcFactory (GrpcFactory.java:checkPooledByteBufAllocatorUseCacheForAllThreads(45)) - PERFORMANCE WARNING: useCacheForAllThreads is true that may cause Netty to create a lot garbage objects and, as a result, trigger GC.
	It is recommended to disable useCacheForAllThreads by setting -Dorg.apache.ratis.thirdparty.io.netty.allocator.useCacheForAllThreads=false in command line.
2019-08-28 06:27:31,388 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 0 (default)
2019-08-28 06:27:31,389 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-08-28 06:27:31,391 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-08-28 06:27:31,392 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-08-28 06:27:31,392 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-08-28 06:27:31,536 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler27ea89cd-c382-4116-a03e-f01e9912aa0f/ratis] (custom)
2019-08-28 06:27:31,571 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-08-28 06:27:31,572 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-08-28 06:27:31,572 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(404)) - Starting XceiverServerRatis 068e3ff2-057f-4c0d-a4f9-583d9feeb576 at port 0
2019-08-28 06:27:31,586 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - 068e3ff2-057f-4c0d-a4f9-583d9feeb576: start RPC server
2019-08-28 06:27:31,688 INFO  server.GrpcService (GrpcService.java:startImpl(149)) - 068e3ff2-057f-4c0d-a4f9-583d9feeb576: GrpcService started, listening on 0.0.0.0/0.0.0.0:42967
2019-08-28 06:27:31,689 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(414)) - XceiverServerRatis 068e3ff2-057f-4c0d-a4f9-583d9feeb576 is started using port 42967
2019-08-28 06:27:31,690 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:start(161)) - XceiverServerGrpc 068e3ff2-057f-4c0d-a4f9-583d9feeb576 is started using port 42224
2019-08-28 06:27:32,122 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - 068e3ff2-057f-4c0d-a4f9-583d9feeb576: addNew group-38A4FE0CFF9B:[068e3ff2-057f-4c0d-a4f9-583d9feeb576:127.0.0.1:42967] returns group-38A4FE0CFF9B:java.util.concurrent.CompletableFuture@7ff62f25[Not completed]
2019-08-28 06:27:32,187 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(93)) - 068e3ff2-057f-4c0d-a4f9-583d9feeb576: new RaftServerImpl for group-38A4FE0CFF9B:[068e3ff2-057f-4c0d-a4f9-583d9feeb576:127.0.0.1:42967] with ContainerStateMachine:uninitialized
2019-08-28 06:27:32,189 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 5s (custom)
2019-08-28 06:27:32,189 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 5200ms (custom)
2019-08-28 06:27:32,190 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-08-28 06:27:32,191 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.sleep.deviation.threshold = 300 (default)
2019-08-28 06:27:32,192 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = false (custom)
2019-08-28 06:27:32,199 INFO  impl.RaftServerImpl (ServerState.java:<init>(105)) - 068e3ff2-057f-4c0d-a4f9-583d9feeb576:group-38A4FE0CFF9B ConfigurationManager, init=-1: [068e3ff2-057f-4c0d-a4f9-583d9feeb576:127.0.0.1:42967], old=null, confs=<EMPTY_MAP>
2019-08-28 06:27:32,200 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler27ea89cd-c382-4116-a03e-f01e9912aa0f/ratis] (custom)
2019-08-28 06:27:32,208 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler27ea89cd-c382-4116-a03e-f01e9912aa0f/ratis/99f6f974-ef27-4956-874e-38a4fe0cff9b does not exist. Creating ...
2019-08-28 06:27:32,229 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler27ea89cd-c382-4116-a03e-f01e9912aa0f/ratis/99f6f974-ef27-4956-874e-38a4fe0cff9b/in_use.lock acquired by nodename 4451@pr-hdds-1553-ns4jj-1589673268
2019-08-28 06:27:32,249 INFO  storage.RaftStorage (RaftStorage.java:format(72)) - Storage directory /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler27ea89cd-c382-4116-a03e-f01e9912aa0f/ratis/99f6f974-ef27-4956-874e-38a4fe0cff9b has been successfully formatted.
2019-08-28 06:27:32,252 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(226)) - group-38A4FE0CFF9B: The snapshot info is null. Setting the last applied indexto:(t:0, i:~)
2019-08-28 06:27:32,252 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-08-28 06:27:32,254 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-08-28 06:27:32,259 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.purge.gap = 1000000 (custom)
2019-08-28 06:27:32,260 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-08-28 06:27:32,261 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 1048576 (custom)
2019-08-28 06:27:32,265 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-08-28 06:27:32,270 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(172)) - new 068e3ff2-057f-4c0d-a4f9-583d9feeb576-SegmentedRaftLogWorker:Storage Directory /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler27ea89cd-c382-4116-a03e-f01e9912aa0f/ratis/99f6f974-ef27-4956-874e-38a4fe0cff9b for RaftStorage:Storage Directory /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler27ea89cd-c382-4116-a03e-f01e9912aa0f/ratis/99f6f974-ef27-4956-874e-38a4fe0cff9b
2019-08-28 06:27:32,282 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-08-28 06:27:32,282 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-08-28 06:27:32,287 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 1048576 (custom)
2019-08-28 06:27:32,419 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-08-28 06:27:32,420 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-08-28 06:27:32,421 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-08-28 06:27:32,423 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-08-28 06:27:32,423 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-08-28 06:27:32,424 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-08-28 06:27:32,439 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-08-28 06:27:32,446 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(132)) - 068e3ff2-057f-4c0d-a4f9-583d9feeb576-SegmentedRaftLogWorker:Storage Directory /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler27ea89cd-c382-4116-a03e-f01e9912aa0f/ratis/99f6f974-ef27-4956-874e-38a4fe0cff9b: flushIndex: setUnconditionally 0 -> -1
2019-08-28 06:27:32,452 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-08-28 06:27:32,454 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-08-28 06:27:32,454 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-08-28 06:27:32,482 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(180)) - 068e3ff2-057f-4c0d-a4f9-583d9feeb576: start group-38A4FE0CFF9B
2019-08-28 06:27:32,483 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(171)) - 068e3ff2-057f-4c0d-a4f9-583d9feeb576:group-38A4FE0CFF9B changes role from null to FOLLOWER at term 0 for startAsFollower
2019-08-28 06:27:32,485 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 068e3ff2-057f-4c0d-a4f9-583d9feeb576: start FollowerState
2019-08-28 06:27:32,487 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-38A4FE0CFF9B,id=068e3ff2-057f-4c0d-a4f9-583d9feeb576
2019-08-28 06:27:37,606 INFO  impl.FollowerState (FollowerState.java:run(106)) - 068e3ff2-057f-4c0d-a4f9-583d9feeb576:group-38A4FE0CFF9B changes to CANDIDATE, lastRpcTime:5121, electionTimeout:5120ms
2019-08-28 06:27:37,606 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 068e3ff2-057f-4c0d-a4f9-583d9feeb576: shutdown FollowerState
2019-08-28 06:27:37,607 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(171)) - 068e3ff2-057f-4c0d-a4f9-583d9feeb576:group-38A4FE0CFF9B changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-08-28 06:27:37,610 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 068e3ff2-057f-4c0d-a4f9-583d9feeb576: start LeaderElection
2019-08-28 06:27:41,075 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - 068e3ff2-057f-4c0d-a4f9-583d9feeb576:group-38A4FE0CFF9B:LeaderElection1: begin an election at term 1 for -1: [068e3ff2-057f-4c0d-a4f9-583d9feeb576:127.0.0.1:42967], old=null
2019-08-28 06:27:41,077 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - 068e3ff2-057f-4c0d-a4f9-583d9feeb576: shutdown LeaderElection
2019-08-28 06:27:41,078 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(171)) - 068e3ff2-057f-4c0d-a4f9-583d9feeb576:group-38A4FE0CFF9B changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-08-28 06:27:41,078 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - 068e3ff2-057f-4c0d-a4f9-583d9feeb576:group-38A4FE0CFF9B change Leader from null to 068e3ff2-057f-4c0d-a4f9-583d9feeb576 at term 1 for becomeLeader, leader elected after 8825ms
2019-08-28 06:27:41,085 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-08-28 06:27:41,085 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-08-28 06:27:41,088 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.write.element-limit = 4096 (default)
2019-08-28 06:27:41,091 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-08-28 06:27:41,091 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-08-28 06:27:41,093 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.element-limit = 65536 (default)
2019-08-28 06:27:41,103 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 068e3ff2-057f-4c0d-a4f9-583d9feeb576: start LeaderState
2019-08-28 06:27:41,124 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(380)) - 068e3ff2-057f-4c0d-a4f9-583d9feeb576-SegmentedRaftLogWorker:Storage Directory /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler27ea89cd-c382-4116-a03e-f01e9912aa0f/ratis/99f6f974-ef27-4956-874e-38a4fe0cff9b: Starting segment from index:0
2019-08-28 06:27:41,133 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - 068e3ff2-057f-4c0d-a4f9-583d9feeb576:group-38A4FE0CFF9B set configuration 0: [068e3ff2-057f-4c0d-a4f9-583d9feeb576:127.0.0.1:42967], old=null at 0
2019-08-28 06:27:42,593 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-08-28 06:27:42,594 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - 068e3ff2-057f-4c0d-a4f9-583d9feeb576: close
2019-08-28 06:27:42,596 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(245)) - 068e3ff2-057f-4c0d-a4f9-583d9feeb576: shutdown group-38A4FE0CFF9B
2019-08-28 06:27:42,597 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-38A4FE0CFF9B,id=068e3ff2-057f-4c0d-a4f9-583d9feeb576
2019-08-28 06:27:42,597 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - 068e3ff2-057f-4c0d-a4f9-583d9feeb576: shutdown LeaderState
2019-08-28 06:27:42,598 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(202)) - 068e3ff2-057f-4c0d-a4f9-583d9feeb576-PendingRequests: sendNotLeaderResponses
2019-08-28 06:27:42,600 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(115)) - StateMachineUpdater:068e3ff2-057f-4c0d-a4f9-583d9feeb576:group-38A4FE0CFF9B: set stopIndex = -1
2019-08-28 06:27:42,601 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - 068e3ff2-057f-4c0d-a4f9-583d9feeb576:group-38A4FE0CFF9B closes. The last applied log index is -1
2019-08-28 06:27:45,446 WARN  segmented.SegmentedRaftLogOutputStream (SegmentedRaftLogOutputStream.java:<init>(77)) - Hit IOException while creating log segment /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler27ea89cd-c382-4116-a03e-f01e9912aa0f/ratis/99f6f974-ef27-4956-874e-38a4fe0cff9b/current/log_inprogress_0, delete the partial file.
2019-08-28 06:27:45,454 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(228)) - 068e3ff2-057f-4c0d-a4f9-583d9feeb576-SegmentedRaftLogWorker:Storage Directory /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler27ea89cd-c382-4116-a03e-f01e9912aa0f/ratis/99f6f974-ef27-4956-874e-38a4fe0cff9b close()
2019-08-28 06:27:45,455 INFO  server.GrpcService (GrpcService.java:closeImpl(155)) - 068e3ff2-057f-4c0d-a4f9-583d9feeb576: shutdown server with port 42967 now
2019-08-28 06:27:45,461 INFO  server.GrpcService (GrpcService.java:closeImpl(163)) - 068e3ff2-057f-4c0d-a4f9-583d9feeb576: shutdown server with port 42967 successfully
2019-08-28 06:27:45,463 INFO  utils.BackgroundService (BackgroundService.java:shutdown(148)) - Shutting down service BlockDeletingService
2019-08-28 06:27:45,468 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-08-28 06:27:45,526 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler56fc96fc-f433-4d5e-bc33-f9359a7a5513/hdds of  storage type : DISK and capacity : 1482555576320
2019-08-28 06:27:45,527 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler56fc96fc-f433-4d5e-bc33-f9359a7a5513/hdds to VolumeSet
2019-08-28 06:27:45,528 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@5bca7664
2019-08-28 06:27:45,529 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@5bca7664
2019-08-28 06:27:45,551 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-08-28 06:27:45,552 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-08-28 06:27:45,553 INFO  grpc.GrpcFactory (GrpcFactory.java:checkPooledByteBufAllocatorUseCacheForAllThreads(45)) - PERFORMANCE WARNING: useCacheForAllThreads is true that may cause Netty to create a lot garbage objects and, as a result, trigger GC.
	It is recommended to disable useCacheForAllThreads by setting -Dorg.apache.ratis.thirdparty.io.netty.allocator.useCacheForAllThreads=false in command line.
2019-08-28 06:27:45,553 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 0 (default)
2019-08-28 06:27:45,554 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-08-28 06:27:45,554 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-08-28 06:27:45,554 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-08-28 06:27:45,555 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-08-28 06:27:45,559 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler56fc96fc-f433-4d5e-bc33-f9359a7a5513/ratis] (custom)
2019-08-28 06:27:45,560 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-08-28 06:27:45,560 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-08-28 06:27:45,560 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(404)) - Starting XceiverServerRatis 7ae0daa3-3958-410f-ae5b-cc60634c81f4 at port 0
2019-08-28 06:27:45,567 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - 7ae0daa3-3958-410f-ae5b-cc60634c81f4: start RPC server
2019-08-28 06:27:45,571 INFO  server.GrpcService (GrpcService.java:startImpl(149)) - 7ae0daa3-3958-410f-ae5b-cc60634c81f4: GrpcService started, listening on 0.0.0.0/0.0.0.0:41908
2019-08-28 06:27:45,571 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(414)) - XceiverServerRatis 7ae0daa3-3958-410f-ae5b-cc60634c81f4 is started using port 41908
2019-08-28 06:27:45,573 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:start(161)) - XceiverServerGrpc 7ae0daa3-3958-410f-ae5b-cc60634c81f4 is started using port 35254
2019-08-28 06:27:45,593 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - 7ae0daa3-3958-410f-ae5b-cc60634c81f4: addNew group-F4C173F1C894:[7ae0daa3-3958-410f-ae5b-cc60634c81f4:127.0.0.1:41908] returns group-F4C173F1C894:java.util.concurrent.CompletableFuture@3bb5fbbc[Not completed]
2019-08-28 06:27:45,596 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(93)) - 7ae0daa3-3958-410f-ae5b-cc60634c81f4: new RaftServerImpl for group-F4C173F1C894:[7ae0daa3-3958-410f-ae5b-cc60634c81f4:127.0.0.1:41908] with ContainerStateMachine:uninitialized
2019-08-28 06:27:45,597 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 5s (custom)
2019-08-28 06:27:45,597 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 5200ms (custom)
2019-08-28 06:27:45,598 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-08-28 06:27:45,598 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.sleep.deviation.threshold = 300 (default)
2019-08-28 06:27:45,598 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = false (custom)
2019-08-28 06:27:45,598 INFO  impl.RaftServerImpl (ServerState.java:<init>(105)) - 7ae0daa3-3958-410f-ae5b-cc60634c81f4:group-F4C173F1C894 ConfigurationManager, init=-1: [7ae0daa3-3958-410f-ae5b-cc60634c81f4:127.0.0.1:41908], old=null, confs=<EMPTY_MAP>
2019-08-28 06:27:45,599 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler56fc96fc-f433-4d5e-bc33-f9359a7a5513/ratis] (custom)
2019-08-28 06:27:45,599 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler56fc96fc-f433-4d5e-bc33-f9359a7a5513/ratis/167e0072-2a13-468a-9328-f4c173f1c894 does not exist. Creating ...
2019-08-28 06:27:45,613 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler56fc96fc-f433-4d5e-bc33-f9359a7a5513/ratis/167e0072-2a13-468a-9328-f4c173f1c894/in_use.lock acquired by nodename 4451@pr-hdds-1553-ns4jj-1589673268
2019-08-28 06:27:45,620 INFO  storage.RaftStorage (RaftStorage.java:format(72)) - Storage directory /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler56fc96fc-f433-4d5e-bc33-f9359a7a5513/ratis/167e0072-2a13-468a-9328-f4c173f1c894 has been successfully formatted.
2019-08-28 06:27:45,621 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(226)) - group-F4C173F1C894: The snapshot info is null. Setting the last applied indexto:(t:0, i:~)
2019-08-28 06:27:45,621 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-08-28 06:27:45,621 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-08-28 06:27:45,622 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.purge.gap = 1000000 (custom)
2019-08-28 06:27:45,622 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-08-28 06:27:45,622 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 1048576 (custom)
2019-08-28 06:27:45,622 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-08-28 06:27:45,623 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(172)) - new 7ae0daa3-3958-410f-ae5b-cc60634c81f4-SegmentedRaftLogWorker:Storage Directory /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler56fc96fc-f433-4d5e-bc33-f9359a7a5513/ratis/167e0072-2a13-468a-9328-f4c173f1c894 for RaftStorage:Storage Directory /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler56fc96fc-f433-4d5e-bc33-f9359a7a5513/ratis/167e0072-2a13-468a-9328-f4c173f1c894
2019-08-28 06:27:45,623 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-08-28 06:27:45,623 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-08-28 06:27:45,624 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 1048576 (custom)
2019-08-28 06:27:45,624 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-08-28 06:27:45,624 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-08-28 06:27:45,624 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-08-28 06:27:45,624 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-08-28 06:27:45,625 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-08-28 06:27:45,625 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-08-28 06:27:45,625 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-08-28 06:27:45,626 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(132)) - 7ae0daa3-3958-410f-ae5b-cc60634c81f4-SegmentedRaftLogWorker:Storage Directory /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler56fc96fc-f433-4d5e-bc33-f9359a7a5513/ratis/167e0072-2a13-468a-9328-f4c173f1c894: flushIndex: setUnconditionally 0 -> -1
2019-08-28 06:27:45,626 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-08-28 06:27:45,627 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-08-28 06:27:45,627 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-08-28 06:27:45,627 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(180)) - 7ae0daa3-3958-410f-ae5b-cc60634c81f4: start group-F4C173F1C894
2019-08-28 06:27:45,628 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(171)) - 7ae0daa3-3958-410f-ae5b-cc60634c81f4:group-F4C173F1C894 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-08-28 06:27:45,628 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 7ae0daa3-3958-410f-ae5b-cc60634c81f4: start FollowerState
2019-08-28 06:27:45,628 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-F4C173F1C894,id=7ae0daa3-3958-410f-ae5b-cc60634c81f4
2019-08-28 06:27:50,771 INFO  impl.FollowerState (FollowerState.java:run(106)) - 7ae0daa3-3958-410f-ae5b-cc60634c81f4:group-F4C173F1C894 changes to CANDIDATE, lastRpcTime:5142, electionTimeout:5142ms
2019-08-28 06:27:50,771 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 7ae0daa3-3958-410f-ae5b-cc60634c81f4: shutdown FollowerState
2019-08-28 06:27:50,772 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(171)) - 7ae0daa3-3958-410f-ae5b-cc60634c81f4:group-F4C173F1C894 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-08-28 06:27:50,772 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 7ae0daa3-3958-410f-ae5b-cc60634c81f4: start LeaderElection
2019-08-28 06:27:50,801 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - 7ae0daa3-3958-410f-ae5b-cc60634c81f4:group-F4C173F1C894:LeaderElection2: begin an election at term 1 for -1: [7ae0daa3-3958-410f-ae5b-cc60634c81f4:127.0.0.1:41908], old=null
2019-08-28 06:27:50,802 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - 7ae0daa3-3958-410f-ae5b-cc60634c81f4: shutdown LeaderElection
2019-08-28 06:27:50,802 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(171)) - 7ae0daa3-3958-410f-ae5b-cc60634c81f4:group-F4C173F1C894 changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-08-28 06:27:50,802 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - 7ae0daa3-3958-410f-ae5b-cc60634c81f4:group-F4C173F1C894 change Leader from null to 7ae0daa3-3958-410f-ae5b-cc60634c81f4 at term 1 for becomeLeader, leader elected after 5181ms
2019-08-28 06:27:50,803 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-08-28 06:27:50,803 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-08-28 06:27:50,803 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.write.element-limit = 4096 (default)
2019-08-28 06:27:50,804 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-08-28 06:27:50,804 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-08-28 06:27:50,804 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.element-limit = 65536 (default)
2019-08-28 06:27:50,805 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 7ae0daa3-3958-410f-ae5b-cc60634c81f4: start LeaderState
2019-08-28 06:27:50,806 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(380)) - 7ae0daa3-3958-410f-ae5b-cc60634c81f4-SegmentedRaftLogWorker:Storage Directory /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler56fc96fc-f433-4d5e-bc33-f9359a7a5513/ratis/167e0072-2a13-468a-9328-f4c173f1c894: Starting segment from index:0
2019-08-28 06:27:50,807 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - 7ae0daa3-3958-410f-ae5b-cc60634c81f4:group-F4C173F1C894 set configuration 0: [7ae0daa3-3958-410f-ae5b-cc60634c81f4:127.0.0.1:41908], old=null at 0
2019-08-28 06:27:50,856 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(569)) - 7ae0daa3-3958-410f-ae5b-cc60634c81f4-SegmentedRaftLogWorker:Storage Directory /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler56fc96fc-f433-4d5e-bc33-f9359a7a5513/ratis/167e0072-2a13-468a-9328-f4c173f1c894: created new log segment /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler56fc96fc-f433-4d5e-bc33-f9359a7a5513/ratis/167e0072-2a13-468a-9328-f4c173f1c894/current/log_inprogress_0
2019-08-28 06:27:56,071 WARN  util.NativeCodeLoader (NativeCodeLoader.java:<clinit>(60)) - Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
2019-08-28 06:27:56,209 INFO  interfaces.Container (KeyValueContainer.java:flushAndSyncDB(382)) - Container 3271882658511566175 is synced with bcsId 0.
2019-08-28 06:27:56,210 INFO  interfaces.Container (KeyValueContainer.java:flushAndSyncDB(382)) - Container 3271882658511566175 is synced with bcsId 0.
2019-08-28 06:27:56,225 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-08-28 06:27:56,226 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - 7ae0daa3-3958-410f-ae5b-cc60634c81f4: close
2019-08-28 06:27:56,226 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(245)) - 7ae0daa3-3958-410f-ae5b-cc60634c81f4: shutdown group-F4C173F1C894
2019-08-28 06:27:56,227 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-F4C173F1C894,id=7ae0daa3-3958-410f-ae5b-cc60634c81f4
2019-08-28 06:27:56,228 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - 7ae0daa3-3958-410f-ae5b-cc60634c81f4: shutdown LeaderState
2019-08-28 06:27:56,228 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(202)) - 7ae0daa3-3958-410f-ae5b-cc60634c81f4-PendingRequests: sendNotLeaderResponses
2019-08-28 06:27:56,230 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(115)) - StateMachineUpdater:7ae0daa3-3958-410f-ae5b-cc60634c81f4:group-F4C173F1C894: set stopIndex = 2
2019-08-28 06:27:56,230 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(283)) - group-F4C173F1C894: Taking a snapshot at:(t:1, i:2) file /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler56fc96fc-f433-4d5e-bc33-f9359a7a5513/ratis/167e0072-2a13-468a-9328-f4c173f1c894/sm/snapshot.1_2
2019-08-28 06:27:56,250 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(294)) - group-F4C173F1C894: Finished taking a snapshot at:(t:1, i:2) file:/workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler56fc96fc-f433-4d5e-bc33-f9359a7a5513/ratis/167e0072-2a13-468a-9328-f4c173f1c894/sm/snapshot.1_2 time:20
2019-08-28 06:27:56,250 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(242)) - StateMachineUpdater:7ae0daa3-3958-410f-ae5b-cc60634c81f4:group-F4C173F1C894: Took a snapshot at index 2
2019-08-28 06:27:56,250 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(80)) - StateMachineUpdater:7ae0daa3-3958-410f-ae5b-cc60634c81f4:group-F4C173F1C894: snapshotIndex: updateIncreasingly -1 -> 2
2019-08-28 06:27:56,259 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - 7ae0daa3-3958-410f-ae5b-cc60634c81f4:group-F4C173F1C894 closes. The last applied log index is 2
2019-08-28 06:27:56,261 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(313)) - 7ae0daa3-3958-410f-ae5b-cc60634c81f4-SegmentedRaftLogWorker:Storage Directory /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler56fc96fc-f433-4d5e-bc33-f9359a7a5513/ratis/167e0072-2a13-468a-9328-f4c173f1c894 was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-08-28 06:27:56,262 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(228)) - 7ae0daa3-3958-410f-ae5b-cc60634c81f4-SegmentedRaftLogWorker:Storage Directory /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler56fc96fc-f433-4d5e-bc33-f9359a7a5513/ratis/167e0072-2a13-468a-9328-f4c173f1c894 close()
2019-08-28 06:27:56,263 INFO  server.GrpcService (GrpcService.java:closeImpl(155)) - 7ae0daa3-3958-410f-ae5b-cc60634c81f4: shutdown server with port 41908 now
2019-08-28 06:27:56,266 INFO  server.GrpcService (GrpcService.java:closeImpl(163)) - 7ae0daa3-3958-410f-ae5b-cc60634c81f4: shutdown server with port 41908 successfully
2019-08-28 06:27:56,273 INFO  utils.BackgroundService (BackgroundService.java:shutdown(148)) - Shutting down service BlockDeletingService
2019-08-28 06:27:56,276 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-08-28 06:27:56,321 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler45d9ce6d-683f-49fc-9b62-fff844d66553/hdds of  storage type : DISK and capacity : 1482555576320
2019-08-28 06:27:56,322 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler45d9ce6d-683f-49fc-9b62-fff844d66553/hdds to VolumeSet
2019-08-28 06:27:56,322 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@26a2f7f9
2019-08-28 06:27:56,323 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@26a2f7f9
2019-08-28 06:27:56,340 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-08-28 06:27:56,341 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-08-28 06:27:56,341 INFO  grpc.GrpcFactory (GrpcFactory.java:checkPooledByteBufAllocatorUseCacheForAllThreads(45)) - PERFORMANCE WARNING: useCacheForAllThreads is true that may cause Netty to create a lot garbage objects and, as a result, trigger GC.
	It is recommended to disable useCacheForAllThreads by setting -Dorg.apache.ratis.thirdparty.io.netty.allocator.useCacheForAllThreads=false in command line.
2019-08-28 06:27:56,341 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 0 (default)
2019-08-28 06:27:56,341 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-08-28 06:27:56,342 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-08-28 06:27:56,342 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-08-28 06:27:56,342 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-08-28 06:27:56,343 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler45d9ce6d-683f-49fc-9b62-fff844d66553/ratis] (custom)
2019-08-28 06:27:56,343 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-08-28 06:27:56,343 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-08-28 06:27:56,344 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(404)) - Starting XceiverServerRatis 956a78de-0268-4e62-a6dc-23a4af6bd873 at port 0
2019-08-28 06:27:56,349 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - 956a78de-0268-4e62-a6dc-23a4af6bd873: start RPC server
2019-08-28 06:27:56,351 INFO  server.GrpcService (GrpcService.java:startImpl(149)) - 956a78de-0268-4e62-a6dc-23a4af6bd873: GrpcService started, listening on 0.0.0.0/0.0.0.0:35638
2019-08-28 06:27:56,351 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(414)) - XceiverServerRatis 956a78de-0268-4e62-a6dc-23a4af6bd873 is started using port 35638
2019-08-28 06:27:56,352 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:start(161)) - XceiverServerGrpc 956a78de-0268-4e62-a6dc-23a4af6bd873 is started using port 35988
2019-08-28 06:27:56,363 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - 956a78de-0268-4e62-a6dc-23a4af6bd873: addNew group-36410B1C163E:[956a78de-0268-4e62-a6dc-23a4af6bd873:127.0.0.1:35638] returns group-36410B1C163E:java.util.concurrent.CompletableFuture@5629b06c[Not completed]
2019-08-28 06:27:56,364 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(93)) - 956a78de-0268-4e62-a6dc-23a4af6bd873: new RaftServerImpl for group-36410B1C163E:[956a78de-0268-4e62-a6dc-23a4af6bd873:127.0.0.1:35638] with ContainerStateMachine:uninitialized
2019-08-28 06:27:56,365 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 5s (custom)
2019-08-28 06:27:56,365 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 5200ms (custom)
2019-08-28 06:27:56,365 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-08-28 06:27:56,365 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.sleep.deviation.threshold = 300 (default)
2019-08-28 06:27:56,366 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = false (custom)
2019-08-28 06:27:56,366 INFO  impl.RaftServerImpl (ServerState.java:<init>(105)) - 956a78de-0268-4e62-a6dc-23a4af6bd873:group-36410B1C163E ConfigurationManager, init=-1: [956a78de-0268-4e62-a6dc-23a4af6bd873:127.0.0.1:35638], old=null, confs=<EMPTY_MAP>
2019-08-28 06:27:56,366 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler45d9ce6d-683f-49fc-9b62-fff844d66553/ratis] (custom)
2019-08-28 06:27:56,367 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler45d9ce6d-683f-49fc-9b62-fff844d66553/ratis/8c3766c4-f553-46de-bf52-36410b1c163e does not exist. Creating ...
2019-08-28 06:27:56,382 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler45d9ce6d-683f-49fc-9b62-fff844d66553/ratis/8c3766c4-f553-46de-bf52-36410b1c163e/in_use.lock acquired by nodename 4451@pr-hdds-1553-ns4jj-1589673268
2019-08-28 06:27:56,395 INFO  storage.RaftStorage (RaftStorage.java:format(72)) - Storage directory /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler45d9ce6d-683f-49fc-9b62-fff844d66553/ratis/8c3766c4-f553-46de-bf52-36410b1c163e has been successfully formatted.
2019-08-28 06:27:56,395 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(226)) - group-36410B1C163E: The snapshot info is null. Setting the last applied indexto:(t:0, i:~)
2019-08-28 06:27:56,395 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-08-28 06:27:56,396 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-08-28 06:27:56,396 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.purge.gap = 1000000 (custom)
2019-08-28 06:27:56,396 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-08-28 06:27:56,396 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 1048576 (custom)
2019-08-28 06:27:56,396 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-08-28 06:27:56,396 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(172)) - new 956a78de-0268-4e62-a6dc-23a4af6bd873-SegmentedRaftLogWorker:Storage Directory /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler45d9ce6d-683f-49fc-9b62-fff844d66553/ratis/8c3766c4-f553-46de-bf52-36410b1c163e for RaftStorage:Storage Directory /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler45d9ce6d-683f-49fc-9b62-fff844d66553/ratis/8c3766c4-f553-46de-bf52-36410b1c163e
2019-08-28 06:27:56,397 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-08-28 06:27:56,397 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-08-28 06:27:56,397 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 1048576 (custom)
2019-08-28 06:27:56,397 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-08-28 06:27:56,398 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-08-28 06:27:56,398 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-08-28 06:27:56,398 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-08-28 06:27:56,398 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-08-28 06:27:56,398 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-08-28 06:27:56,398 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-08-28 06:27:56,399 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(132)) - 956a78de-0268-4e62-a6dc-23a4af6bd873-SegmentedRaftLogWorker:Storage Directory /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler45d9ce6d-683f-49fc-9b62-fff844d66553/ratis/8c3766c4-f553-46de-bf52-36410b1c163e: flushIndex: setUnconditionally 0 -> -1
2019-08-28 06:27:56,399 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-08-28 06:27:56,399 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-08-28 06:27:56,399 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-08-28 06:27:56,400 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(180)) - 956a78de-0268-4e62-a6dc-23a4af6bd873: start group-36410B1C163E
2019-08-28 06:27:56,400 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(171)) - 956a78de-0268-4e62-a6dc-23a4af6bd873:group-36410B1C163E changes role from null to FOLLOWER at term 0 for startAsFollower
2019-08-28 06:27:56,400 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 956a78de-0268-4e62-a6dc-23a4af6bd873: start FollowerState
2019-08-28 06:27:56,401 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-36410B1C163E,id=956a78de-0268-4e62-a6dc-23a4af6bd873
2019-08-28 06:28:01,435 INFO  impl.FollowerState (FollowerState.java:run(106)) - 956a78de-0268-4e62-a6dc-23a4af6bd873:group-36410B1C163E changes to CANDIDATE, lastRpcTime:5034, electionTimeout:5034ms
2019-08-28 06:28:01,436 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - 956a78de-0268-4e62-a6dc-23a4af6bd873: shutdown FollowerState
2019-08-28 06:28:01,436 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(171)) - 956a78de-0268-4e62-a6dc-23a4af6bd873:group-36410B1C163E changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-08-28 06:28:01,436 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 956a78de-0268-4e62-a6dc-23a4af6bd873: start LeaderElection
2019-08-28 06:28:01,479 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - 956a78de-0268-4e62-a6dc-23a4af6bd873:group-36410B1C163E:LeaderElection3: begin an election at term 1 for -1: [956a78de-0268-4e62-a6dc-23a4af6bd873:127.0.0.1:35638], old=null
2019-08-28 06:28:01,479 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - 956a78de-0268-4e62-a6dc-23a4af6bd873: shutdown LeaderElection
2019-08-28 06:28:01,479 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(171)) - 956a78de-0268-4e62-a6dc-23a4af6bd873:group-36410B1C163E changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-08-28 06:28:01,479 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - 956a78de-0268-4e62-a6dc-23a4af6bd873:group-36410B1C163E change Leader from null to 956a78de-0268-4e62-a6dc-23a4af6bd873 at term 1 for becomeLeader, leader elected after 5083ms
2019-08-28 06:28:01,479 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-08-28 06:28:01,480 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-08-28 06:28:01,480 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.write.element-limit = 4096 (default)
2019-08-28 06:28:01,480 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-08-28 06:28:01,481 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-08-28 06:28:01,481 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.element-limit = 65536 (default)
2019-08-28 06:28:01,481 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - 956a78de-0268-4e62-a6dc-23a4af6bd873: start LeaderState
2019-08-28 06:28:01,482 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(380)) - 956a78de-0268-4e62-a6dc-23a4af6bd873-SegmentedRaftLogWorker:Storage Directory /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler45d9ce6d-683f-49fc-9b62-fff844d66553/ratis/8c3766c4-f553-46de-bf52-36410b1c163e: Starting segment from index:0
2019-08-28 06:28:01,484 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - 956a78de-0268-4e62-a6dc-23a4af6bd873:group-36410B1C163E set configuration 0: [956a78de-0268-4e62-a6dc-23a4af6bd873:127.0.0.1:35638], old=null at 0
2019-08-28 06:28:01,532 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(569)) - 956a78de-0268-4e62-a6dc-23a4af6bd873-SegmentedRaftLogWorker:Storage Directory /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler45d9ce6d-683f-49fc-9b62-fff844d66553/ratis/8c3766c4-f553-46de-bf52-36410b1c163e: created new log segment /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler45d9ce6d-683f-49fc-9b62-fff844d66553/ratis/8c3766c4-f553-46de-bf52-36410b1c163e/current/log_inprogress_0
2019-08-28 06:28:06,607 INFO  interfaces.Container (KeyValueContainer.java:flushAndSyncDB(382)) - Container 744421292593101968 is synced with bcsId 0.
2019-08-28 06:28:06,608 INFO  interfaces.Container (KeyValueContainer.java:flushAndSyncDB(382)) - Container 744421292593101968 is synced with bcsId 0.
2019-08-28 06:28:06,623 INFO  interfaces.Container (KeyValueContainer.java:flushAndSyncDB(382)) - Container 744421292593101968 is synced with bcsId 0.
2019-08-28 06:28:06,624 INFO  interfaces.Container (KeyValueContainer.java:flushAndSyncDB(382)) - Container 744421292593101968 is synced with bcsId 0.
2019-08-28 06:28:06,639 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-08-28 06:28:06,640 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - 956a78de-0268-4e62-a6dc-23a4af6bd873: close
2019-08-28 06:28:06,641 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(245)) - 956a78de-0268-4e62-a6dc-23a4af6bd873: shutdown group-36410B1C163E
2019-08-28 06:28:06,641 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-36410B1C163E,id=956a78de-0268-4e62-a6dc-23a4af6bd873
2019-08-28 06:28:06,642 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - 956a78de-0268-4e62-a6dc-23a4af6bd873: shutdown LeaderState
2019-08-28 06:28:06,643 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(202)) - 956a78de-0268-4e62-a6dc-23a4af6bd873-PendingRequests: sendNotLeaderResponses
2019-08-28 06:28:06,644 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(115)) - StateMachineUpdater:956a78de-0268-4e62-a6dc-23a4af6bd873:group-36410B1C163E: set stopIndex = 2
2019-08-28 06:28:06,645 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(283)) - group-36410B1C163E: Taking a snapshot at:(t:1, i:2) file /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler45d9ce6d-683f-49fc-9b62-fff844d66553/ratis/8c3766c4-f553-46de-bf52-36410b1c163e/sm/snapshot.1_2
2019-08-28 06:28:06,656 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(294)) - group-36410B1C163E: Finished taking a snapshot at:(t:1, i:2) file:/workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler45d9ce6d-683f-49fc-9b62-fff844d66553/ratis/8c3766c4-f553-46de-bf52-36410b1c163e/sm/snapshot.1_2 time:11
2019-08-28 06:28:06,656 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(242)) - StateMachineUpdater:956a78de-0268-4e62-a6dc-23a4af6bd873:group-36410B1C163E: Took a snapshot at index 2
2019-08-28 06:28:06,656 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(80)) - StateMachineUpdater:956a78de-0268-4e62-a6dc-23a4af6bd873:group-36410B1C163E: snapshotIndex: updateIncreasingly -1 -> 2
2019-08-28 06:28:06,657 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - 956a78de-0268-4e62-a6dc-23a4af6bd873:group-36410B1C163E closes. The last applied log index is 2
2019-08-28 06:28:06,658 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(313)) - 956a78de-0268-4e62-a6dc-23a4af6bd873-SegmentedRaftLogWorker:Storage Directory /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler45d9ce6d-683f-49fc-9b62-fff844d66553/ratis/8c3766c4-f553-46de-bf52-36410b1c163e was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-08-28 06:28:06,659 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(228)) - 956a78de-0268-4e62-a6dc-23a4af6bd873-SegmentedRaftLogWorker:Storage Directory /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler45d9ce6d-683f-49fc-9b62-fff844d66553/ratis/8c3766c4-f553-46de-bf52-36410b1c163e close()
2019-08-28 06:28:06,660 INFO  server.GrpcService (GrpcService.java:closeImpl(155)) - 956a78de-0268-4e62-a6dc-23a4af6bd873: shutdown server with port 35638 now
2019-08-28 06:28:06,662 INFO  server.GrpcService (GrpcService.java:closeImpl(163)) - 956a78de-0268-4e62-a6dc-23a4af6bd873: shutdown server with port 35638 successfully
2019-08-28 06:28:06,665 INFO  utils.BackgroundService (BackgroundService.java:shutdown(148)) - Shutting down service BlockDeletingService
2019-08-28 06:28:06,667 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-08-28 06:28:06,709 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerf93f9fb3-bc08-4ecd-9cdb-cbb8bd686708/hdds of  storage type : DISK and capacity : 1482555576320
2019-08-28 06:28:06,710 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerf93f9fb3-bc08-4ecd-9cdb-cbb8bd686708/hdds to VolumeSet
2019-08-28 06:28:06,710 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@70f31322
2019-08-28 06:28:06,711 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@70f31322
2019-08-28 06:28:06,727 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-08-28 06:28:06,727 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-08-28 06:28:06,728 INFO  grpc.GrpcFactory (GrpcFactory.java:checkPooledByteBufAllocatorUseCacheForAllThreads(45)) - PERFORMANCE WARNING: useCacheForAllThreads is true that may cause Netty to create a lot garbage objects and, as a result, trigger GC.
	It is recommended to disable useCacheForAllThreads by setting -Dorg.apache.ratis.thirdparty.io.netty.allocator.useCacheForAllThreads=false in command line.
2019-08-28 06:28:06,728 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 0 (default)
2019-08-28 06:28:06,728 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-08-28 06:28:06,728 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-08-28 06:28:06,729 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-08-28 06:28:06,729 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-08-28 06:28:06,729 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerf93f9fb3-bc08-4ecd-9cdb-cbb8bd686708/ratis] (custom)
2019-08-28 06:28:06,730 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-08-28 06:28:06,730 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-08-28 06:28:06,730 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(404)) - Starting XceiverServerRatis f853615c-45d0-442a-8847-0b1e01e83d85 at port 0
2019-08-28 06:28:06,764 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - f853615c-45d0-442a-8847-0b1e01e83d85: start RPC server
2019-08-28 06:28:06,767 INFO  server.GrpcService (GrpcService.java:startImpl(149)) - f853615c-45d0-442a-8847-0b1e01e83d85: GrpcService started, listening on 0.0.0.0/0.0.0.0:42429
2019-08-28 06:28:06,767 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(414)) - XceiverServerRatis f853615c-45d0-442a-8847-0b1e01e83d85 is started using port 42429
2019-08-28 06:28:06,769 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:start(161)) - XceiverServerGrpc f853615c-45d0-442a-8847-0b1e01e83d85 is started using port 36798
Aug 28, 2019 6:28:06 AM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=18, target=127.0.0.1:41908} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.<init>(GrpcClientProtocolClient.java:119)
	at org.apache.ratis.grpc.client.GrpcClientRpc.lambda$new$0(GrpcClientRpc.java:55)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.lambda$getProxy$0(PeerProxyMap.java:61)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:202)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:60)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:107)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:91)
	at org.apache.ratis.client.impl.RaftClientImpl.sendRequest(RaftClientImpl.java:279)
	at org.apache.ratis.client.impl.RaftClientImpl.groupAdd(RaftClientImpl.java:206)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.createContainer(TestCloseContainerCommandHandler.java:300)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.testCloseContainerViaStandalone(TestCloseContainerCommandHandler.java:112)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

Aug 28, 2019 6:28:06 AM org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference cleanQueue
SEVERE: *~*~*~ Channel ManagedChannelImpl{logId=29, target=127.0.0.1:35638} was not shutdown properly!!! ~*~*~*
    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.
java.lang.RuntimeException: ManagedChannel allocation site
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.<init>(ManagedChannelOrphanWrapper.java:103)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:53)
	at org.apache.ratis.thirdparty.io.grpc.internal.ManagedChannelOrphanWrapper.<init>(ManagedChannelOrphanWrapper.java:44)
	at org.apache.ratis.thirdparty.io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:411)
	at org.apache.ratis.grpc.client.GrpcClientProtocolClient.<init>(GrpcClientProtocolClient.java:119)
	at org.apache.ratis.grpc.client.GrpcClientRpc.lambda$new$0(GrpcClientRpc.java:55)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.lambda$getProxy$0(PeerProxyMap.java:61)
	at org.apache.ratis.util.LifeCycle.startAndTransition(LifeCycle.java:202)
	at org.apache.ratis.util.PeerProxyMap$PeerAndProxy.getProxy(PeerProxyMap.java:60)
	at org.apache.ratis.util.PeerProxyMap.getProxy(PeerProxyMap.java:107)
	at org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:91)
	at org.apache.ratis.client.impl.RaftClientImpl.sendRequest(RaftClientImpl.java:279)
	at org.apache.ratis.client.impl.RaftClientImpl.groupAdd(RaftClientImpl.java:206)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.createContainer(TestCloseContainerCommandHandler.java:300)
	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandler.testQuasiCloseToClose(TestCloseContainerCommandHandler.java:147)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)

2019-08-28 06:28:06,788 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - f853615c-45d0-442a-8847-0b1e01e83d85: addNew group-91188F134B65:[f853615c-45d0-442a-8847-0b1e01e83d85:127.0.0.1:42429] returns group-91188F134B65:java.util.concurrent.CompletableFuture@2cb45c1b[Not completed]
2019-08-28 06:28:06,790 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(93)) - f853615c-45d0-442a-8847-0b1e01e83d85: new RaftServerImpl for group-91188F134B65:[f853615c-45d0-442a-8847-0b1e01e83d85:127.0.0.1:42429] with ContainerStateMachine:uninitialized
2019-08-28 06:28:06,791 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 5s (custom)
2019-08-28 06:28:06,791 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 5200ms (custom)
2019-08-28 06:28:06,791 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-08-28 06:28:06,792 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.sleep.deviation.threshold = 300 (default)
2019-08-28 06:28:06,792 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = false (custom)
2019-08-28 06:28:06,792 INFO  impl.RaftServerImpl (ServerState.java:<init>(105)) - f853615c-45d0-442a-8847-0b1e01e83d85:group-91188F134B65 ConfigurationManager, init=-1: [f853615c-45d0-442a-8847-0b1e01e83d85:127.0.0.1:42429], old=null, confs=<EMPTY_MAP>
2019-08-28 06:28:06,792 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerf93f9fb3-bc08-4ecd-9cdb-cbb8bd686708/ratis] (custom)
2019-08-28 06:28:06,793 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerf93f9fb3-bc08-4ecd-9cdb-cbb8bd686708/ratis/5a3630c7-7039-48e7-885f-91188f134b65 does not exist. Creating ...
2019-08-28 06:28:06,808 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerf93f9fb3-bc08-4ecd-9cdb-cbb8bd686708/ratis/5a3630c7-7039-48e7-885f-91188f134b65/in_use.lock acquired by nodename 4451@pr-hdds-1553-ns4jj-1589673268
2019-08-28 06:28:06,821 INFO  storage.RaftStorage (RaftStorage.java:format(72)) - Storage directory /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerf93f9fb3-bc08-4ecd-9cdb-cbb8bd686708/ratis/5a3630c7-7039-48e7-885f-91188f134b65 has been successfully formatted.
2019-08-28 06:28:06,822 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(226)) - group-91188F134B65: The snapshot info is null. Setting the last applied indexto:(t:0, i:~)
2019-08-28 06:28:06,822 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-08-28 06:28:06,822 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-08-28 06:28:06,822 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.purge.gap = 1000000 (custom)
2019-08-28 06:28:06,822 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-08-28 06:28:06,823 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 1048576 (custom)
2019-08-28 06:28:06,823 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-08-28 06:28:06,823 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(172)) - new f853615c-45d0-442a-8847-0b1e01e83d85-SegmentedRaftLogWorker:Storage Directory /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerf93f9fb3-bc08-4ecd-9cdb-cbb8bd686708/ratis/5a3630c7-7039-48e7-885f-91188f134b65 for RaftStorage:Storage Directory /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerf93f9fb3-bc08-4ecd-9cdb-cbb8bd686708/ratis/5a3630c7-7039-48e7-885f-91188f134b65
2019-08-28 06:28:06,823 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-08-28 06:28:06,824 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-08-28 06:28:06,824 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 1048576 (custom)
2019-08-28 06:28:06,824 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-08-28 06:28:06,824 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-08-28 06:28:06,824 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-08-28 06:28:06,824 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-08-28 06:28:06,825 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-08-28 06:28:06,825 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-08-28 06:28:06,825 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-08-28 06:28:06,826 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(132)) - f853615c-45d0-442a-8847-0b1e01e83d85-SegmentedRaftLogWorker:Storage Directory /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerf93f9fb3-bc08-4ecd-9cdb-cbb8bd686708/ratis/5a3630c7-7039-48e7-885f-91188f134b65: flushIndex: setUnconditionally 0 -> -1
2019-08-28 06:28:06,826 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-08-28 06:28:06,826 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-08-28 06:28:06,826 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-08-28 06:28:06,827 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(180)) - f853615c-45d0-442a-8847-0b1e01e83d85: start group-91188F134B65
2019-08-28 06:28:06,827 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(171)) - f853615c-45d0-442a-8847-0b1e01e83d85:group-91188F134B65 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-08-28 06:28:06,827 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - f853615c-45d0-442a-8847-0b1e01e83d85: start FollowerState
2019-08-28 06:28:06,828 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-91188F134B65,id=f853615c-45d0-442a-8847-0b1e01e83d85
2019-08-28 06:28:11,968 INFO  impl.FollowerState (FollowerState.java:run(106)) - f853615c-45d0-442a-8847-0b1e01e83d85:group-91188F134B65 changes to CANDIDATE, lastRpcTime:5140, electionTimeout:5140ms
2019-08-28 06:28:11,968 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - f853615c-45d0-442a-8847-0b1e01e83d85: shutdown FollowerState
2019-08-28 06:28:11,969 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(171)) - f853615c-45d0-442a-8847-0b1e01e83d85:group-91188F134B65 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-08-28 06:28:11,969 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - f853615c-45d0-442a-8847-0b1e01e83d85: start LeaderElection
2019-08-28 06:28:12,010 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - f853615c-45d0-442a-8847-0b1e01e83d85:group-91188F134B65:LeaderElection4: begin an election at term 1 for -1: [f853615c-45d0-442a-8847-0b1e01e83d85:127.0.0.1:42429], old=null
2019-08-28 06:28:12,010 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - f853615c-45d0-442a-8847-0b1e01e83d85: shutdown LeaderElection
2019-08-28 06:28:12,010 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(171)) - f853615c-45d0-442a-8847-0b1e01e83d85:group-91188F134B65 changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-08-28 06:28:12,010 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - f853615c-45d0-442a-8847-0b1e01e83d85:group-91188F134B65 change Leader from null to f853615c-45d0-442a-8847-0b1e01e83d85 at term 1 for becomeLeader, leader elected after 5188ms
2019-08-28 06:28:12,011 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-08-28 06:28:12,011 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-08-28 06:28:12,011 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.write.element-limit = 4096 (default)
2019-08-28 06:28:12,011 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-08-28 06:28:12,011 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-08-28 06:28:12,012 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.element-limit = 65536 (default)
2019-08-28 06:28:12,012 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - f853615c-45d0-442a-8847-0b1e01e83d85: start LeaderState
2019-08-28 06:28:12,012 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(380)) - f853615c-45d0-442a-8847-0b1e01e83d85-SegmentedRaftLogWorker:Storage Directory /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerf93f9fb3-bc08-4ecd-9cdb-cbb8bd686708/ratis/5a3630c7-7039-48e7-885f-91188f134b65: Starting segment from index:0
2019-08-28 06:28:12,013 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - f853615c-45d0-442a-8847-0b1e01e83d85:group-91188F134B65 set configuration 0: [f853615c-45d0-442a-8847-0b1e01e83d85:127.0.0.1:42429], old=null at 0
2019-08-28 06:28:12,062 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(569)) - f853615c-45d0-442a-8847-0b1e01e83d85-SegmentedRaftLogWorker:Storage Directory /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerf93f9fb3-bc08-4ecd-9cdb-cbb8bd686708/ratis/5a3630c7-7039-48e7-885f-91188f134b65: created new log segment /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerf93f9fb3-bc08-4ecd-9cdb-cbb8bd686708/ratis/5a3630c7-7039-48e7-885f-91188f134b65/current/log_inprogress_0
2019-08-28 06:28:17,020 INFO  interfaces.Container (KeyValueContainer.java:flushAndSyncDB(382)) - Container 1183946550438292861 is synced with bcsId 0.
2019-08-28 06:28:17,020 INFO  interfaces.Container (KeyValueContainer.java:flushAndSyncDB(382)) - Container 1183946550438292861 is synced with bcsId 0.
2019-08-28 06:28:17,034 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-08-28 06:28:17,035 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - f853615c-45d0-442a-8847-0b1e01e83d85: close
2019-08-28 06:28:17,035 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(245)) - f853615c-45d0-442a-8847-0b1e01e83d85: shutdown group-91188F134B65
2019-08-28 06:28:17,035 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-91188F134B65,id=f853615c-45d0-442a-8847-0b1e01e83d85
2019-08-28 06:28:17,035 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - f853615c-45d0-442a-8847-0b1e01e83d85: shutdown LeaderState
2019-08-28 06:28:17,036 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(202)) - f853615c-45d0-442a-8847-0b1e01e83d85-PendingRequests: sendNotLeaderResponses
2019-08-28 06:28:17,037 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(115)) - StateMachineUpdater:f853615c-45d0-442a-8847-0b1e01e83d85:group-91188F134B65: set stopIndex = 2
2019-08-28 06:28:17,037 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(283)) - group-91188F134B65: Taking a snapshot at:(t:1, i:2) file /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerf93f9fb3-bc08-4ecd-9cdb-cbb8bd686708/ratis/5a3630c7-7039-48e7-885f-91188f134b65/sm/snapshot.1_2
2019-08-28 06:28:17,048 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(294)) - group-91188F134B65: Finished taking a snapshot at:(t:1, i:2) file:/workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerf93f9fb3-bc08-4ecd-9cdb-cbb8bd686708/ratis/5a3630c7-7039-48e7-885f-91188f134b65/sm/snapshot.1_2 time:10
2019-08-28 06:28:17,048 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(242)) - StateMachineUpdater:f853615c-45d0-442a-8847-0b1e01e83d85:group-91188F134B65: Took a snapshot at index 2
2019-08-28 06:28:17,048 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(80)) - StateMachineUpdater:f853615c-45d0-442a-8847-0b1e01e83d85:group-91188F134B65: snapshotIndex: updateIncreasingly -1 -> 2
2019-08-28 06:28:17,049 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - f853615c-45d0-442a-8847-0b1e01e83d85:group-91188F134B65 closes. The last applied log index is 2
2019-08-28 06:28:17,049 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(313)) - f853615c-45d0-442a-8847-0b1e01e83d85-SegmentedRaftLogWorker:Storage Directory /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerf93f9fb3-bc08-4ecd-9cdb-cbb8bd686708/ratis/5a3630c7-7039-48e7-885f-91188f134b65 was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-08-28 06:28:17,050 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(228)) - f853615c-45d0-442a-8847-0b1e01e83d85-SegmentedRaftLogWorker:Storage Directory /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerf93f9fb3-bc08-4ecd-9cdb-cbb8bd686708/ratis/5a3630c7-7039-48e7-885f-91188f134b65 close()
2019-08-28 06:28:17,051 INFO  server.GrpcService (GrpcService.java:closeImpl(155)) - f853615c-45d0-442a-8847-0b1e01e83d85: shutdown server with port 42429 now
2019-08-28 06:28:17,053 INFO  server.GrpcService (GrpcService.java:closeImpl(163)) - f853615c-45d0-442a-8847-0b1e01e83d85: shutdown server with port 42429 successfully
2019-08-28 06:28:17,054 INFO  utils.BackgroundService (BackgroundService.java:shutdown(148)) - Shutting down service BlockDeletingService
2019-08-28 06:28:17,055 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted
2019-08-28 06:28:17,087 INFO  volume.HddsVolume (HddsVolume.java:<init>(176)) - Creating Volume: /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerff630fac-9bd5-46e7-80d4-3b8afc2daa6e/hdds of  storage type : DISK and capacity : 1482555576320
2019-08-28 06:28:17,087 INFO  volume.VolumeSet (VolumeSet.java:initializeVolumeSet(170)) - Added Volume : /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerff630fac-9bd5-46e7-80d4-3b8afc2daa6e/hdds to VolumeSet
2019-08-28 06:28:17,087 INFO  volume.ThrottledAsyncChecker (ThrottledAsyncChecker.java:schedule(140)) - Scheduling a check for org.apache.hadoop.ozone.container.common.volume.HddsVolume@5ae95707
2019-08-28 06:28:17,088 INFO  volume.HddsVolumeChecker (HddsVolumeChecker.java:checkAllVolumes(203)) - Scheduled health check for volume org.apache.hadoop.ozone.container.common.volume.HddsVolume@5ae95707
2019-08-28 06:28:17,102 WARN  scm.HddsServerUtil (HddsServerUtil.java:getDefaultRatisDirectory(354)) - Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
2019-08-28 06:28:17,103 INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-08-28 06:28:17,103 INFO  grpc.GrpcFactory (GrpcFactory.java:checkPooledByteBufAllocatorUseCacheForAllThreads(45)) - PERFORMANCE WARNING: useCacheForAllThreads is true that may cause Netty to create a lot garbage objects and, as a result, trigger GC.
	It is recommended to disable useCacheForAllThreads by setting -Dorg.apache.ratis.thirdparty.io.netty.allocator.useCacheForAllThreads=false in command line.
2019-08-28 06:28:17,103 INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 0 (default)
2019-08-28 06:28:17,104 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-08-28 06:28:17,104 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-08-28 06:28:17,104 INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-08-28 06:28:17,104 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-08-28 06:28:17,105 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerff630fac-9bd5-46e7-80d4-3b8afc2daa6e/ratis] (custom)
2019-08-28 06:28:17,105 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:start(186)) - Attempting to start container services.
2019-08-28 06:28:17,105 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:startContainerScrub(160)) - Background container scrubber has been disabled by hdds.containerscrub.enabled
2019-08-28 06:28:17,106 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(404)) - Starting XceiverServerRatis e0233a78-b8be-4d5a-be64-04fb9cab47d4 at port 0
2019-08-28 06:28:17,111 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - e0233a78-b8be-4d5a-be64-04fb9cab47d4: start RPC server
2019-08-28 06:28:17,113 INFO  server.GrpcService (GrpcService.java:startImpl(149)) - e0233a78-b8be-4d5a-be64-04fb9cab47d4: GrpcService started, listening on 0.0.0.0/0.0.0.0:38710
2019-08-28 06:28:17,113 INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(414)) - XceiverServerRatis e0233a78-b8be-4d5a-be64-04fb9cab47d4 is started using port 38710
2019-08-28 06:28:17,114 INFO  server.XceiverServerGrpc (XceiverServerGrpc.java:start(161)) - XceiverServerGrpc e0233a78-b8be-4d5a-be64-04fb9cab47d4 is started using port 39322
2019-08-28 06:28:17,126 INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - e0233a78-b8be-4d5a-be64-04fb9cab47d4: addNew group-DFB76CB4CE07:[e0233a78-b8be-4d5a-be64-04fb9cab47d4:127.0.0.1:38710] returns group-DFB76CB4CE07:java.util.concurrent.CompletableFuture@52139502[Not completed]
2019-08-28 06:28:17,128 INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(93)) - e0233a78-b8be-4d5a-be64-04fb9cab47d4: new RaftServerImpl for group-DFB76CB4CE07:[e0233a78-b8be-4d5a-be64-04fb9cab47d4:127.0.0.1:38710] with ContainerStateMachine:uninitialized
2019-08-28 06:28:17,129 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 5s (custom)
2019-08-28 06:28:17,129 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 5200ms (custom)
2019-08-28 06:28:17,129 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-08-28 06:28:17,129 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.sleep.deviation.threshold = 300 (default)
2019-08-28 06:28:17,129 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = false (custom)
2019-08-28 06:28:17,130 INFO  impl.RaftServerImpl (ServerState.java:<init>(105)) - e0233a78-b8be-4d5a-be64-04fb9cab47d4:group-DFB76CB4CE07 ConfigurationManager, init=-1: [e0233a78-b8be-4d5a-be64-04fb9cab47d4:127.0.0.1:38710], old=null, confs=<EMPTY_MAP>
2019-08-28 06:28:17,130 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerff630fac-9bd5-46e7-80d4-3b8afc2daa6e/ratis] (custom)
2019-08-28 06:28:17,130 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerff630fac-9bd5-46e7-80d4-3b8afc2daa6e/ratis/e30f8b5a-7e3b-4ae0-a2d8-dfb76cb4ce07 does not exist. Creating ...
2019-08-28 06:28:17,155 INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerff630fac-9bd5-46e7-80d4-3b8afc2daa6e/ratis/e30f8b5a-7e3b-4ae0-a2d8-dfb76cb4ce07/in_use.lock acquired by nodename 4451@pr-hdds-1553-ns4jj-1589673268
2019-08-28 06:28:17,169 INFO  storage.RaftStorage (RaftStorage.java:format(72)) - Storage directory /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerff630fac-9bd5-46e7-80d4-3b8afc2daa6e/ratis/e30f8b5a-7e3b-4ae0-a2d8-dfb76cb4ce07 has been successfully formatted.
2019-08-28 06:28:17,169 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(226)) - group-DFB76CB4CE07: The snapshot info is null. Setting the last applied indexto:(t:0, i:~)
2019-08-28 06:28:17,169 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.leader.election.timeout = 120s (custom)
2019-08-28 06:28:17,169 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-08-28 06:28:17,169 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.purge.gap = 1000000 (custom)
2019-08-28 06:28:17,169 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-08-28 06:28:17,170 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 1048576 (custom)
2019-08-28 06:28:17,170 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-08-28 06:28:17,170 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(172)) - new e0233a78-b8be-4d5a-be64-04fb9cab47d4-SegmentedRaftLogWorker:Storage Directory /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerff630fac-9bd5-46e7-80d4-3b8afc2daa6e/ratis/e30f8b5a-7e3b-4ae0-a2d8-dfb76cb4ce07 for RaftStorage:Storage Directory /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerff630fac-9bd5-46e7-80d4-3b8afc2daa6e/ratis/e30f8b5a-7e3b-4ae0-a2d8-dfb76cb4ce07
2019-08-28 06:28:17,170 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-08-28 06:28:17,170 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-08-28 06:28:17,170 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 1048576 (custom)
2019-08-28 06:28:17,171 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-08-28 06:28:17,171 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-08-28 06:28:17,171 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-08-28 06:28:17,171 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-08-28 06:28:17,171 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-08-28 06:28:17,171 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-08-28 06:28:17,171 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-08-28 06:28:17,172 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(132)) - e0233a78-b8be-4d5a-be64-04fb9cab47d4-SegmentedRaftLogWorker:Storage Directory /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerff630fac-9bd5-46e7-80d4-3b8afc2daa6e/ratis/e30f8b5a-7e3b-4ae0-a2d8-dfb76cb4ce07: flushIndex: setUnconditionally 0 -> -1
2019-08-28 06:28:17,172 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-08-28 06:28:17,172 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-08-28 06:28:17,172 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-08-28 06:28:17,172 INFO  impl.RaftServerImpl (RaftServerImpl.java:start(180)) - e0233a78-b8be-4d5a-be64-04fb9cab47d4: start group-DFB76CB4CE07
2019-08-28 06:28:17,173 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(171)) - e0233a78-b8be-4d5a-be64-04fb9cab47d4:group-DFB76CB4CE07 changes role from null to FOLLOWER at term 0 for startAsFollower
2019-08-28 06:28:17,173 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - e0233a78-b8be-4d5a-be64-04fb9cab47d4: start FollowerState
2019-08-28 06:28:17,173 INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-DFB76CB4CE07,id=e0233a78-b8be-4d5a-be64-04fb9cab47d4
2019-08-28 06:28:22,197 INFO  impl.FollowerState (FollowerState.java:run(106)) - e0233a78-b8be-4d5a-be64-04fb9cab47d4:group-DFB76CB4CE07 changes to CANDIDATE, lastRpcTime:5024, electionTimeout:5024ms
2019-08-28 06:28:22,198 INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - e0233a78-b8be-4d5a-be64-04fb9cab47d4: shutdown FollowerState
2019-08-28 06:28:22,198 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(171)) - e0233a78-b8be-4d5a-be64-04fb9cab47d4:group-DFB76CB4CE07 changes role from FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2019-08-28 06:28:22,198 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - e0233a78-b8be-4d5a-be64-04fb9cab47d4: start LeaderElection
2019-08-28 06:28:22,216 INFO  impl.LeaderElection (LeaderElection.java:askForVotes(181)) - e0233a78-b8be-4d5a-be64-04fb9cab47d4:group-DFB76CB4CE07:LeaderElection5: begin an election at term 1 for -1: [e0233a78-b8be-4d5a-be64-04fb9cab47d4:127.0.0.1:38710], old=null
2019-08-28 06:28:22,216 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(134)) - e0233a78-b8be-4d5a-be64-04fb9cab47d4: shutdown LeaderElection
2019-08-28 06:28:22,216 INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(171)) - e0233a78-b8be-4d5a-be64-04fb9cab47d4:group-DFB76CB4CE07 changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2019-08-28 06:28:22,216 INFO  impl.RaftServerImpl (ServerState.java:setLeader(263)) - e0233a78-b8be-4d5a-be64-04fb9cab47d4:group-DFB76CB4CE07 change Leader from null to e0233a78-b8be-4d5a-be64-04fb9cab47d4 at term 1 for becomeLeader, leader elected after 5047ms
2019-08-28 06:28:22,217 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.staging.catchup.gap = 1000 (default)
2019-08-28 06:28:22,217 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.sleep.time = 25ms (default)
2019-08-28 06:28:22,217 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.write.element-limit = 4096 (default)
2019-08-28 06:28:22,217 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout = 10s (default)
2019-08-28 06:28:22,217 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.timeout.denomination = 1s (default)
2019-08-28 06:28:22,217 INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.watch.element-limit = 65536 (default)
2019-08-28 06:28:22,218 INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - e0233a78-b8be-4d5a-be64-04fb9cab47d4: start LeaderState
2019-08-28 06:28:22,218 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(380)) - e0233a78-b8be-4d5a-be64-04fb9cab47d4-SegmentedRaftLogWorker:Storage Directory /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerff630fac-9bd5-46e7-80d4-3b8afc2daa6e/ratis/e30f8b5a-7e3b-4ae0-a2d8-dfb76cb4ce07: Starting segment from index:0
2019-08-28 06:28:22,219 INFO  impl.RaftServerImpl (ServerState.java:setRaftConf(361)) - e0233a78-b8be-4d5a-be64-04fb9cab47d4:group-DFB76CB4CE07 set configuration 0: [e0233a78-b8be-4d5a-be64-04fb9cab47d4:127.0.0.1:38710], old=null at 0
2019-08-28 06:28:22,255 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(569)) - e0233a78-b8be-4d5a-be64-04fb9cab47d4-SegmentedRaftLogWorker:Storage Directory /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerff630fac-9bd5-46e7-80d4-3b8afc2daa6e/ratis/e30f8b5a-7e3b-4ae0-a2d8-dfb76cb4ce07: created new log segment /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerff630fac-9bd5-46e7-80d4-3b8afc2daa6e/ratis/e30f8b5a-7e3b-4ae0-a2d8-dfb76cb4ce07/current/log_inprogress_0
2019-08-28 06:28:27,348 INFO  interfaces.Container (KeyValueContainer.java:flushAndSyncDB(382)) - Container 5598807415576091053 is synced with bcsId 0.
2019-08-28 06:28:27,349 INFO  interfaces.Container (KeyValueContainer.java:flushAndSyncDB(382)) - Container 5598807415576091053 is synced with bcsId 0.
2019-08-28 06:28:27,366 INFO  ozoneimpl.OzoneContainer (OzoneContainer.java:stop(199)) - Attempting to stop container services.
2019-08-28 06:28:27,367 INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - e0233a78-b8be-4d5a-be64-04fb9cab47d4: close
2019-08-28 06:28:27,367 INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(245)) - e0233a78-b8be-4d5a-be64-04fb9cab47d4: shutdown group-DFB76CB4CE07
2019-08-28 06:28:27,367 INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-DFB76CB4CE07,id=e0233a78-b8be-4d5a-be64-04fb9cab47d4
2019-08-28 06:28:27,368 INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(104)) - e0233a78-b8be-4d5a-be64-04fb9cab47d4: shutdown LeaderState
2019-08-28 06:28:27,368 INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(202)) - e0233a78-b8be-4d5a-be64-04fb9cab47d4-PendingRequests: sendNotLeaderResponses
2019-08-28 06:28:27,369 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(115)) - StateMachineUpdater:e0233a78-b8be-4d5a-be64-04fb9cab47d4:group-DFB76CB4CE07: set stopIndex = 4
2019-08-28 06:28:27,369 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(283)) - group-DFB76CB4CE07: Taking a snapshot at:(t:1, i:4) file /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerff630fac-9bd5-46e7-80d4-3b8afc2daa6e/ratis/e30f8b5a-7e3b-4ae0-a2d8-dfb76cb4ce07/sm/snapshot.1_4
2019-08-28 06:28:27,373 INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:takeSnapshot(294)) - group-DFB76CB4CE07: Finished taking a snapshot at:(t:1, i:4) file:/workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerff630fac-9bd5-46e7-80d4-3b8afc2daa6e/ratis/e30f8b5a-7e3b-4ae0-a2d8-dfb76cb4ce07/sm/snapshot.1_4 time:3
2019-08-28 06:28:27,373 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(242)) - StateMachineUpdater:e0233a78-b8be-4d5a-be64-04fb9cab47d4:group-DFB76CB4CE07: Took a snapshot at index 4
2019-08-28 06:28:27,373 INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(80)) - StateMachineUpdater:e0233a78-b8be-4d5a-be64-04fb9cab47d4:group-DFB76CB4CE07: snapshotIndex: updateIncreasingly -1 -> 4
2019-08-28 06:28:27,374 INFO  impl.RaftServerImpl (ServerState.java:close(394)) - e0233a78-b8be-4d5a-be64-04fb9cab47d4:group-DFB76CB4CE07 closes. The last applied log index is 4
2019-08-28 06:28:27,374 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(313)) - e0233a78-b8be-4d5a-be64-04fb9cab47d4-SegmentedRaftLogWorker:Storage Directory /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerff630fac-9bd5-46e7-80d4-3b8afc2daa6e/ratis/e30f8b5a-7e3b-4ae0-a2d8-dfb76cb4ce07 was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-08-28 06:28:27,375 INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(228)) - e0233a78-b8be-4d5a-be64-04fb9cab47d4-SegmentedRaftLogWorker:Storage Directory /workdir/hadoop-hdds/container-service/target/test-dir/org.apache.hadoop.ozone.container.common.statemachine.commandhandler.TestCloseContainerCommandHandlerff630fac-9bd5-46e7-80d4-3b8afc2daa6e/ratis/e30f8b5a-7e3b-4ae0-a2d8-dfb76cb4ce07 close()
2019-08-28 06:28:27,376 INFO  server.GrpcService (GrpcService.java:closeImpl(155)) - e0233a78-b8be-4d5a-be64-04fb9cab47d4: shutdown server with port 38710 now
2019-08-28 06:28:27,378 INFO  server.GrpcService (GrpcService.java:closeImpl(163)) - e0233a78-b8be-4d5a-be64-04fb9cab47d4: shutdown server with port 38710 successfully
2019-08-28 06:28:27,380 INFO  utils.BackgroundService (BackgroundService.java:shutdown(148)) - Shutting down service BlockDeletingService
2019-08-28 06:28:27,380 WARN  fs.CachingGetSpaceUsed (CachingGetSpaceUsed.java:run(183)) - Thread Interrupted waiting to refresh disk information: sleep interrupted

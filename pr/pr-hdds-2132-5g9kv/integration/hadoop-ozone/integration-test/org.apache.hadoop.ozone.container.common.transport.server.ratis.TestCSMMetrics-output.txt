2019-09-17 05:18:34,102 [main] INFO  ozone.RatisTestHelper (RatisTestHelper.java:initRatisConf(107)) - dfs.container.ratis.rpc.type = GRPC
2019-09-17 05:18:34,646 [main] INFO  impl.RaftServerProxy (ConfUtils.java:logGet(43)) - raft.rpc.type = GRPC (default)
2019-09-17 05:18:34,711 [main] INFO  grpc.GrpcFactory (GrpcFactory.java:checkPooledByteBufAllocatorUseCacheForAllThreads(45)) - PERFORMANCE WARNING: useCacheForAllThreads is true that may cause Netty to create a lot garbage objects and, as a result, trigger GC.
	It is recommended to disable useCacheForAllThreads by setting -Dorg.apache.ratis.thirdparty.io.netty.allocator.useCacheForAllThreads=false in command line.
2019-09-17 05:18:34,716 [main] INFO  grpc.GrpcConfigKeys$Server (ConfUtils.java:logGet(43)) - raft.grpc.server.port = 37443 (custom)
2019-09-17 05:18:34,717 [main] INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.message.size.max = 33570816 (custom)
2019-09-17 05:18:34,719 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-09-17 05:18:34,720 [main] INFO  server.GrpcService (ConfUtils.java:logGet(43)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2019-09-17 05:18:34,721 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.request.timeout = 3000ms (default)
2019-09-17 05:18:34,883 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/hadoop-ozone/integration-test/target/test-dir/dfs/f0fa17ef-dde1-4454-8c35-bb9f876f45f1] (custom)
2019-09-17 05:18:34,893 [main] INFO  ratis.XceiverServerRatis (XceiverServerRatis.java:start(411)) - Starting XceiverServerRatis f0fa17ef-dde1-4454-8c35-bb9f876f45f1 at port 37443
2019-09-17 05:18:34,909 [main] INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$start$3(299)) - f0fa17ef-dde1-4454-8c35-bb9f876f45f1: start RPC server
2019-09-17 05:18:35,017 [main] INFO  server.GrpcService (GrpcService.java:startImpl(158)) - f0fa17ef-dde1-4454-8c35-bb9f876f45f1: GrpcService started, listening on 0.0.0.0/0.0.0.0:37443
2019-09-17 05:18:35,619 [grpc-default-executor-0] INFO  impl.RaftServerProxy (RaftServerProxy.java:addNew(89)) - f0fa17ef-dde1-4454-8c35-bb9f876f45f1: addNew group-C4128ADAD48F:[f0fa17ef-dde1-4454-8c35-bb9f876f45f1:0.0.0.0:37443] returns group-C4128ADAD48F:java.util.concurrent.CompletableFuture@5d0749a5[Not completed]
2019-09-17 05:18:35,679 [pool-2-thread-1] INFO  impl.RaftServerImpl (RaftServerImpl.java:<init>(95)) - f0fa17ef-dde1-4454-8c35-bb9f876f45f1: new RaftServerImpl for group-C4128ADAD48F:[f0fa17ef-dde1-4454-8c35-bb9f876f45f1:0.0.0.0:37443] with ContainerStateMachine:uninitialized
2019-09-17 05:18:35,681 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.min = 5s (custom)
2019-09-17 05:18:35,681 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpc.timeout.max = 5200ms (custom)
2019-09-17 05:18:35,683 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.rpcslowness.timeout = 120s (custom)
2019-09-17 05:18:35,684 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.sleep.deviation.threshold = 300 (default)
2019-09-17 05:18:35,685 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.install.snapshot.enabled = false (custom)
2019-09-17 05:18:35,693 [pool-2-thread-1] INFO  impl.RaftServerImpl (ServerState.java:<init>(103)) - f0fa17ef-dde1-4454-8c35-bb9f876f45f1@group-C4128ADAD48F: ConfigurationManager, init=-1: [f0fa17ef-dde1-4454-8c35-bb9f876f45f1:0.0.0.0:37443], old=null, confs=<EMPTY_MAP>
2019-09-17 05:18:35,694 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.storage.dir = [/workdir/hadoop-ozone/integration-test/target/test-dir/dfs/f0fa17ef-dde1-4454-8c35-bb9f876f45f1] (custom)
2019-09-17 05:18:35,704 [pool-2-thread-1] INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:analyzeStorage(246)) - The storage directory /workdir/hadoop-ozone/integration-test/target/test-dir/dfs/f0fa17ef-dde1-4454-8c35-bb9f876f45f1/7b08ee11-71e9-4d72-b77a-c4128adad48f does not exist. Creating ...
2019-09-17 05:18:37,667 [pool-2-thread-1] INFO  storage.RaftStorageDirectory (RaftStorageDirectory.java:tryLock(328)) - Lock on /workdir/hadoop-ozone/integration-test/target/test-dir/dfs/f0fa17ef-dde1-4454-8c35-bb9f876f45f1/7b08ee11-71e9-4d72-b77a-c4128adad48f/in_use.lock acquired by nodename 14728@pr-hdds-2132-5g9kv-3389001449
2019-09-17 05:18:37,694 [pool-2-thread-1] INFO  storage.RaftStorage (RaftStorage.java:format(72)) - Storage directory /workdir/hadoop-ozone/integration-test/target/test-dir/dfs/f0fa17ef-dde1-4454-8c35-bb9f876f45f1/7b08ee11-71e9-4d72-b77a-c4128adad48f has been successfully formatted.
2019-09-17 05:18:37,699 [pool-2-thread-1] INFO  ratis.ContainerStateMachine (ContainerStateMachine.java:loadSnapshot(230)) - group-C4128ADAD48F: The snapshot info is null. Setting the last applied indexto:(t:0, i:~)
2019-09-17 05:18:37,699 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.notification.no-leader.timeout = 120s (custom)
2019-09-17 05:18:37,703 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.use.memory = false (default)
2019-09-17 05:18:37,711 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.purge.gap = 1000000 (custom)
2019-09-17 05:18:37,712 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2019-09-17 05:18:37,715 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 1048576 (custom)
2019-09-17 05:18:37,721 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.cache.num.max = 2 (custom)
2019-09-17 05:18:37,731 [pool-2-thread-1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(172)) - new f0fa17ef-dde1-4454-8c35-bb9f876f45f1@group-C4128ADAD48F-SegmentedRaftLogWorker for RaftStorage:Storage Directory /workdir/hadoop-ozone/integration-test/target/test-dir/dfs/f0fa17ef-dde1-4454-8c35-bb9f876f45f1/7b08ee11-71e9-4d72-b77a-c4128adad48f
ERROR StatusLogger No Log4j 2 configuration file found. Using default configuration (logging only errors to the console), or user programmatically provided configurations. Set system property 'log4j2.debug' to show Log4j 2 internal initialization logging. See https://logging.apache.org/log4j/2.x/manual/configuration.html for instructions on how to configure Log4j 2
2019-09-17 05:18:38,140 [pool-2-thread-1] WARN  impl.MetricsConfig (MetricsConfig.java:loadFirst(134)) - Cannot locate configuration: tried hadoop-metrics2-ratis.properties,hadoop-metrics2.properties
2019-09-17 05:18:38,159 [pool-2-thread-1] INFO  impl.MetricsSystemImpl (MetricsSystemImpl.java:startTimer(374)) - Scheduled Metric snapshot period at 10 second(s).
2019-09-17 05:18:38,160 [pool-2-thread-1] INFO  impl.MetricsSystemImpl (MetricsSystemImpl.java:start(191)) - ratis metrics system started
2019-09-17 05:18:38,202 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.byte-limit = 2147483647 (custom)
2019-09-17 05:18:38,202 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.queue.element-limit = 1024 (custom)
2019-09-17 05:18:38,205 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.segment.size.max = 1048576 (custom)
2019-09-17 05:18:38,206 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.preallocated.size = 16384 (custom)
2019-09-17 05:18:38,206 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.write.buffer.size = 33554432 (custom)
2019-09-17 05:18:38,207 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.force.sync.num = 128 (default)
2019-09-17 05:18:38,208 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync = true (default)
2019-09-17 05:18:38,208 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2019-09-17 05:18:38,208 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2019-09-17 05:18:38,216 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.log.statemachine.data.caching.enabled = true (custom)
2019-09-17 05:18:38,220 [pool-2-thread-1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(132)) - f0fa17ef-dde1-4454-8c35-bb9f876f45f1@group-C4128ADAD48F-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2019-09-17 05:18:38,224 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2019-09-17 05:18:38,225 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
2019-09-17 05:18:38,226 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.snapshot.retention.num.files = 5 (custom)
2019-09-17 05:18:38,227 [pool-2-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(43)) - raft.server.retrycache.expirytime = 600000ms (custom)
2019-09-17 05:18:38,251 [pool-2-thread-1] INFO  impl.RaftServerImpl (RaftServerImpl.java:start(185)) - f0fa17ef-dde1-4454-8c35-bb9f876f45f1@group-C4128ADAD48F: start as a follower, conf=-1: [f0fa17ef-dde1-4454-8c35-bb9f876f45f1:0.0.0.0:37443], old=null
2019-09-17 05:18:38,252 [pool-2-thread-1] INFO  impl.RaftServerImpl (RaftServerImpl.java:setRole(174)) - f0fa17ef-dde1-4454-8c35-bb9f876f45f1@group-C4128ADAD48F: changes role from      null to FOLLOWER at term 0 for startAsFollower
2019-09-17 05:18:38,254 [pool-2-thread-1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(143)) - f0fa17ef-dde1-4454-8c35-bb9f876f45f1: start FollowerState
2019-09-17 05:18:38,255 [pool-2-thread-1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-C4128ADAD48F,id=f0fa17ef-dde1-4454-8c35-bb9f876f45f1
2019-09-17 05:18:38,300 [main] INFO  impl.RaftServerProxy (RaftServerProxy.java:lambda$close$4(314)) - f0fa17ef-dde1-4454-8c35-bb9f876f45f1: close
2019-09-17 05:18:38,303 [main] INFO  impl.RaftServerImpl (RaftServerImpl.java:lambda$shutdown$3(251)) - f0fa17ef-dde1-4454-8c35-bb9f876f45f1@group-C4128ADAD48F: shutdown
2019-09-17 05:18:38,305 [main] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-C4128ADAD48F,id=f0fa17ef-dde1-4454-8c35-bb9f876f45f1
2019-09-17 05:18:38,305 [main] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(121)) - f0fa17ef-dde1-4454-8c35-bb9f876f45f1: shutdown FollowerState
2019-09-17 05:18:38,306 [main] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(125)) - f0fa17ef-dde1-4454-8c35-bb9f876f45f1@group-C4128ADAD48F-StateMachineUpdater: set stopIndex = -1
2019-09-17 05:18:38,306 [Thread-4] INFO  impl.FollowerState (FollowerState.java:run(115)) - f0fa17ef-dde1-4454-8c35-bb9f876f45f1: FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
2019-09-17 05:18:38,307 [main] INFO  impl.RaftServerImpl (ServerState.java:close(385)) - f0fa17ef-dde1-4454-8c35-bb9f876f45f1@group-C4128ADAD48F: closes. applyIndex: -1
2019-09-17 05:18:38,312 [f0fa17ef-dde1-4454-8c35-bb9f876f45f1@group-C4128ADAD48F-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(313)) - f0fa17ef-dde1-4454-8c35-bb9f876f45f1@group-C4128ADAD48F-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2019-09-17 05:18:38,314 [main] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(228)) - f0fa17ef-dde1-4454-8c35-bb9f876f45f1@group-C4128ADAD48F-SegmentedRaftLogWorker close()
2019-09-17 05:18:38,316 [main] INFO  server.GrpcService (GrpcService.java:closeImpl(164)) - f0fa17ef-dde1-4454-8c35-bb9f876f45f1: shutdown server with port 37443 now
2019-09-17 05:18:38,319 [main] INFO  server.GrpcService (GrpcService.java:closeImpl(172)) - f0fa17ef-dde1-4454-8c35-bb9f876f45f1: shutdown server with port 37443 successfully

<?xml version="1.0" encoding="UTF-8"?>
<robot rpa="false" generated="20190828 20:20:41.156" generator="Robot 3.1.2 (Python 2.7.5 on linux2)">
<suite source="/opt/hadoop/smoketest/s3" id="s1" name="ozonesecure-s3">
<suite source="/opt/hadoop/smoketest/s3/awss3.robot" id="s1-s1" name="Awss3">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:20:41.231" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:20:41.239" level="INFO">${rc} = 1</msg>
<msg timestamp="20190828 20:20:41.239" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20190828 20:20:41.239" starttime="20190828 20:20:41.229"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20190828 20:20:41.241" starttime="20190828 20:20:41.240"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:20:41.244" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:20:41.501" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:20:41.502" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/Group'
Usage: yum [options] COMMAND

List of Commands:

check          Check for pr...</msg>
<status status="PASS" endtime="20190828 20:20:41.502" starttime="20190828 20:20:41.242"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:20:41.509" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:13.517" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:13.517" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Determining fastest mirrors
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
Resolving Depend...</msg>
<status status="PASS" endtime="20190828 20:21:13.517" starttime="20190828 20:20:41.506"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:13.518" level="INFO">Loaded plugins: fastestmirror, ovl
Determining fastest mirrors
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
Resolving Dependencies
--&gt; Running transaction check
---&gt; Package awscli.noarch 0:1.14.28-5.el7_5.1 will be installed
--&gt; Processing Dependency: python-s3transfer &gt;= 0.1.9 for package: awscli-1.14.28-5.el7_5.1.noarch
--&gt; Processing Dependency: python-docutils &gt;= 0.10 for package: awscli-1.14.28-5.el7_5.1.noarch
--&gt; Processing Dependency: python-cryptography &gt;= 1.7.2 for package: awscli-1.14.28-5.el7_5.1.noarch
--&gt; Processing Dependency: PyYAML &gt;= 3.10 for package: awscli-1.14.28-5.el7_5.1.noarch
--&gt; Running transaction check
---&gt; Package PyYAML.x86_64 0:3.10-11.el7 will be installed
--&gt; Processing Dependency: libyaml-0.so.2()(64bit) for package: PyYAML-3.10-11.el7.x86_64
---&gt; Package python-docutils.noarch 0:0.11-0.3.20130715svn7687.el7 will be installed
--&gt; Processing Dependency: python-imaging for package: python-docutils-0.11-0.3.20130715svn7687.el7.noarch
---&gt; Package python-s3transfer.noarch 0:0.1.13-1.el7.0.1 will be installed
--&gt; Processing Dependency: python-dateutil &gt;= 1.4 for package: python-s3transfer-0.1.13-1.el7.0.1.noarch
---&gt; Package python2-cryptography.x86_64 0:1.7.2-2.el7 will be installed
--&gt; Processing Dependency: python-six &gt;= 1.4.1 for package: python2-cryptography-1.7.2-2.el7.x86_64
--&gt; Processing Dependency: python-pyasn1 &gt;= 0.1.8 for package: python2-cryptography-1.7.2-2.el7.x86_64
--&gt; Processing Dependency: python-idna &gt;= 2.0 for package: python2-cryptography-1.7.2-2.el7.x86_64
--&gt; Processing Dependency: python-cffi &gt;= 1.4.1 for package: python2-cryptography-1.7.2-2.el7.x86_64
--&gt; Processing Dependency: python-enum34 for package: python2-cryptography-1.7.2-2.el7.x86_64
--&gt; Processing Dependency: openssl for package: python2-cryptography-1.7.2-2.el7.x86_64
--&gt; Running transaction check
---&gt; Package libyaml.x86_64 0:0.1.4-11.el7_0 will be installed
---&gt; Package openssl.x86_64 1:1.0.2k-16.el7_6.1 will be installed
--&gt; Processing Dependency: openssl-libs(x86-64) = 1:1.0.2k-16.el7_6.1 for package: 1:openssl-1.0.2k-16.el7_6.1.x86_64
--&gt; Processing Dependency: make for package: 1:openssl-1.0.2k-16.el7_6.1.x86_64
---&gt; Package python-cffi.x86_64 0:1.6.0-5.el7 will be installed
--&gt; Processing Dependency: python-pycparser for package: python-cffi-1.6.0-5.el7.x86_64
---&gt; Package python-dateutil.noarch 0:1.5-7.el7 will be installed
---&gt; Package python-enum34.noarch 0:1.0.4-1.el7 will be installed
---&gt; Package python-idna.noarch 0:2.4-1.el7 will be installed
---&gt; Package python-pillow.x86_64 0:2.0.0-19.gitd1c6db8.el7 will be installed
--&gt; Processing Dependency: libtiff.so.5(LIBTIFF_4.0)(64bit) for package: python-pillow-2.0.0-19.gitd1c6db8.el7.x86_64
--&gt; Processing Dependency: libwebp.so.4()(64bit) for package: python-pillow-2.0.0-19.gitd1c6db8.el7.x86_64
--&gt; Processing Dependency: libtiff.so.5()(64bit) for package: python-pillow-2.0.0-19.gitd1c6db8.el7.x86_64
---&gt; Package python-six.noarch 0:1.9.0-2.el7 will be installed
---&gt; Package python2-pyasn1.noarch 0:0.1.9-7.el7 will be installed
--&gt; Running transaction check
---&gt; Package libtiff.x86_64 0:4.0.3-27.el7_3 will be installed
--&gt; Processing Dependency: libjbig.so.2.0()(64bit) for package: libtiff-4.0.3-27.el7_3.x86_64
---&gt; Package libwebp.x86_64 0:0.3.0-7.el7 will be installed
---&gt; Package make.x86_64 1:3.82-23.el7 will be installed
---&gt; Package openssl-libs.x86_64 1:1.0.2k-16.el7 will be updated
---&gt; Package openssl-libs.x86_64 1:1.0.2k-16.el7_6.1 will be an update
---&gt; Package python-pycparser.noarch 0:2.14-1.el7 will be installed
--&gt; Processing Dependency: python-ply for package: python-pycparser-2.14-1.el7.noarch
--&gt; Running transaction check
---&gt; Package jbigkit-libs.x86_64 0:2.0-11.el7 will be installed
---&gt; Package python-ply.noarch 0:3.4-11.el7 will be installed
--&gt; Finished Dependency Resolution

Dependencies Resolved

================================================================================
 Package                Arch     Version                        Repository
                                                                           Size
================================================================================
Installing:
 awscli                 noarch   1.14.28-5.el7_5.1              base      1.0 M
Installing for dependencies:
 PyYAML                 x86_64   3.10-11.el7                    base      153 k
 jbigkit-libs           x86_64   2.0-11.el7                     base       46 k
 libtiff                x86_64   4.0.3-27.el7_3                 base      170 k
 libwebp                x86_64   0.3.0-7.el7                    base      170 k
 libyaml                x86_64   0.1.4-11.el7_0                 base       55 k
 make                   x86_64   1:3.82-23.el7                  base      420 k
 openssl                x86_64   1:1.0.2k-16.el7_6.1            updates   493 k
 python-cffi            x86_64   1.6.0-5.el7                    base      218 k
 python-dateutil        noarch   1.5-7.el7                      base       85 k
 python-docutils        noarch   0.11-0.3.20130715svn7687.el7   base      1.5 M
 python-enum34          noarch   1.0.4-1.el7                    base       52 k
 python-idna            noarch   2.4-1.el7                      base       94 k
 python-pillow          x86_64   2.0.0-19.gitd1c6db8.el7        base      438 k
 python-ply             noarch   3.4-11.el7                     base      123 k
 python-pycparser       noarch   2.14-1.el7                     base      104 k
 python-s3transfer      noarch   0.1.13-1.el7.0.1               updates   2.9 M
 python-six             noarch   1.9.0-2.el7                    base       29 k
 python2-cryptography   x86_64   1.7.2-2.el7                    base      502 k
 python2-pyasn1         noarch   0.1.9-7.el7                    base      100 k
Updating for dependencies:
 openssl-libs           x86_64   1:1.0.2k-16.el7_6.1            updates   1.2 M

Transaction Summary
================================================================================
Install  1 Package  (+19 Dependent packages)
Upgrade             (  1 Dependent package)

Total download size: 9.9 M
Downloading packages:
Delta RPMs disabled because /usr/bin/applydeltarpm not installed.
--------------------------------------------------------------------------------
Total                                               16 MB/s | 9.9 MB  00:00     
Running transaction check
Running transaction test
Transaction test succeeded
Running transaction
  Updating   : 1:openssl-libs-1.0.2k-16.el7_6.1.x86_64                     1/22 
  Installing : python2-pyasn1-0.1.9-7.el7.noarch                           2/22 
  Installing : libyaml-0.1.4-11.el7_0.x86_64                               3/22 
  Installing : PyYAML-3.10-11.el7.x86_64                                   4/22 
  Installing : jbigkit-libs-2.0-11.el7.x86_64                              5/22 
  Installing : libtiff-4.0.3-27.el7_3.x86_64                               6/22 
  Installing : 1:make-3.82-23.el7.x86_64                                   7/22 
  Installing : 1:openssl-1.0.2k-16.el7_6.1.x86_64                          8/22 
  Installing : python-ply-3.4-11.el7.noarch                                9/22 
  Installing : python-pycparser-2.14-1.el7.noarch                         10/22 
  Installing : python-cffi-1.6.0-5.el7.x86_64                             11/22 
  Installing : python-idna-2.4-1.el7.noarch                               12/22 
  Installing : python-six-1.9.0-2.el7.noarch                              13/22 
  Installing : python-dateutil-1.5-7.el7.noarch                           14/22 
  Installing : python-enum34-1.0.4-1.el7.noarch                           15/22 
  Installing : python2-cryptography-1.7.2-2.el7.x86_64                    16/22 
  Installing : libwebp-0.3.0-7.el7.x86_64                                 17/22 
  Installing : python-pillow-2.0.0-19.gitd1c6db8.el7.x86_64               18/22 
  Installing : python-docutils-0.11-0.3.20130715svn7687.el7.noarch        19/22 
  Installing : python-s3transfer-0.1.13-1.el7.0.1.noarch                  20/22 
  Installing : awscli-1.14.28-5.el7_5.1.noarch                            21/22 
  Cleanup    : 1:openssl-libs-1.0.2k-16.el7.x86_64                        22/22 
  Verifying  : libtiff-4.0.3-27.el7_3.x86_64                               1/22 
  Verifying  : libwebp-0.3.0-7.el7.x86_64                                  2/22 
  Verifying  : python-enum34-1.0.4-1.el7.noarch                            3/22 
  Verifying  : python-docutils-0.11-0.3.20130715svn7687.el7.noarch         4/22 
  Verifying  : python-dateutil-1.5-7.el7.noarch                            5/22 
  Verifying  : python-six-1.9.0-2.el7.noarch                               6/22 
  Verifying  : python-s3transfer-0.1.13-1.el7.0.1.noarch                   7/22 
  Verifying  : python-idna-2.4-1.el7.noarch                                8/22 
  Verifying  : 1:openssl-1.0.2k-16.el7_6.1.x86_64                          9/22 
  Verifying  : python-ply-3.4-11.el7.noarch                               10/22 
  Verifying  : python-cffi-1.6.0-5.el7.x86_64                             11/22 
  Verifying  : 1:make-3.82-23.el7.x86_64                                  12/22 
  Verifying  : python-pillow-2.0.0-19.gitd1c6db8.el7.x86_64               13/22 
  Verifying  : jbigkit-libs-2.0-11.el7.x86_64                             14/22 
  Verifying  : python-pycparser-2.14-1.el7.noarch                         15/22 
  Verifying  : libyaml-0.1.4-11.el7_0.x86_64                              16/22 
  Verifying  : 1:openssl-libs-1.0.2k-16.el7_6.1.x86_64                    17/22 
  Verifying  : python2-pyasn1-0.1.9-7.el7.noarch                          18/22 
  Verifying  : PyYAML-3.10-11.el7.x86_64                                  19/22 
  Verifying  : awscli-1.14.28-5.el7_5.1.noarch                            20/22 
  Verifying  : python2-cryptography-1.7.2-2.el7.x86_64                    21/22 
  Verifying  : 1:openssl-libs-1.0.2k-16.el7.x86_64                        22/22 

Installed:
  awscli.noarch 0:1.14.28-5.el7_5.1                                             

Dependency Installed:
  PyYAML.x86_64 0:3.10-11.el7                                                   
  jbigkit-libs.x86_64 0:2.0-11.el7                                              
  libtiff.x86_64 0:4.0.3-27.el7_3                                               
  libwebp.x86_64 0:0.3.0-7.el7                                                  
  libyaml.x86_64 0:0.1.4-11.el7_0                                               
  make.x86_64 1:3.82-23.el7                                                     
  openssl.x86_64 1:1.0.2k-16.el7_6.1                                            
  python-cffi.x86_64 0:1.6.0-5.el7                                              
  python-dateutil.noarch 0:1.5-7.el7                                            
  python-docutils.noarch 0:0.11-0.3.20130715svn7687.el7                         
  python-enum34.noarch 0:1.0.4-1.el7                                            
  python-idna.noarch 0:2.4-1.el7                                                
  python-pillow.x86_64 0:2.0.0-19.gitd1c6db8.el7                                
  python-ply.noarch 0:3.4-11.el7                                                
  python-pycparser.noarch 0:2.14-1.el7                                          
  python-s3transfer.noarch 0:0.1.13-1.el7.0.1                                   
  python-six.noarch 0:1.9.0-2.el7                                               
  python2-cryptography.x86_64 0:1.7.2-2.el7                                     
  python2-pyasn1.noarch 0:0.1.9-7.el7                                           

Dependency Updated:
  openssl-libs.x86_64 1:1.0.2k-16.el7_6.1                                       

Complete!</msg>
<status status="PASS" endtime="20190828 20:21:13.519" starttime="20190828 20:21:13.518"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:13.519" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:13.520" starttime="20190828 20:21:13.519"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:13.520" starttime="20190828 20:20:41.505"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:13.520" starttime="20190828 20:20:41.504"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:13.520" starttime="20190828 20:20:41.503"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:13.520" starttime="20190828 20:20:41.229"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:13.521" starttime="20190828 20:20:41.228"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:13.525" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:13.531" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:13.532" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20190828 20:21:13.532" starttime="20190828 20:21:13.523"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:13.534" level="INFO">s3g</msg>
<status status="PASS" endtime="20190828 20:21:13.534" starttime="20190828 20:21:13.533"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:13.535" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:13.535" starttime="20190828 20:21:13.534"></status>
</kw>
<msg timestamp="20190828 20:21:13.536" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20190828 20:21:13.536" starttime="20190828 20:21:13.523"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20190828 20:21:13.539" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20190828 20:21:13.539" starttime="20190828 20:21:13.536"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:13.544" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:13.586" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:13.587" level="INFO">${output} = </msg>
<status status="PASS" endtime="20190828 20:21:13.587" starttime="20190828 20:21:13.541"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:13.589" level="INFO"></msg>
<status status="PASS" endtime="20190828 20:21:13.589" starttime="20190828 20:21:13.588"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:13.590" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:13.590" starttime="20190828 20:21:13.589"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:13.591" starttime="20190828 20:21:13.540"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:13.591" starttime="20190828 20:21:13.539"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:13.591" starttime="20190828 20:21:13.523"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:13.591" starttime="20190828 20:21:13.522"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:13.595" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:15.061" level="INFO">${rc} = 255</msg>
<msg timestamp="20190828 20:21:15.061" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20190828 20:21:15.061" starttime="20190828 20:21:13.592"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:15.063" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-08-28 20:21:14 ERROR OzoneClientFactory:192 - Couldn't create RpcClient protocol exception: 
java.lang.IllegalArgumentException: java.net.UnknownHostException: om
	at org.apache.hadoop.security.SecurityUtil.buildTokenService(SecurityUtil.java:447)
	at org.apache.hadoop.ozone.om.ha.OMProxyInfo.&lt;init&gt;(OMProxyInfo.java:40)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.loadOMClientConfigs(OMFailoverProxyProvider.java:109)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.&lt;init&gt;(OMFailoverProxyProvider.java:77)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.&lt;init&gt;(OzoneManagerProtocolClientSideTranslatorPB.java:195)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:155)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:189)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:152)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:102)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Caused by: java.net.UnknownHostException: om
	... 22 more
om</msg>
<status status="PASS" endtime="20190828 20:21:15.063" starttime="20190828 20:21:15.062"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:15.064" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20190828 20:21:15.064" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20190828 20:21:15.064" starttime="20190828 20:21:15.063"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:15.065" starttime="20190828 20:21:13.592"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:15.065" starttime="20190828 20:21:13.521"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:15.065" starttime="20190828 20:21:13.521"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:15.065" starttime="20190828 20:20:41.228"></status>
</kw>
<test id="s1-s1-t1" name="File upload and directory list">
<status status="FAIL" endtime="20190828 20:21:15.067" critical="yes" starttime="20190828 20:21:15.066">Parent suite setup failed:
255 != 0</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20190828 20:21:15.067" starttime="20190828 20:20:41.221">Suite setup failed:
255 != 0</status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/bucketcreate.robot" id="s1-s2" name="Bucketcreate">
<test id="s1-s2-t1" name="Create bucket which already exists">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:15.083" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:15.089" level="INFO">${rc} = 1</msg>
<msg timestamp="20190828 20:21:15.090" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20190828 20:21:15.090" starttime="20190828 20:21:15.081"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20190828 20:21:15.092" starttime="20190828 20:21:15.090"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:15.094" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:15.285" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:15.285" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/Group'
Usage: yum [options] COMMAND

List of Commands:

check          Check for pr...</msg>
<status status="PASS" endtime="20190828 20:21:15.285" starttime="20190828 20:21:15.092"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:15.292" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:15.819" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:15.819" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
P...</msg>
<status status="PASS" endtime="20190828 20:21:15.819" starttime="20190828 20:21:15.289"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:15.821" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20190828 20:21:15.821" starttime="20190828 20:21:15.820"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:15.822" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:15.823" starttime="20190828 20:21:15.822"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:15.823" starttime="20190828 20:21:15.288"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:15.824" starttime="20190828 20:21:15.287"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:15.824" starttime="20190828 20:21:15.286"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:15.824" starttime="20190828 20:21:15.081"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:15.824" starttime="20190828 20:21:15.080"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:15.832" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:15.839" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:15.839" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20190828 20:21:15.840" starttime="20190828 20:21:15.830"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:15.841" level="INFO">s3g</msg>
<status status="PASS" endtime="20190828 20:21:15.842" starttime="20190828 20:21:15.840"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:15.843" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:15.843" starttime="20190828 20:21:15.842"></status>
</kw>
<msg timestamp="20190828 20:21:15.843" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20190828 20:21:15.844" starttime="20190828 20:21:15.829"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20190828 20:21:15.847" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20190828 20:21:15.847" starttime="20190828 20:21:15.844"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:15.851" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:15.883" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:15.883" level="INFO">${output} = </msg>
<status status="PASS" endtime="20190828 20:21:15.883" starttime="20190828 20:21:15.849"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:15.885" level="INFO"></msg>
<status status="PASS" endtime="20190828 20:21:15.885" starttime="20190828 20:21:15.884"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:15.886" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:15.886" starttime="20190828 20:21:15.885"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:15.887" starttime="20190828 20:21:15.848"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:15.887" starttime="20190828 20:21:15.847"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:15.887" starttime="20190828 20:21:15.828"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:15.888" starttime="20190828 20:21:15.827"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:15.892" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:17.295" level="INFO">${rc} = 255</msg>
<msg timestamp="20190828 20:21:17.296" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20190828 20:21:17.296" starttime="20190828 20:21:15.889"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:17.297" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-08-28 20:21:17 ERROR OzoneClientFactory:192 - Couldn't create RpcClient protocol exception: 
java.lang.IllegalArgumentException: java.net.UnknownHostException: om
	at org.apache.hadoop.security.SecurityUtil.buildTokenService(SecurityUtil.java:447)
	at org.apache.hadoop.ozone.om.ha.OMProxyInfo.&lt;init&gt;(OMProxyInfo.java:40)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.loadOMClientConfigs(OMFailoverProxyProvider.java:109)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.&lt;init&gt;(OMFailoverProxyProvider.java:77)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.&lt;init&gt;(OzoneManagerProtocolClientSideTranslatorPB.java:195)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:155)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:189)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:152)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:102)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Caused by: java.net.UnknownHostException: om
	... 22 more
om</msg>
<status status="PASS" endtime="20190828 20:21:17.298" starttime="20190828 20:21:17.296"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:17.298" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20190828 20:21:17.299" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20190828 20:21:17.299" starttime="20190828 20:21:17.298"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:17.300" starttime="20190828 20:21:15.888"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:17.300" starttime="20190828 20:21:15.826"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:17.300" starttime="20190828 20:21:15.825"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:17.300" starttime="20190828 20:21:15.080"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:17.301" critical="yes" starttime="20190828 20:21:15.079">Setup failed:
255 != 0</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20190828 20:21:17.302" starttime="20190828 20:21:15.069"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/buckethead.robot" id="s1-s3" name="Buckethead">
<test id="s1-s3-t1" name="Head Bucket not existent">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:17.322" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:17.328" level="INFO">${rc} = 1</msg>
<msg timestamp="20190828 20:21:17.328" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20190828 20:21:17.328" starttime="20190828 20:21:17.320"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20190828 20:21:17.330" starttime="20190828 20:21:17.329"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:17.332" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:17.510" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:17.510" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/Group'
Usage: yum [options] COMMAND

List of Commands:

check          Check for pr...</msg>
<status status="PASS" endtime="20190828 20:21:17.510" starttime="20190828 20:21:17.330"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:17.515" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:17.988" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:17.989" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
P...</msg>
<status status="PASS" endtime="20190828 20:21:17.989" starttime="20190828 20:21:17.513"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:17.990" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20190828 20:21:17.990" starttime="20190828 20:21:17.989"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:17.990" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:17.991" starttime="20190828 20:21:17.990"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:17.991" starttime="20190828 20:21:17.512"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:17.991" starttime="20190828 20:21:17.512"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:17.991" starttime="20190828 20:21:17.511"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:17.991" starttime="20190828 20:21:17.318"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:17.991" starttime="20190828 20:21:17.318"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:17.996" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:18.002" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:18.002" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20190828 20:21:18.002" starttime="20190828 20:21:17.994"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:18.004" level="INFO">s3g</msg>
<status status="PASS" endtime="20190828 20:21:18.004" starttime="20190828 20:21:18.003"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:18.005" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:18.005" starttime="20190828 20:21:18.004"></status>
</kw>
<msg timestamp="20190828 20:21:18.006" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20190828 20:21:18.006" starttime="20190828 20:21:17.994"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20190828 20:21:18.008" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20190828 20:21:18.008" starttime="20190828 20:21:18.006"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:18.013" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:18.030" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:18.030" level="INFO">${output} = </msg>
<status status="PASS" endtime="20190828 20:21:18.030" starttime="20190828 20:21:18.011"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:18.031" level="INFO"></msg>
<status status="PASS" endtime="20190828 20:21:18.031" starttime="20190828 20:21:18.031"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:18.032" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:18.032" starttime="20190828 20:21:18.032"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:18.033" starttime="20190828 20:21:18.010"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:18.033" starttime="20190828 20:21:18.009"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:18.033" starttime="20190828 20:21:17.993"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:18.033" starttime="20190828 20:21:17.993"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:18.036" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:19.404" level="INFO">${rc} = 255</msg>
<msg timestamp="20190828 20:21:19.404" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20190828 20:21:19.404" starttime="20190828 20:21:18.034"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:19.405" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-08-28 20:21:19 ERROR OzoneClientFactory:192 - Couldn't create RpcClient protocol exception: 
java.lang.IllegalArgumentException: java.net.UnknownHostException: om
	at org.apache.hadoop.security.SecurityUtil.buildTokenService(SecurityUtil.java:447)
	at org.apache.hadoop.ozone.om.ha.OMProxyInfo.&lt;init&gt;(OMProxyInfo.java:40)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.loadOMClientConfigs(OMFailoverProxyProvider.java:109)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.&lt;init&gt;(OMFailoverProxyProvider.java:77)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.&lt;init&gt;(OzoneManagerProtocolClientSideTranslatorPB.java:195)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:155)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:189)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:152)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:102)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Caused by: java.net.UnknownHostException: om
	... 22 more
om</msg>
<status status="PASS" endtime="20190828 20:21:19.406" starttime="20190828 20:21:19.405"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:19.406" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20190828 20:21:19.407" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20190828 20:21:19.407" starttime="20190828 20:21:19.406"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:19.408" starttime="20190828 20:21:18.034"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:19.408" starttime="20190828 20:21:17.992"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:19.408" starttime="20190828 20:21:17.992"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:19.408" starttime="20190828 20:21:17.317"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:19.409" critical="yes" starttime="20190828 20:21:17.316">Setup failed:
255 != 0</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20190828 20:21:19.410" starttime="20190828 20:21:17.304"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/bucketlist.robot" id="s1-s4" name="Bucketlist">
<test id="s1-s4-t1" name="List buckets">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:19.425" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:19.431" level="INFO">${rc} = 1</msg>
<msg timestamp="20190828 20:21:19.432" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20190828 20:21:19.432" starttime="20190828 20:21:19.424"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20190828 20:21:19.433" starttime="20190828 20:21:19.432"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:19.435" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:19.631" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:19.631" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/Group'
Usage: yum [options] COMMAND

List of Commands:

check          Check for pr...</msg>
<status status="PASS" endtime="20190828 20:21:19.631" starttime="20190828 20:21:19.433"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:19.637" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:20.174" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:20.174" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
P...</msg>
<status status="PASS" endtime="20190828 20:21:20.175" starttime="20190828 20:21:19.635"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:20.176" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20190828 20:21:20.176" starttime="20190828 20:21:20.175"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:20.177" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:20.177" starttime="20190828 20:21:20.176"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:20.177" starttime="20190828 20:21:19.634"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:20.178" starttime="20190828 20:21:19.633"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:20.178" starttime="20190828 20:21:19.632"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:20.178" starttime="20190828 20:21:19.423"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:20.178" starttime="20190828 20:21:19.423"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:20.183" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:20.189" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:20.189" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20190828 20:21:20.189" starttime="20190828 20:21:20.182"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:20.190" level="INFO">s3g</msg>
<status status="PASS" endtime="20190828 20:21:20.190" starttime="20190828 20:21:20.189"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:20.191" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:20.191" starttime="20190828 20:21:20.190"></status>
</kw>
<msg timestamp="20190828 20:21:20.191" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20190828 20:21:20.191" starttime="20190828 20:21:20.181"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20190828 20:21:20.193" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20190828 20:21:20.193" starttime="20190828 20:21:20.191"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:20.196" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:20.209" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:20.209" level="INFO">${output} = </msg>
<status status="PASS" endtime="20190828 20:21:20.209" starttime="20190828 20:21:20.195"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:20.210" level="INFO"></msg>
<status status="PASS" endtime="20190828 20:21:20.210" starttime="20190828 20:21:20.210"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:20.211" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:20.211" starttime="20190828 20:21:20.210"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:20.211" starttime="20190828 20:21:20.194"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:20.211" starttime="20190828 20:21:20.193"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:20.212" starttime="20190828 20:21:20.180"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:20.212" starttime="20190828 20:21:20.180"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:20.214" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:21.655" level="INFO">${rc} = 255</msg>
<msg timestamp="20190828 20:21:21.656" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20190828 20:21:21.656" starttime="20190828 20:21:20.212"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:21.658" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-08-28 20:21:21 ERROR OzoneClientFactory:192 - Couldn't create RpcClient protocol exception: 
java.lang.IllegalArgumentException: java.net.UnknownHostException: om
	at org.apache.hadoop.security.SecurityUtil.buildTokenService(SecurityUtil.java:447)
	at org.apache.hadoop.ozone.om.ha.OMProxyInfo.&lt;init&gt;(OMProxyInfo.java:40)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.loadOMClientConfigs(OMFailoverProxyProvider.java:109)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.&lt;init&gt;(OMFailoverProxyProvider.java:77)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.&lt;init&gt;(OzoneManagerProtocolClientSideTranslatorPB.java:195)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:155)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:189)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:152)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:102)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Caused by: java.net.UnknownHostException: om
	... 22 more
om</msg>
<status status="PASS" endtime="20190828 20:21:21.658" starttime="20190828 20:21:21.657"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:21.660" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20190828 20:21:21.660" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20190828 20:21:21.660" starttime="20190828 20:21:21.659"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:21.661" starttime="20190828 20:21:20.212"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:21.661" starttime="20190828 20:21:20.179"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:21.662" starttime="20190828 20:21:20.178"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:21.662" starttime="20190828 20:21:19.422"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:21.663" critical="yes" starttime="20190828 20:21:19.422">Setup failed:
255 != 0</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20190828 20:21:21.664" starttime="20190828 20:21:19.413"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/MultipartUpload.robot" id="s1-s5" name="MultipartUpload">
<test id="s1-s5-t1" name="Test Multipart Upload">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:21.685" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:21.692" level="INFO">${rc} = 1</msg>
<msg timestamp="20190828 20:21:21.692" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20190828 20:21:21.692" starttime="20190828 20:21:21.683"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20190828 20:21:21.694" starttime="20190828 20:21:21.693"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:21.696" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:21.896" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:21.896" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/Group'
Usage: yum [options] COMMAND

List of Commands:

check          Check for pr...</msg>
<status status="PASS" endtime="20190828 20:21:21.896" starttime="20190828 20:21:21.694"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:21.903" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:22.484" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:22.484" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
P...</msg>
<status status="PASS" endtime="20190828 20:21:22.484" starttime="20190828 20:21:21.901"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:22.486" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20190828 20:21:22.486" starttime="20190828 20:21:22.485"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:22.487" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:22.487" starttime="20190828 20:21:22.486"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:22.487" starttime="20190828 20:21:21.900"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:22.487" starttime="20190828 20:21:21.899"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:22.488" starttime="20190828 20:21:21.897"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:22.488" starttime="20190828 20:21:21.682"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:22.488" starttime="20190828 20:21:21.681"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:22.494" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:22.500" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:22.500" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20190828 20:21:22.500" starttime="20190828 20:21:22.491"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:22.501" level="INFO">s3g</msg>
<status status="PASS" endtime="20190828 20:21:22.501" starttime="20190828 20:21:22.501"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:22.502" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:22.502" starttime="20190828 20:21:22.502"></status>
</kw>
<msg timestamp="20190828 20:21:22.503" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20190828 20:21:22.503" starttime="20190828 20:21:22.491"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20190828 20:21:22.505" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20190828 20:21:22.505" starttime="20190828 20:21:22.503"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:22.509" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:22.523" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:22.523" level="INFO">${output} = </msg>
<status status="PASS" endtime="20190828 20:21:22.524" starttime="20190828 20:21:22.507"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:22.526" level="INFO"></msg>
<status status="PASS" endtime="20190828 20:21:22.526" starttime="20190828 20:21:22.525"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:22.527" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:22.527" starttime="20190828 20:21:22.526"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:22.528" starttime="20190828 20:21:22.506"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:22.528" starttime="20190828 20:21:22.505"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:22.528" starttime="20190828 20:21:22.490"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:22.529" starttime="20190828 20:21:22.490"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:22.532" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:23.992" level="INFO">${rc} = 255</msg>
<msg timestamp="20190828 20:21:23.992" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20190828 20:21:23.993" starttime="20190828 20:21:22.530"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:23.995" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-08-28 20:21:23 ERROR OzoneClientFactory:192 - Couldn't create RpcClient protocol exception: 
java.lang.IllegalArgumentException: java.net.UnknownHostException: om
	at org.apache.hadoop.security.SecurityUtil.buildTokenService(SecurityUtil.java:447)
	at org.apache.hadoop.ozone.om.ha.OMProxyInfo.&lt;init&gt;(OMProxyInfo.java:40)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.loadOMClientConfigs(OMFailoverProxyProvider.java:109)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.&lt;init&gt;(OMFailoverProxyProvider.java:77)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.&lt;init&gt;(OzoneManagerProtocolClientSideTranslatorPB.java:195)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:155)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:189)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:152)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:102)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Caused by: java.net.UnknownHostException: om
	... 22 more
om</msg>
<status status="PASS" endtime="20190828 20:21:23.996" starttime="20190828 20:21:23.994"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:23.997" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20190828 20:21:23.998" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20190828 20:21:23.998" starttime="20190828 20:21:23.996"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:23.998" starttime="20190828 20:21:22.529"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:23.999" starttime="20190828 20:21:22.489"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:23.999" starttime="20190828 20:21:22.488"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:23.999" starttime="20190828 20:21:21.681"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:24.000" critical="yes" starttime="20190828 20:21:21.680">Setup failed:
255 != 0</status>
</test>
<test id="s1-s5-t2" name="Test Multipart Upload Complete">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:24.008" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:24.014" level="INFO">${rc} = 1</msg>
<msg timestamp="20190828 20:21:24.015" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20190828 20:21:24.015" starttime="20190828 20:21:24.005"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20190828 20:21:24.017" starttime="20190828 20:21:24.016"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:24.019" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:24.207" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:24.207" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/Group'
Usage: yum [options] COMMAND

List of Commands:

check          Check for pr...</msg>
<status status="PASS" endtime="20190828 20:21:24.207" starttime="20190828 20:21:24.017"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:24.214" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:24.714" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:24.714" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
P...</msg>
<status status="PASS" endtime="20190828 20:21:24.714" starttime="20190828 20:21:24.211"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:24.716" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20190828 20:21:24.717" starttime="20190828 20:21:24.715"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:24.718" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:24.718" starttime="20190828 20:21:24.717"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:24.719" starttime="20190828 20:21:24.210"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:24.719" starttime="20190828 20:21:24.210"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:24.719" starttime="20190828 20:21:24.208"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:24.719" starttime="20190828 20:21:24.004"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:24.720" starttime="20190828 20:21:24.003"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:24.727" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:24.735" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:24.735" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20190828 20:21:24.735" starttime="20190828 20:21:24.725"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:24.737" level="INFO">s3g</msg>
<status status="PASS" endtime="20190828 20:21:24.737" starttime="20190828 20:21:24.736"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:24.738" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:24.739" starttime="20190828 20:21:24.738"></status>
</kw>
<msg timestamp="20190828 20:21:24.739" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20190828 20:21:24.740" starttime="20190828 20:21:24.724"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20190828 20:21:24.741" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20190828 20:21:24.742" starttime="20190828 20:21:24.740"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:24.746" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:24.776" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:24.776" level="INFO">${output} = </msg>
<status status="PASS" endtime="20190828 20:21:24.776" starttime="20190828 20:21:24.744"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:24.778" level="INFO"></msg>
<status status="PASS" endtime="20190828 20:21:24.778" starttime="20190828 20:21:24.777"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:24.779" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:24.779" starttime="20190828 20:21:24.778"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:24.780" starttime="20190828 20:21:24.743"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:24.780" starttime="20190828 20:21:24.742"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:24.780" starttime="20190828 20:21:24.723"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:24.781" starttime="20190828 20:21:24.722"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:24.784" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:26.198" level="INFO">${rc} = 255</msg>
<msg timestamp="20190828 20:21:26.199" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20190828 20:21:26.199" starttime="20190828 20:21:24.782"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:26.200" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-08-28 20:21:26 ERROR OzoneClientFactory:192 - Couldn't create RpcClient protocol exception: 
java.lang.IllegalArgumentException: java.net.UnknownHostException: om
	at org.apache.hadoop.security.SecurityUtil.buildTokenService(SecurityUtil.java:447)
	at org.apache.hadoop.ozone.om.ha.OMProxyInfo.&lt;init&gt;(OMProxyInfo.java:40)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.loadOMClientConfigs(OMFailoverProxyProvider.java:109)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.&lt;init&gt;(OMFailoverProxyProvider.java:77)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.&lt;init&gt;(OzoneManagerProtocolClientSideTranslatorPB.java:195)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:155)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:189)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:152)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:102)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Caused by: java.net.UnknownHostException: om
	... 22 more
om</msg>
<status status="PASS" endtime="20190828 20:21:26.200" starttime="20190828 20:21:26.199"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:26.201" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20190828 20:21:26.201" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20190828 20:21:26.201" starttime="20190828 20:21:26.200"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:26.201" starttime="20190828 20:21:24.781"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:26.202" starttime="20190828 20:21:24.721"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:26.202" starttime="20190828 20:21:24.720"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:26.202" starttime="20190828 20:21:24.002"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:26.202" critical="yes" starttime="20190828 20:21:24.001">Setup failed:
255 != 0</status>
</test>
<test id="s1-s5-t3" name="Test Multipart Upload Complete Entity too small">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:26.207" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:26.214" level="INFO">${rc} = 1</msg>
<msg timestamp="20190828 20:21:26.215" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20190828 20:21:26.215" starttime="20190828 20:21:26.206"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20190828 20:21:26.217" starttime="20190828 20:21:26.216"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:26.219" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:26.397" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:26.398" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/Group'
Usage: yum [options] COMMAND

List of Commands:

check          Check for pr...</msg>
<status status="PASS" endtime="20190828 20:21:26.398" starttime="20190828 20:21:26.217"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:26.404" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:26.953" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:26.953" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
P...</msg>
<status status="PASS" endtime="20190828 20:21:26.953" starttime="20190828 20:21:26.402"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:26.954" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20190828 20:21:26.955" starttime="20190828 20:21:26.954"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:26.955" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:26.955" starttime="20190828 20:21:26.955"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:26.956" starttime="20190828 20:21:26.401"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:26.956" starttime="20190828 20:21:26.400"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:26.956" starttime="20190828 20:21:26.399"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:26.957" starttime="20190828 20:21:26.205"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:26.957" starttime="20190828 20:21:26.204"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:26.962" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:26.968" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:26.968" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20190828 20:21:26.968" starttime="20190828 20:21:26.960"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:26.969" level="INFO">s3g</msg>
<status status="PASS" endtime="20190828 20:21:26.969" starttime="20190828 20:21:26.968"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:26.970" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:26.970" starttime="20190828 20:21:26.969"></status>
</kw>
<msg timestamp="20190828 20:21:26.970" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20190828 20:21:26.970" starttime="20190828 20:21:26.960"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20190828 20:21:26.971" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20190828 20:21:26.971" starttime="20190828 20:21:26.971"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:26.974" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:26.986" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:26.987" level="INFO">${output} = </msg>
<status status="PASS" endtime="20190828 20:21:26.987" starttime="20190828 20:21:26.973"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:26.988" level="INFO"></msg>
<status status="PASS" endtime="20190828 20:21:26.988" starttime="20190828 20:21:26.987"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:26.989" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:26.989" starttime="20190828 20:21:26.988"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:26.989" starttime="20190828 20:21:26.972"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:26.989" starttime="20190828 20:21:26.971"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:26.989" starttime="20190828 20:21:26.959"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:26.990" starttime="20190828 20:21:26.958"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:26.992" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:28.356" level="INFO">${rc} = 255</msg>
<msg timestamp="20190828 20:21:28.356" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20190828 20:21:28.356" starttime="20190828 20:21:26.990"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:28.357" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-08-28 20:21:28 ERROR OzoneClientFactory:192 - Couldn't create RpcClient protocol exception: 
java.lang.IllegalArgumentException: java.net.UnknownHostException: om
	at org.apache.hadoop.security.SecurityUtil.buildTokenService(SecurityUtil.java:447)
	at org.apache.hadoop.ozone.om.ha.OMProxyInfo.&lt;init&gt;(OMProxyInfo.java:40)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.loadOMClientConfigs(OMFailoverProxyProvider.java:109)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.&lt;init&gt;(OMFailoverProxyProvider.java:77)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.&lt;init&gt;(OzoneManagerProtocolClientSideTranslatorPB.java:195)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:155)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:189)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:152)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:102)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Caused by: java.net.UnknownHostException: om
	... 22 more
om</msg>
<status status="PASS" endtime="20190828 20:21:28.357" starttime="20190828 20:21:28.357"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:28.358" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20190828 20:21:28.358" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20190828 20:21:28.358" starttime="20190828 20:21:28.357"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:28.358" starttime="20190828 20:21:26.990"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:28.359" starttime="20190828 20:21:26.958"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:28.359" starttime="20190828 20:21:26.957"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:28.359" starttime="20190828 20:21:26.204"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:28.359" critical="yes" starttime="20190828 20:21:26.203">Setup failed:
255 != 0</status>
</test>
<test id="s1-s5-t4" name="Test Multipart Upload Complete Invalid part">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:28.364" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:28.368" level="INFO">${rc} = 1</msg>
<msg timestamp="20190828 20:21:28.368" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20190828 20:21:28.368" starttime="20190828 20:21:28.362"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20190828 20:21:28.369" starttime="20190828 20:21:28.368"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:28.371" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:28.554" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:28.554" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/Group'
Usage: yum [options] COMMAND

List of Commands:

check          Check for pr...</msg>
<status status="PASS" endtime="20190828 20:21:28.554" starttime="20190828 20:21:28.369"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:28.559" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:29.059" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:29.059" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
P...</msg>
<status status="PASS" endtime="20190828 20:21:29.060" starttime="20190828 20:21:28.557"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:29.061" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20190828 20:21:29.061" starttime="20190828 20:21:29.060"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:29.062" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:29.063" starttime="20190828 20:21:29.062"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:29.063" starttime="20190828 20:21:28.556"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:29.063" starttime="20190828 20:21:28.556"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:29.064" starttime="20190828 20:21:28.555"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:29.064" starttime="20190828 20:21:28.361"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:29.064" starttime="20190828 20:21:28.361"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:29.071" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:29.078" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:29.078" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20190828 20:21:29.078" starttime="20190828 20:21:29.069"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:29.079" level="INFO">s3g</msg>
<status status="PASS" endtime="20190828 20:21:29.080" starttime="20190828 20:21:29.079"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:29.081" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:29.081" starttime="20190828 20:21:29.080"></status>
</kw>
<msg timestamp="20190828 20:21:29.081" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20190828 20:21:29.081" starttime="20190828 20:21:29.068"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20190828 20:21:29.083" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20190828 20:21:29.083" starttime="20190828 20:21:29.082"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:29.087" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:29.103" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:29.103" level="INFO">${output} = </msg>
<status status="PASS" endtime="20190828 20:21:29.103" starttime="20190828 20:21:29.086"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:29.105" level="INFO"></msg>
<status status="PASS" endtime="20190828 20:21:29.105" starttime="20190828 20:21:29.104"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:29.106" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:29.106" starttime="20190828 20:21:29.105"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:29.106" starttime="20190828 20:21:29.085"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:29.107" starttime="20190828 20:21:29.083"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:29.107" starttime="20190828 20:21:29.067"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:29.107" starttime="20190828 20:21:29.066"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:29.110" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:30.510" level="INFO">${rc} = 255</msg>
<msg timestamp="20190828 20:21:30.510" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20190828 20:21:30.510" starttime="20190828 20:21:29.108"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:30.512" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-08-28 20:21:30 ERROR OzoneClientFactory:192 - Couldn't create RpcClient protocol exception: 
java.lang.IllegalArgumentException: java.net.UnknownHostException: om
	at org.apache.hadoop.security.SecurityUtil.buildTokenService(SecurityUtil.java:447)
	at org.apache.hadoop.ozone.om.ha.OMProxyInfo.&lt;init&gt;(OMProxyInfo.java:40)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.loadOMClientConfigs(OMFailoverProxyProvider.java:109)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.&lt;init&gt;(OMFailoverProxyProvider.java:77)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.&lt;init&gt;(OzoneManagerProtocolClientSideTranslatorPB.java:195)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:155)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:189)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:152)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:102)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Caused by: java.net.UnknownHostException: om
	... 22 more
om</msg>
<status status="PASS" endtime="20190828 20:21:30.512" starttime="20190828 20:21:30.511"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:30.513" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20190828 20:21:30.514" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20190828 20:21:30.514" starttime="20190828 20:21:30.513"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:30.514" starttime="20190828 20:21:29.107"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:30.515" starttime="20190828 20:21:29.065"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:30.515" starttime="20190828 20:21:29.064"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:30.515" starttime="20190828 20:21:28.361"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:30.515" critical="yes" starttime="20190828 20:21:28.360">Setup failed:
255 != 0</status>
</test>
<test id="s1-s5-t5" name="Test abort Multipart upload">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:30.522" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:30.530" level="INFO">${rc} = 1</msg>
<msg timestamp="20190828 20:21:30.530" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20190828 20:21:30.530" starttime="20190828 20:21:30.520"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20190828 20:21:30.532" starttime="20190828 20:21:30.531"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:30.535" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:30.705" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:30.705" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/Group'
Usage: yum [options] COMMAND

List of Commands:

check          Check for pr...</msg>
<status status="PASS" endtime="20190828 20:21:30.706" starttime="20190828 20:21:30.533"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:30.712" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:31.276" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:31.276" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
P...</msg>
<status status="PASS" endtime="20190828 20:21:31.276" starttime="20190828 20:21:30.709"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:31.278" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20190828 20:21:31.278" starttime="20190828 20:21:31.277"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:31.279" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:31.280" starttime="20190828 20:21:31.279"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:31.280" starttime="20190828 20:21:30.709"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:31.281" starttime="20190828 20:21:30.708"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:31.281" starttime="20190828 20:21:30.706"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:31.281" starttime="20190828 20:21:30.518"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:31.281" starttime="20190828 20:21:30.518"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:31.289" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:31.295" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:31.296" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20190828 20:21:31.296" starttime="20190828 20:21:31.286"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:31.298" level="INFO">s3g</msg>
<status status="PASS" endtime="20190828 20:21:31.298" starttime="20190828 20:21:31.297"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:31.299" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:31.299" starttime="20190828 20:21:31.298"></status>
</kw>
<msg timestamp="20190828 20:21:31.300" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20190828 20:21:31.300" starttime="20190828 20:21:31.285"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20190828 20:21:31.301" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20190828 20:21:31.301" starttime="20190828 20:21:31.300"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:31.306" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:31.322" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:31.322" level="INFO">${output} = </msg>
<status status="PASS" endtime="20190828 20:21:31.322" starttime="20190828 20:21:31.304"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:31.324" level="INFO"></msg>
<status status="PASS" endtime="20190828 20:21:31.324" starttime="20190828 20:21:31.323"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:31.325" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:31.325" starttime="20190828 20:21:31.324"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:31.326" starttime="20190828 20:21:31.303"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:31.326" starttime="20190828 20:21:31.302"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:31.326" starttime="20190828 20:21:31.285"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:31.326" starttime="20190828 20:21:31.284"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:31.330" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:32.852" level="INFO">${rc} = 255</msg>
<msg timestamp="20190828 20:21:32.852" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20190828 20:21:32.852" starttime="20190828 20:21:31.328"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:32.854" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-08-28 20:21:32 ERROR OzoneClientFactory:192 - Couldn't create RpcClient protocol exception: 
java.lang.IllegalArgumentException: java.net.UnknownHostException: om
	at org.apache.hadoop.security.SecurityUtil.buildTokenService(SecurityUtil.java:447)
	at org.apache.hadoop.ozone.om.ha.OMProxyInfo.&lt;init&gt;(OMProxyInfo.java:40)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.loadOMClientConfigs(OMFailoverProxyProvider.java:109)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.&lt;init&gt;(OMFailoverProxyProvider.java:77)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.&lt;init&gt;(OzoneManagerProtocolClientSideTranslatorPB.java:195)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:155)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:189)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:152)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:102)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Caused by: java.net.UnknownHostException: om
	... 22 more
om</msg>
<status status="PASS" endtime="20190828 20:21:32.855" starttime="20190828 20:21:32.853"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:32.856" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20190828 20:21:32.857" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20190828 20:21:32.857" starttime="20190828 20:21:32.855"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:32.857" starttime="20190828 20:21:31.327"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:32.858" starttime="20190828 20:21:31.283"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:32.858" starttime="20190828 20:21:31.282"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:32.858" starttime="20190828 20:21:30.517"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:32.859" critical="yes" starttime="20190828 20:21:30.516">Setup failed:
255 != 0</status>
</test>
<test id="s1-s5-t6" name="Test abort Multipart upload with invalid uploadId">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:32.866" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:32.871" level="INFO">${rc} = 1</msg>
<msg timestamp="20190828 20:21:32.871" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20190828 20:21:32.871" starttime="20190828 20:21:32.864"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20190828 20:21:32.873" starttime="20190828 20:21:32.872"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:32.875" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:33.079" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:33.080" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/Group'
Usage: yum [options] COMMAND

List of Commands:

check          Check for pr...</msg>
<status status="PASS" endtime="20190828 20:21:33.080" starttime="20190828 20:21:32.873"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:33.085" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:33.604" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:33.604" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
P...</msg>
<status status="PASS" endtime="20190828 20:21:33.605" starttime="20190828 20:21:33.083"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:33.606" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20190828 20:21:33.607" starttime="20190828 20:21:33.605"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:33.608" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:33.608" starttime="20190828 20:21:33.607"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:33.608" starttime="20190828 20:21:33.083"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:33.609" starttime="20190828 20:21:33.082"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:33.609" starttime="20190828 20:21:33.081"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:33.609" starttime="20190828 20:21:32.862"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:33.609" starttime="20190828 20:21:32.862"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:33.616" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:33.623" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:33.624" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20190828 20:21:33.624" starttime="20190828 20:21:33.614"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:33.626" level="INFO">s3g</msg>
<status status="PASS" endtime="20190828 20:21:33.626" starttime="20190828 20:21:33.625"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:33.627" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:33.627" starttime="20190828 20:21:33.626"></status>
</kw>
<msg timestamp="20190828 20:21:33.628" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20190828 20:21:33.628" starttime="20190828 20:21:33.613"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20190828 20:21:33.630" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20190828 20:21:33.630" starttime="20190828 20:21:33.628"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:33.635" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:33.649" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:33.650" level="INFO">${output} = </msg>
<status status="PASS" endtime="20190828 20:21:33.650" starttime="20190828 20:21:33.632"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:33.651" level="INFO"></msg>
<status status="PASS" endtime="20190828 20:21:33.651" starttime="20190828 20:21:33.650"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:33.652" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:33.653" starttime="20190828 20:21:33.652"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:33.653" starttime="20190828 20:21:33.631"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:33.653" starttime="20190828 20:21:33.630"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:33.654" starttime="20190828 20:21:33.612"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:33.654" starttime="20190828 20:21:33.611"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:33.657" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:35.204" level="INFO">${rc} = 255</msg>
<msg timestamp="20190828 20:21:35.204" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20190828 20:21:35.204" starttime="20190828 20:21:33.655"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:35.206" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-08-28 20:21:35 ERROR OzoneClientFactory:192 - Couldn't create RpcClient protocol exception: 
java.lang.IllegalArgumentException: java.net.UnknownHostException: om
	at org.apache.hadoop.security.SecurityUtil.buildTokenService(SecurityUtil.java:447)
	at org.apache.hadoop.ozone.om.ha.OMProxyInfo.&lt;init&gt;(OMProxyInfo.java:40)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.loadOMClientConfigs(OMFailoverProxyProvider.java:109)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.&lt;init&gt;(OMFailoverProxyProvider.java:77)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.&lt;init&gt;(OzoneManagerProtocolClientSideTranslatorPB.java:195)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:155)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:189)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:152)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:102)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Caused by: java.net.UnknownHostException: om
	... 22 more
om</msg>
<status status="PASS" endtime="20190828 20:21:35.206" starttime="20190828 20:21:35.205"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:35.206" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20190828 20:21:35.207" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20190828 20:21:35.209" starttime="20190828 20:21:35.206"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:35.211" starttime="20190828 20:21:33.654"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:35.211" starttime="20190828 20:21:33.611"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:35.212" starttime="20190828 20:21:33.610"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:35.212" starttime="20190828 20:21:32.861"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:35.213" critical="yes" starttime="20190828 20:21:32.860">Setup failed:
255 != 0</status>
</test>
<test id="s1-s5-t7" name="Upload part with Incorrect uploadID">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:35.220" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:35.225" level="INFO">${rc} = 1</msg>
<msg timestamp="20190828 20:21:35.226" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20190828 20:21:35.226" starttime="20190828 20:21:35.218"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20190828 20:21:35.228" starttime="20190828 20:21:35.226"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:35.229" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:35.433" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:35.433" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/Group'
Usage: yum [options] COMMAND

List of Commands:

check          Check for pr...</msg>
<status status="PASS" endtime="20190828 20:21:35.433" starttime="20190828 20:21:35.228"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:35.439" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:35.985" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:35.985" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
P...</msg>
<status status="PASS" endtime="20190828 20:21:35.985" starttime="20190828 20:21:35.437"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:35.986" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20190828 20:21:35.986" starttime="20190828 20:21:35.985"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:35.987" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:35.987" starttime="20190828 20:21:35.986"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:35.987" starttime="20190828 20:21:35.436"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:35.988" starttime="20190828 20:21:35.435"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:35.988" starttime="20190828 20:21:35.434"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:35.988" starttime="20190828 20:21:35.217"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:35.988" starttime="20190828 20:21:35.216"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:35.993" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:35.999" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:35.999" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20190828 20:21:35.999" starttime="20190828 20:21:35.991"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:36.001" level="INFO">s3g</msg>
<status status="PASS" endtime="20190828 20:21:36.001" starttime="20190828 20:21:36.000"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:36.002" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:36.002" starttime="20190828 20:21:36.001"></status>
</kw>
<msg timestamp="20190828 20:21:36.002" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20190828 20:21:36.002" starttime="20190828 20:21:35.990"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20190828 20:21:36.003" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20190828 20:21:36.004" starttime="20190828 20:21:36.003"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:36.007" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:36.019" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:36.019" level="INFO">${output} = </msg>
<status status="PASS" endtime="20190828 20:21:36.019" starttime="20190828 20:21:36.005"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:36.021" level="INFO"></msg>
<status status="PASS" endtime="20190828 20:21:36.021" starttime="20190828 20:21:36.020"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:36.021" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:36.022" starttime="20190828 20:21:36.021"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:36.022" starttime="20190828 20:21:36.005"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:36.022" starttime="20190828 20:21:36.004"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:36.022" starttime="20190828 20:21:35.990"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:36.022" starttime="20190828 20:21:35.989"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:36.025" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:37.486" level="INFO">${rc} = 255</msg>
<msg timestamp="20190828 20:21:37.486" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20190828 20:21:37.486" starttime="20190828 20:21:36.023"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:37.487" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-08-28 20:21:37 ERROR OzoneClientFactory:192 - Couldn't create RpcClient protocol exception: 
java.lang.IllegalArgumentException: java.net.UnknownHostException: om
	at org.apache.hadoop.security.SecurityUtil.buildTokenService(SecurityUtil.java:447)
	at org.apache.hadoop.ozone.om.ha.OMProxyInfo.&lt;init&gt;(OMProxyInfo.java:40)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.loadOMClientConfigs(OMFailoverProxyProvider.java:109)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.&lt;init&gt;(OMFailoverProxyProvider.java:77)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.&lt;init&gt;(OzoneManagerProtocolClientSideTranslatorPB.java:195)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:155)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:189)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:152)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:102)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Caused by: java.net.UnknownHostException: om
	... 22 more
om</msg>
<status status="PASS" endtime="20190828 20:21:37.488" starttime="20190828 20:21:37.487"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:37.488" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20190828 20:21:37.489" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20190828 20:21:37.489" starttime="20190828 20:21:37.488"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:37.490" starttime="20190828 20:21:36.023"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:37.490" starttime="20190828 20:21:35.989"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:37.490" starttime="20190828 20:21:35.988"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:37.491" starttime="20190828 20:21:35.215"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:37.491" critical="yes" starttime="20190828 20:21:35.214">Setup failed:
255 != 0</status>
</test>
<test id="s1-s5-t8" name="Test list parts">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:37.498" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:37.503" level="INFO">${rc} = 1</msg>
<msg timestamp="20190828 20:21:37.503" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20190828 20:21:37.503" starttime="20190828 20:21:37.495"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20190828 20:21:37.505" starttime="20190828 20:21:37.504"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:37.506" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:37.714" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:37.714" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/Group'
Usage: yum [options] COMMAND

List of Commands:

check          Check for pr...</msg>
<status status="PASS" endtime="20190828 20:21:37.714" starttime="20190828 20:21:37.505"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:37.719" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:38.203" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:38.203" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
P...</msg>
<status status="PASS" endtime="20190828 20:21:38.203" starttime="20190828 20:21:37.718"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:38.205" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20190828 20:21:38.205" starttime="20190828 20:21:38.204"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:38.206" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:38.207" starttime="20190828 20:21:38.206"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:38.207" starttime="20190828 20:21:37.717"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:38.207" starttime="20190828 20:21:37.716"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:38.208" starttime="20190828 20:21:37.715"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:38.208" starttime="20190828 20:21:37.494"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:38.208" starttime="20190828 20:21:37.494"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:38.215" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:38.222" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:38.222" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20190828 20:21:38.222" starttime="20190828 20:21:38.213"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:38.223" level="INFO">s3g</msg>
<status status="PASS" endtime="20190828 20:21:38.223" starttime="20190828 20:21:38.222"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:38.224" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:38.224" starttime="20190828 20:21:38.223"></status>
</kw>
<msg timestamp="20190828 20:21:38.224" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20190828 20:21:38.224" starttime="20190828 20:21:38.212"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20190828 20:21:38.225" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20190828 20:21:38.225" starttime="20190828 20:21:38.224"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:38.228" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:38.243" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:38.243" level="INFO">${output} = </msg>
<status status="PASS" endtime="20190828 20:21:38.243" starttime="20190828 20:21:38.227"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:38.244" level="INFO"></msg>
<status status="PASS" endtime="20190828 20:21:38.244" starttime="20190828 20:21:38.244"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:38.245" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:38.245" starttime="20190828 20:21:38.245"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:38.246" starttime="20190828 20:21:38.226"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:38.246" starttime="20190828 20:21:38.225"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:38.246" starttime="20190828 20:21:38.211"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:38.246" starttime="20190828 20:21:38.211"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:38.248" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:39.652" level="INFO">${rc} = 255</msg>
<msg timestamp="20190828 20:21:39.653" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20190828 20:21:39.653" starttime="20190828 20:21:38.247"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:39.654" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-08-28 20:21:39 ERROR OzoneClientFactory:192 - Couldn't create RpcClient protocol exception: 
java.lang.IllegalArgumentException: java.net.UnknownHostException: om
	at org.apache.hadoop.security.SecurityUtil.buildTokenService(SecurityUtil.java:447)
	at org.apache.hadoop.ozone.om.ha.OMProxyInfo.&lt;init&gt;(OMProxyInfo.java:40)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.loadOMClientConfigs(OMFailoverProxyProvider.java:109)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.&lt;init&gt;(OMFailoverProxyProvider.java:77)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.&lt;init&gt;(OzoneManagerProtocolClientSideTranslatorPB.java:195)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:155)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:189)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:152)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:102)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Caused by: java.net.UnknownHostException: om
	... 22 more
om</msg>
<status status="PASS" endtime="20190828 20:21:39.654" starttime="20190828 20:21:39.653"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:39.655" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20190828 20:21:39.656" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20190828 20:21:39.656" starttime="20190828 20:21:39.655"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:39.656" starttime="20190828 20:21:38.246"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:39.656" starttime="20190828 20:21:38.210"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:39.656" starttime="20190828 20:21:38.209"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:39.657" starttime="20190828 20:21:37.493"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:39.657" critical="yes" starttime="20190828 20:21:37.492">Setup failed:
255 != 0</status>
</test>
<test id="s1-s5-t9" name="Test Multipart Upload with the simplified aws s3 cp API">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:39.662" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:39.668" level="INFO">${rc} = 1</msg>
<msg timestamp="20190828 20:21:39.668" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20190828 20:21:39.668" starttime="20190828 20:21:39.660"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20190828 20:21:39.669" starttime="20190828 20:21:39.669"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:39.671" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:39.852" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:39.853" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/Group'
Usage: yum [options] COMMAND

List of Commands:

check          Check for pr...</msg>
<status status="PASS" endtime="20190828 20:21:39.853" starttime="20190828 20:21:39.670"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:39.859" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:40.401" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:40.401" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
P...</msg>
<status status="PASS" endtime="20190828 20:21:40.401" starttime="20190828 20:21:39.857"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:40.403" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20190828 20:21:40.403" starttime="20190828 20:21:40.402"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:40.405" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:40.405" starttime="20190828 20:21:40.404"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:40.406" starttime="20190828 20:21:39.856"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:40.406" starttime="20190828 20:21:39.855"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:40.406" starttime="20190828 20:21:39.854"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:40.406" starttime="20190828 20:21:39.660"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:40.407" starttime="20190828 20:21:39.659"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:40.414" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:40.421" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:40.421" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20190828 20:21:40.421" starttime="20190828 20:21:40.412"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:40.423" level="INFO">s3g</msg>
<status status="PASS" endtime="20190828 20:21:40.423" starttime="20190828 20:21:40.422"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:40.424" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:40.424" starttime="20190828 20:21:40.423"></status>
</kw>
<msg timestamp="20190828 20:21:40.425" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20190828 20:21:40.425" starttime="20190828 20:21:40.411"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20190828 20:21:40.426" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20190828 20:21:40.426" starttime="20190828 20:21:40.425"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:40.431" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:40.447" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:40.448" level="INFO">${output} = </msg>
<status status="PASS" endtime="20190828 20:21:40.448" starttime="20190828 20:21:40.429"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:40.449" level="INFO"></msg>
<status status="PASS" endtime="20190828 20:21:40.449" starttime="20190828 20:21:40.448"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:40.450" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:40.450" starttime="20190828 20:21:40.450"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:40.451" starttime="20190828 20:21:40.428"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:40.451" starttime="20190828 20:21:40.427"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:40.451" starttime="20190828 20:21:40.410"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:40.452" starttime="20190828 20:21:40.409"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:40.455" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:41.926" level="INFO">${rc} = 255</msg>
<msg timestamp="20190828 20:21:41.926" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20190828 20:21:41.926" starttime="20190828 20:21:40.453"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:41.928" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-08-28 20:21:41 ERROR OzoneClientFactory:192 - Couldn't create RpcClient protocol exception: 
java.lang.IllegalArgumentException: java.net.UnknownHostException: om
	at org.apache.hadoop.security.SecurityUtil.buildTokenService(SecurityUtil.java:447)
	at org.apache.hadoop.ozone.om.ha.OMProxyInfo.&lt;init&gt;(OMProxyInfo.java:40)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.loadOMClientConfigs(OMFailoverProxyProvider.java:109)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.&lt;init&gt;(OMFailoverProxyProvider.java:77)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.&lt;init&gt;(OzoneManagerProtocolClientSideTranslatorPB.java:195)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:155)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:189)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:152)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:102)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Caused by: java.net.UnknownHostException: om
	... 22 more
om</msg>
<status status="PASS" endtime="20190828 20:21:41.929" starttime="20190828 20:21:41.927"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:41.930" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20190828 20:21:41.930" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20190828 20:21:41.931" starttime="20190828 20:21:41.929"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:41.931" starttime="20190828 20:21:40.452"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:41.932" starttime="20190828 20:21:40.408"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:41.932" starttime="20190828 20:21:40.407"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:41.932" starttime="20190828 20:21:39.659"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:41.933" critical="yes" starttime="20190828 20:21:39.658">Setup failed:
255 != 0</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20190828 20:21:41.936" starttime="20190828 20:21:21.667"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/objectcopy.robot" id="s1-s6" name="Objectcopy">
<test id="s1-s6-t1" name="Copy Object Happy Scenario">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:41.964" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:41.972" level="INFO">${rc} = 1</msg>
<msg timestamp="20190828 20:21:41.972" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20190828 20:21:41.972" starttime="20190828 20:21:41.962"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20190828 20:21:41.974" starttime="20190828 20:21:41.973"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:41.977" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:42.176" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:42.176" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/Group'
Usage: yum [options] COMMAND

List of Commands:

check          Check for pr...</msg>
<status status="PASS" endtime="20190828 20:21:42.176" starttime="20190828 20:21:41.975"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:42.183" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:42.673" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:42.673" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
P...</msg>
<status status="PASS" endtime="20190828 20:21:42.674" starttime="20190828 20:21:42.180"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:42.676" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20190828 20:21:42.676" starttime="20190828 20:21:42.674"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:42.677" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:42.677" starttime="20190828 20:21:42.676"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:42.678" starttime="20190828 20:21:42.179"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:42.678" starttime="20190828 20:21:42.179"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:42.678" starttime="20190828 20:21:42.177"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:42.678" starttime="20190828 20:21:41.961"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:42.679" starttime="20190828 20:21:41.961"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:42.686" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:42.693" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:42.693" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20190828 20:21:42.693" starttime="20190828 20:21:42.683"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:42.695" level="INFO">s3g</msg>
<status status="PASS" endtime="20190828 20:21:42.695" starttime="20190828 20:21:42.694"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:42.696" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:42.696" starttime="20190828 20:21:42.695"></status>
</kw>
<msg timestamp="20190828 20:21:42.697" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20190828 20:21:42.697" starttime="20190828 20:21:42.683"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20190828 20:21:42.701" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20190828 20:21:42.701" starttime="20190828 20:21:42.698"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:42.705" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:42.721" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:42.721" level="INFO">${output} = </msg>
<status status="PASS" endtime="20190828 20:21:42.721" starttime="20190828 20:21:42.703"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:42.723" level="INFO"></msg>
<status status="PASS" endtime="20190828 20:21:42.723" starttime="20190828 20:21:42.722"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:42.724" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:42.724" starttime="20190828 20:21:42.723"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:42.725" starttime="20190828 20:21:42.702"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:42.725" starttime="20190828 20:21:42.701"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:42.725" starttime="20190828 20:21:42.682"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:42.726" starttime="20190828 20:21:42.681"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:42.729" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:44.233" level="INFO">${rc} = 255</msg>
<msg timestamp="20190828 20:21:44.233" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20190828 20:21:44.233" starttime="20190828 20:21:42.727"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:44.235" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-08-28 20:21:44 ERROR OzoneClientFactory:192 - Couldn't create RpcClient protocol exception: 
java.lang.IllegalArgumentException: java.net.UnknownHostException: om
	at org.apache.hadoop.security.SecurityUtil.buildTokenService(SecurityUtil.java:447)
	at org.apache.hadoop.ozone.om.ha.OMProxyInfo.&lt;init&gt;(OMProxyInfo.java:40)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.loadOMClientConfigs(OMFailoverProxyProvider.java:109)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.&lt;init&gt;(OMFailoverProxyProvider.java:77)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.&lt;init&gt;(OzoneManagerProtocolClientSideTranslatorPB.java:195)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:155)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:189)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:152)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:102)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Caused by: java.net.UnknownHostException: om
	... 22 more
om</msg>
<status status="PASS" endtime="20190828 20:21:44.236" starttime="20190828 20:21:44.234"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:44.237" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20190828 20:21:44.238" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20190828 20:21:44.238" starttime="20190828 20:21:44.236"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:44.238" starttime="20190828 20:21:42.726"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:44.239" starttime="20190828 20:21:42.680"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:44.239" starttime="20190828 20:21:42.679"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:44.240" starttime="20190828 20:21:41.960"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:44.240" critical="yes" starttime="20190828 20:21:41.959">Setup failed:
255 != 0</status>
</test>
<test id="s1-s6-t2" name="Copy Object Where Bucket is not available">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:44.247" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:44.254" level="INFO">${rc} = 1</msg>
<msg timestamp="20190828 20:21:44.254" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20190828 20:21:44.254" starttime="20190828 20:21:44.245"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20190828 20:21:44.256" starttime="20190828 20:21:44.255"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:44.258" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:44.440" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:44.440" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/Group'
Usage: yum [options] COMMAND

List of Commands:

check          Check for pr...</msg>
<status status="PASS" endtime="20190828 20:21:44.441" starttime="20190828 20:21:44.257"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:44.447" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:44.980" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:44.980" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
P...</msg>
<status status="PASS" endtime="20190828 20:21:44.980" starttime="20190828 20:21:44.445"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:44.982" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20190828 20:21:44.983" starttime="20190828 20:21:44.981"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:44.984" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:44.984" starttime="20190828 20:21:44.983"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:44.985" starttime="20190828 20:21:44.444"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:44.985" starttime="20190828 20:21:44.443"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:44.985" starttime="20190828 20:21:44.442"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:44.985" starttime="20190828 20:21:44.244"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:44.986" starttime="20190828 20:21:44.243"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:44.994" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:45.000" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:45.000" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20190828 20:21:45.000" starttime="20190828 20:21:44.991"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:45.002" level="INFO">s3g</msg>
<status status="PASS" endtime="20190828 20:21:45.002" starttime="20190828 20:21:45.001"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:45.002" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:45.003" starttime="20190828 20:21:45.002"></status>
</kw>
<msg timestamp="20190828 20:21:45.003" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20190828 20:21:45.003" starttime="20190828 20:21:44.990"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20190828 20:21:45.004" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20190828 20:21:45.004" starttime="20190828 20:21:45.003"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:45.008" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:45.024" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:45.024" level="INFO">${output} = </msg>
<status status="PASS" endtime="20190828 20:21:45.024" starttime="20190828 20:21:45.006"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:45.026" level="INFO"></msg>
<status status="PASS" endtime="20190828 20:21:45.026" starttime="20190828 20:21:45.025"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:45.026" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:45.027" starttime="20190828 20:21:45.026"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:45.027" starttime="20190828 20:21:45.005"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:45.027" starttime="20190828 20:21:45.005"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:45.027" starttime="20190828 20:21:44.989"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:45.027" starttime="20190828 20:21:44.988"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:45.030" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:46.384" level="INFO">${rc} = 255</msg>
<msg timestamp="20190828 20:21:46.384" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20190828 20:21:46.385" starttime="20190828 20:21:45.028"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:46.386" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-08-28 20:21:46 ERROR OzoneClientFactory:192 - Couldn't create RpcClient protocol exception: 
java.lang.IllegalArgumentException: java.net.UnknownHostException: om
	at org.apache.hadoop.security.SecurityUtil.buildTokenService(SecurityUtil.java:447)
	at org.apache.hadoop.ozone.om.ha.OMProxyInfo.&lt;init&gt;(OMProxyInfo.java:40)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.loadOMClientConfigs(OMFailoverProxyProvider.java:109)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.&lt;init&gt;(OMFailoverProxyProvider.java:77)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.&lt;init&gt;(OzoneManagerProtocolClientSideTranslatorPB.java:195)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:155)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:189)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:152)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:102)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Caused by: java.net.UnknownHostException: om
	... 22 more
om</msg>
<status status="PASS" endtime="20190828 20:21:46.387" starttime="20190828 20:21:46.385"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:46.387" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20190828 20:21:46.388" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20190828 20:21:46.388" starttime="20190828 20:21:46.387"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:46.389" starttime="20190828 20:21:45.028"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:46.389" starttime="20190828 20:21:44.987"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:46.389" starttime="20190828 20:21:44.986"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:46.389" starttime="20190828 20:21:44.243"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:46.390" critical="yes" starttime="20190828 20:21:44.241">Setup failed:
255 != 0</status>
</test>
<test id="s1-s6-t3" name="Copy Object Where both source and dest are same with change to storageclass">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:46.396" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:46.400" level="INFO">${rc} = 1</msg>
<msg timestamp="20190828 20:21:46.400" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20190828 20:21:46.401" starttime="20190828 20:21:46.394"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20190828 20:21:46.402" starttime="20190828 20:21:46.401"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:46.404" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:46.588" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:46.589" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/Group'
Usage: yum [options] COMMAND

List of Commands:

check          Check for pr...</msg>
<status status="PASS" endtime="20190828 20:21:46.589" starttime="20190828 20:21:46.403"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:46.595" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:47.159" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:47.159" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
P...</msg>
<status status="PASS" endtime="20190828 20:21:47.160" starttime="20190828 20:21:46.593"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:47.162" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20190828 20:21:47.162" starttime="20190828 20:21:47.161"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:47.163" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:47.163" starttime="20190828 20:21:47.162"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:47.164" starttime="20190828 20:21:46.592"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:47.164" starttime="20190828 20:21:46.591"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:47.164" starttime="20190828 20:21:46.590"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:47.165" starttime="20190828 20:21:46.393"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:47.165" starttime="20190828 20:21:46.393"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:47.173" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:47.180" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:47.180" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20190828 20:21:47.180" starttime="20190828 20:21:47.170"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:47.181" level="INFO">s3g</msg>
<status status="PASS" endtime="20190828 20:21:47.182" starttime="20190828 20:21:47.181"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:47.183" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:47.183" starttime="20190828 20:21:47.182"></status>
</kw>
<msg timestamp="20190828 20:21:47.183" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20190828 20:21:47.184" starttime="20190828 20:21:47.169"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20190828 20:21:47.185" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20190828 20:21:47.185" starttime="20190828 20:21:47.184"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:47.190" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:47.220" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:47.220" level="INFO">${output} = </msg>
<status status="PASS" endtime="20190828 20:21:47.220" starttime="20190828 20:21:47.188"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:47.222" level="INFO"></msg>
<status status="PASS" endtime="20190828 20:21:47.222" starttime="20190828 20:21:47.221"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:47.223" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:47.223" starttime="20190828 20:21:47.222"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:47.224" starttime="20190828 20:21:47.186"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:47.224" starttime="20190828 20:21:47.186"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:47.224" starttime="20190828 20:21:47.169"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:47.225" starttime="20190828 20:21:47.168"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:47.228" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:48.546" level="INFO">${rc} = 255</msg>
<msg timestamp="20190828 20:21:48.547" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20190828 20:21:48.547" starttime="20190828 20:21:47.226"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:48.548" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-08-28 20:21:48 ERROR OzoneClientFactory:192 - Couldn't create RpcClient protocol exception: 
java.lang.IllegalArgumentException: java.net.UnknownHostException: om
	at org.apache.hadoop.security.SecurityUtil.buildTokenService(SecurityUtil.java:447)
	at org.apache.hadoop.ozone.om.ha.OMProxyInfo.&lt;init&gt;(OMProxyInfo.java:40)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.loadOMClientConfigs(OMFailoverProxyProvider.java:109)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.&lt;init&gt;(OMFailoverProxyProvider.java:77)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.&lt;init&gt;(OzoneManagerProtocolClientSideTranslatorPB.java:195)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:155)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:189)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:152)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:102)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Caused by: java.net.UnknownHostException: om
	... 22 more
om</msg>
<status status="PASS" endtime="20190828 20:21:48.548" starttime="20190828 20:21:48.547"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:48.549" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20190828 20:21:48.549" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20190828 20:21:48.550" starttime="20190828 20:21:48.548"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:48.550" starttime="20190828 20:21:47.225"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:48.550" starttime="20190828 20:21:47.167"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:48.550" starttime="20190828 20:21:47.165"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:48.551" starttime="20190828 20:21:46.392"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:48.551" critical="yes" starttime="20190828 20:21:46.391">Setup failed:
255 != 0</status>
</test>
<test id="s1-s6-t4" name="Copy Object Where Key not available">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:48.555" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:48.560" level="INFO">${rc} = 1</msg>
<msg timestamp="20190828 20:21:48.560" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20190828 20:21:48.560" starttime="20190828 20:21:48.554"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20190828 20:21:48.561" starttime="20190828 20:21:48.561"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:48.563" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:48.727" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:48.727" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/Group'
Usage: yum [options] COMMAND

List of Commands:

check          Check for pr...</msg>
<status status="PASS" endtime="20190828 20:21:48.727" starttime="20190828 20:21:48.562"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:48.731" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:49.266" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:49.266" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
P...</msg>
<status status="PASS" endtime="20190828 20:21:49.267" starttime="20190828 20:21:48.729"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:49.269" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20190828 20:21:49.269" starttime="20190828 20:21:49.268"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:49.270" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:49.270" starttime="20190828 20:21:49.269"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:49.271" starttime="20190828 20:21:48.729"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:49.271" starttime="20190828 20:21:48.728"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:49.272" starttime="20190828 20:21:48.727"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:49.272" starttime="20190828 20:21:48.553"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:49.272" starttime="20190828 20:21:48.553"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:49.280" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:49.287" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:49.288" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20190828 20:21:49.288" starttime="20190828 20:21:49.277"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:49.290" level="INFO">s3g</msg>
<status status="PASS" endtime="20190828 20:21:49.290" starttime="20190828 20:21:49.289"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:49.291" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:49.291" starttime="20190828 20:21:49.290"></status>
</kw>
<msg timestamp="20190828 20:21:49.292" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20190828 20:21:49.292" starttime="20190828 20:21:49.276"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20190828 20:21:49.294" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20190828 20:21:49.294" starttime="20190828 20:21:49.292"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:49.299" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:49.315" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:49.315" level="INFO">${output} = </msg>
<status status="PASS" endtime="20190828 20:21:49.315" starttime="20190828 20:21:49.296"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:49.317" level="INFO"></msg>
<status status="PASS" endtime="20190828 20:21:49.317" starttime="20190828 20:21:49.316"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:49.318" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:49.318" starttime="20190828 20:21:49.317"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:49.319" starttime="20190828 20:21:49.295"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:49.319" starttime="20190828 20:21:49.294"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:49.319" starttime="20190828 20:21:49.275"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:49.319" starttime="20190828 20:21:49.274"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:49.323" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:50.753" level="INFO">${rc} = 255</msg>
<msg timestamp="20190828 20:21:50.753" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20190828 20:21:50.753" starttime="20190828 20:21:49.320"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:50.755" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-08-28 20:21:50 ERROR OzoneClientFactory:192 - Couldn't create RpcClient protocol exception: 
java.lang.IllegalArgumentException: java.net.UnknownHostException: om
	at org.apache.hadoop.security.SecurityUtil.buildTokenService(SecurityUtil.java:447)
	at org.apache.hadoop.ozone.om.ha.OMProxyInfo.&lt;init&gt;(OMProxyInfo.java:40)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.loadOMClientConfigs(OMFailoverProxyProvider.java:109)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.&lt;init&gt;(OMFailoverProxyProvider.java:77)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.&lt;init&gt;(OzoneManagerProtocolClientSideTranslatorPB.java:195)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:155)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:189)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:152)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:102)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Caused by: java.net.UnknownHostException: om
	... 22 more
om</msg>
<status status="PASS" endtime="20190828 20:21:50.755" starttime="20190828 20:21:50.754"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:50.756" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20190828 20:21:50.756" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20190828 20:21:50.756" starttime="20190828 20:21:50.755"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:50.757" starttime="20190828 20:21:49.320"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:50.757" starttime="20190828 20:21:49.274"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:50.757" starttime="20190828 20:21:49.272"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:50.757" starttime="20190828 20:21:48.552"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:50.758" critical="yes" starttime="20190828 20:21:48.551">Setup failed:
255 != 0</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20190828 20:21:50.759" starttime="20190828 20:21:41.945"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/objectdelete.robot" id="s1-s7" name="Objectdelete">
<test id="s1-s7-t1" name="Delete file with s3api">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:50.777" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:50.781" level="INFO">${rc} = 1</msg>
<msg timestamp="20190828 20:21:50.781" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20190828 20:21:50.782" starttime="20190828 20:21:50.775"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20190828 20:21:50.783" starttime="20190828 20:21:50.782"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:50.785" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:50.991" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:50.992" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/Group'
Usage: yum [options] COMMAND

List of Commands:

check          Check for pr...</msg>
<status status="PASS" endtime="20190828 20:21:50.992" starttime="20190828 20:21:50.784"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:50.998" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:51.565" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:51.565" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
P...</msg>
<status status="PASS" endtime="20190828 20:21:51.565" starttime="20190828 20:21:50.996"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:51.566" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20190828 20:21:51.566" starttime="20190828 20:21:51.566"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:51.567" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:51.567" starttime="20190828 20:21:51.566"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:51.567" starttime="20190828 20:21:50.995"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:51.568" starttime="20190828 20:21:50.994"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:51.568" starttime="20190828 20:21:50.993"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:51.568" starttime="20190828 20:21:50.774"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:51.568" starttime="20190828 20:21:50.774"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:51.573" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:51.579" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:51.579" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20190828 20:21:51.579" starttime="20190828 20:21:51.571"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:51.581" level="INFO">s3g</msg>
<status status="PASS" endtime="20190828 20:21:51.581" starttime="20190828 20:21:51.580"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:51.581" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:51.582" starttime="20190828 20:21:51.581"></status>
</kw>
<msg timestamp="20190828 20:21:51.582" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20190828 20:21:51.582" starttime="20190828 20:21:51.571"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20190828 20:21:51.584" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20190828 20:21:51.584" starttime="20190828 20:21:51.582"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:51.588" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:51.601" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:51.601" level="INFO">${output} = </msg>
<status status="PASS" endtime="20190828 20:21:51.601" starttime="20190828 20:21:51.586"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:51.603" level="INFO"></msg>
<status status="PASS" endtime="20190828 20:21:51.603" starttime="20190828 20:21:51.602"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:51.603" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:51.604" starttime="20190828 20:21:51.603"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:51.604" starttime="20190828 20:21:51.585"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:51.604" starttime="20190828 20:21:51.585"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:51.604" starttime="20190828 20:21:51.570"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:51.604" starttime="20190828 20:21:51.569"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:51.607" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:52.981" level="INFO">${rc} = 255</msg>
<msg timestamp="20190828 20:21:52.981" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20190828 20:21:52.981" starttime="20190828 20:21:51.605"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:52.983" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-08-28 20:21:52 ERROR OzoneClientFactory:192 - Couldn't create RpcClient protocol exception: 
java.lang.IllegalArgumentException: java.net.UnknownHostException: om
	at org.apache.hadoop.security.SecurityUtil.buildTokenService(SecurityUtil.java:447)
	at org.apache.hadoop.ozone.om.ha.OMProxyInfo.&lt;init&gt;(OMProxyInfo.java:40)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.loadOMClientConfigs(OMFailoverProxyProvider.java:109)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.&lt;init&gt;(OMFailoverProxyProvider.java:77)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.&lt;init&gt;(OzoneManagerProtocolClientSideTranslatorPB.java:195)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:155)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:189)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:152)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:102)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Caused by: java.net.UnknownHostException: om
	... 22 more
om</msg>
<status status="PASS" endtime="20190828 20:21:52.983" starttime="20190828 20:21:52.982"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:52.984" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20190828 20:21:52.984" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20190828 20:21:52.984" starttime="20190828 20:21:52.983"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:52.985" starttime="20190828 20:21:51.605"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:52.985" starttime="20190828 20:21:51.569"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:52.985" starttime="20190828 20:21:51.568"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:52.985" starttime="20190828 20:21:50.773"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:52.986" critical="yes" starttime="20190828 20:21:50.773">Setup failed:
255 != 0</status>
</test>
<test id="s1-s7-t2" name="Delete file with s3api, file doesn't exist">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:52.992" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:52.996" level="INFO">${rc} = 1</msg>
<msg timestamp="20190828 20:21:52.996" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20190828 20:21:52.996" starttime="20190828 20:21:52.990"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20190828 20:21:52.998" starttime="20190828 20:21:52.997"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:53.001" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:53.191" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:53.192" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/Group'
Usage: yum [options] COMMAND

List of Commands:

check          Check for pr...</msg>
<status status="PASS" endtime="20190828 20:21:53.192" starttime="20190828 20:21:52.998"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:53.198" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:53.653" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:53.653" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
P...</msg>
<status status="PASS" endtime="20190828 20:21:53.653" starttime="20190828 20:21:53.196"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:53.655" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20190828 20:21:53.656" starttime="20190828 20:21:53.654"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:53.657" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:53.657" starttime="20190828 20:21:53.656"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:53.658" starttime="20190828 20:21:53.195"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:53.658" starttime="20190828 20:21:53.194"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:53.658" starttime="20190828 20:21:53.193"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:53.659" starttime="20190828 20:21:52.989"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:53.659" starttime="20190828 20:21:52.988"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:53.667" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:53.672" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:53.672" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20190828 20:21:53.673" starttime="20190828 20:21:53.665"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:53.674" level="INFO">s3g</msg>
<status status="PASS" endtime="20190828 20:21:53.674" starttime="20190828 20:21:53.673"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:53.675" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:53.675" starttime="20190828 20:21:53.674"></status>
</kw>
<msg timestamp="20190828 20:21:53.675" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20190828 20:21:53.675" starttime="20190828 20:21:53.664"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20190828 20:21:53.676" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20190828 20:21:53.677" starttime="20190828 20:21:53.676"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:53.680" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:53.694" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:53.694" level="INFO">${output} = </msg>
<status status="PASS" endtime="20190828 20:21:53.694" starttime="20190828 20:21:53.678"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:53.696" level="INFO"></msg>
<status status="PASS" endtime="20190828 20:21:53.696" starttime="20190828 20:21:53.695"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:53.696" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:53.696" starttime="20190828 20:21:53.696"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:53.697" starttime="20190828 20:21:53.678"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:53.697" starttime="20190828 20:21:53.677"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:53.697" starttime="20190828 20:21:53.662"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:53.697" starttime="20190828 20:21:53.661"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:53.700" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:55.181" level="INFO">${rc} = 255</msg>
<msg timestamp="20190828 20:21:55.181" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20190828 20:21:55.181" starttime="20190828 20:21:53.698"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:55.182" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-08-28 20:21:55 ERROR OzoneClientFactory:192 - Couldn't create RpcClient protocol exception: 
java.lang.IllegalArgumentException: java.net.UnknownHostException: om
	at org.apache.hadoop.security.SecurityUtil.buildTokenService(SecurityUtil.java:447)
	at org.apache.hadoop.ozone.om.ha.OMProxyInfo.&lt;init&gt;(OMProxyInfo.java:40)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.loadOMClientConfigs(OMFailoverProxyProvider.java:109)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.&lt;init&gt;(OMFailoverProxyProvider.java:77)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.&lt;init&gt;(OzoneManagerProtocolClientSideTranslatorPB.java:195)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:155)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:189)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:152)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:102)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Caused by: java.net.UnknownHostException: om
	... 22 more
om</msg>
<status status="PASS" endtime="20190828 20:21:55.183" starttime="20190828 20:21:55.182"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:55.183" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20190828 20:21:55.184" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20190828 20:21:55.184" starttime="20190828 20:21:55.183"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:55.184" starttime="20190828 20:21:53.697"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:55.185" starttime="20190828 20:21:53.661"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:55.185" starttime="20190828 20:21:53.659"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:55.185" starttime="20190828 20:21:52.987"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:55.185" critical="yes" starttime="20190828 20:21:52.986">Setup failed:
255 != 0</status>
</test>
<test id="s1-s7-t3" name="Delete dir with s3api">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:55.193" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:55.197" level="INFO">${rc} = 1</msg>
<msg timestamp="20190828 20:21:55.198" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20190828 20:21:55.198" starttime="20190828 20:21:55.189"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20190828 20:21:55.200" starttime="20190828 20:21:55.199"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:55.202" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:55.391" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:55.392" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/Group'
Usage: yum [options] COMMAND

List of Commands:

check          Check for pr...</msg>
<status status="PASS" endtime="20190828 20:21:55.392" starttime="20190828 20:21:55.200"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:55.397" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:55.933" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:55.933" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
P...</msg>
<status status="PASS" endtime="20190828 20:21:55.933" starttime="20190828 20:21:55.395"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:55.935" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20190828 20:21:55.935" starttime="20190828 20:21:55.934"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:55.936" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:55.936" starttime="20190828 20:21:55.935"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:55.937" starttime="20190828 20:21:55.395"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:55.937" starttime="20190828 20:21:55.394"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:55.937" starttime="20190828 20:21:55.393"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:55.938" starttime="20190828 20:21:55.188"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:55.938" starttime="20190828 20:21:55.188"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:55.944" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:55.951" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:55.952" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20190828 20:21:55.952" starttime="20190828 20:21:55.942"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:55.954" level="INFO">s3g</msg>
<status status="PASS" endtime="20190828 20:21:55.954" starttime="20190828 20:21:55.953"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:55.955" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:55.955" starttime="20190828 20:21:55.954"></status>
</kw>
<msg timestamp="20190828 20:21:55.956" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20190828 20:21:55.956" starttime="20190828 20:21:55.941"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20190828 20:21:55.957" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20190828 20:21:55.957" starttime="20190828 20:21:55.956"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:55.962" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:55.979" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:55.980" level="INFO">${output} = </msg>
<status status="PASS" endtime="20190828 20:21:55.980" starttime="20190828 20:21:55.960"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:55.982" level="INFO"></msg>
<status status="PASS" endtime="20190828 20:21:55.982" starttime="20190828 20:21:55.981"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:55.983" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:55.983" starttime="20190828 20:21:55.982"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:55.983" starttime="20190828 20:21:55.959"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:55.984" starttime="20190828 20:21:55.958"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:55.984" starttime="20190828 20:21:55.941"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:55.984" starttime="20190828 20:21:55.940"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:55.987" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:57.452" level="INFO">${rc} = 255</msg>
<msg timestamp="20190828 20:21:57.453" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20190828 20:21:57.453" starttime="20190828 20:21:55.985"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:57.454" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-08-28 20:21:57 ERROR OzoneClientFactory:192 - Couldn't create RpcClient protocol exception: 
java.lang.IllegalArgumentException: java.net.UnknownHostException: om
	at org.apache.hadoop.security.SecurityUtil.buildTokenService(SecurityUtil.java:447)
	at org.apache.hadoop.ozone.om.ha.OMProxyInfo.&lt;init&gt;(OMProxyInfo.java:40)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.loadOMClientConfigs(OMFailoverProxyProvider.java:109)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.&lt;init&gt;(OMFailoverProxyProvider.java:77)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.&lt;init&gt;(OzoneManagerProtocolClientSideTranslatorPB.java:195)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:155)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:189)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:152)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:102)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Caused by: java.net.UnknownHostException: om
	... 22 more
om</msg>
<status status="PASS" endtime="20190828 20:21:57.454" starttime="20190828 20:21:57.453"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:57.455" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20190828 20:21:57.456" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20190828 20:21:57.456" starttime="20190828 20:21:57.455"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:57.456" starttime="20190828 20:21:55.984"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:57.457" starttime="20190828 20:21:55.939"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:57.457" starttime="20190828 20:21:55.938"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:57.457" starttime="20190828 20:21:55.187"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:57.458" critical="yes" starttime="20190828 20:21:55.186">Setup failed:
255 != 0</status>
</test>
<test id="s1-s7-t4" name="Delete file with s3api, file doesn't exist, prefix of a real file">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:57.464" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:57.469" level="INFO">${rc} = 1</msg>
<msg timestamp="20190828 20:21:57.469" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20190828 20:21:57.469" starttime="20190828 20:21:57.461"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20190828 20:21:57.470" starttime="20190828 20:21:57.469"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:57.472" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:57.641" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:57.641" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/Group'
Usage: yum [options] COMMAND

List of Commands:

check          Check for pr...</msg>
<status status="PASS" endtime="20190828 20:21:57.641" starttime="20190828 20:21:57.470"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:57.645" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:58.188" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:58.189" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
P...</msg>
<status status="PASS" endtime="20190828 20:21:58.189" starttime="20190828 20:21:57.644"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:58.190" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20190828 20:21:58.191" starttime="20190828 20:21:58.189"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:58.191" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:58.192" starttime="20190828 20:21:58.191"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:58.192" starttime="20190828 20:21:57.643"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:58.192" starttime="20190828 20:21:57.643"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:58.192" starttime="20190828 20:21:57.642"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:58.193" starttime="20190828 20:21:57.461"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:58.193" starttime="20190828 20:21:57.460"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:58.198" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:58.203" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:58.203" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20190828 20:21:58.204" starttime="20190828 20:21:58.197"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:58.205" level="INFO">s3g</msg>
<status status="PASS" endtime="20190828 20:21:58.205" starttime="20190828 20:21:58.204"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:58.206" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:58.207" starttime="20190828 20:21:58.206"></status>
</kw>
<msg timestamp="20190828 20:21:58.207" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20190828 20:21:58.207" starttime="20190828 20:21:58.196"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20190828 20:21:58.209" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20190828 20:21:58.209" starttime="20190828 20:21:58.208"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:58.213" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:58.230" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:58.230" level="INFO">${output} = </msg>
<status status="PASS" endtime="20190828 20:21:58.230" starttime="20190828 20:21:58.211"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:58.232" level="INFO"></msg>
<status status="PASS" endtime="20190828 20:21:58.232" starttime="20190828 20:21:58.231"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:58.233" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:21:58.233" starttime="20190828 20:21:58.232"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:58.233" starttime="20190828 20:21:58.210"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:58.233" starttime="20190828 20:21:58.209"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:58.234" starttime="20190828 20:21:58.195"></status>
</kw>
<status status="PASS" endtime="20190828 20:21:58.234" starttime="20190828 20:21:58.195"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:58.237" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:59.558" level="INFO">${rc} = 255</msg>
<msg timestamp="20190828 20:21:59.558" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20190828 20:21:59.558" starttime="20190828 20:21:58.235"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:21:59.560" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-08-28 20:21:59 ERROR OzoneClientFactory:192 - Couldn't create RpcClient protocol exception: 
java.lang.IllegalArgumentException: java.net.UnknownHostException: om
	at org.apache.hadoop.security.SecurityUtil.buildTokenService(SecurityUtil.java:447)
	at org.apache.hadoop.ozone.om.ha.OMProxyInfo.&lt;init&gt;(OMProxyInfo.java:40)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.loadOMClientConfigs(OMFailoverProxyProvider.java:109)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.&lt;init&gt;(OMFailoverProxyProvider.java:77)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.&lt;init&gt;(OzoneManagerProtocolClientSideTranslatorPB.java:195)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:155)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:189)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:152)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:102)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Caused by: java.net.UnknownHostException: om
	... 22 more
om</msg>
<status status="PASS" endtime="20190828 20:21:59.561" starttime="20190828 20:21:59.559"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:21:59.562" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20190828 20:21:59.562" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20190828 20:21:59.562" starttime="20190828 20:21:59.561"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:59.563" starttime="20190828 20:21:58.234"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:59.563" starttime="20190828 20:21:58.194"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:59.563" starttime="20190828 20:21:58.193"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:59.563" starttime="20190828 20:21:57.459"></status>
</kw>
<status status="FAIL" endtime="20190828 20:21:59.564" critical="yes" starttime="20190828 20:21:57.458">Setup failed:
255 != 0</status>
</test>
<test id="s1-s7-t5" name="Delete file with s3api, bucket doesn't exist">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:59.569" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:59.573" level="INFO">${rc} = 1</msg>
<msg timestamp="20190828 20:21:59.574" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20190828 20:21:59.574" starttime="20190828 20:21:59.567"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20190828 20:21:59.575" starttime="20190828 20:21:59.574"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:59.577" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:21:59.780" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:21:59.780" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/Group'
Usage: yum [options] COMMAND

List of Commands:

check          Check for pr...</msg>
<status status="PASS" endtime="20190828 20:21:59.780" starttime="20190828 20:21:59.575"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:21:59.787" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:00.382" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:00.382" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
P...</msg>
<status status="PASS" endtime="20190828 20:22:00.383" starttime="20190828 20:21:59.784"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:00.384" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20190828 20:22:00.384" starttime="20190828 20:22:00.383"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:00.384" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:22:00.385" starttime="20190828 20:22:00.384"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:00.385" starttime="20190828 20:21:59.784"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:00.385" starttime="20190828 20:21:59.783"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:00.385" starttime="20190828 20:21:59.781"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:00.385" starttime="20190828 20:21:59.566"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:00.385" starttime="20190828 20:21:59.566"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:00.390" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:00.397" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:00.398" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20190828 20:22:00.398" starttime="20190828 20:22:00.388"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:00.399" level="INFO">s3g</msg>
<status status="PASS" endtime="20190828 20:22:00.399" starttime="20190828 20:22:00.398"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:00.400" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:22:00.400" starttime="20190828 20:22:00.399"></status>
</kw>
<msg timestamp="20190828 20:22:00.400" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20190828 20:22:00.400" starttime="20190828 20:22:00.388"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20190828 20:22:00.401" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20190828 20:22:00.401" starttime="20190828 20:22:00.401"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:00.404" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:00.415" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:00.415" level="INFO">${output} = </msg>
<status status="PASS" endtime="20190828 20:22:00.415" starttime="20190828 20:22:00.403"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:00.416" level="INFO"></msg>
<status status="PASS" endtime="20190828 20:22:00.416" starttime="20190828 20:22:00.416"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:00.417" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:22:00.417" starttime="20190828 20:22:00.417"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:00.417" starttime="20190828 20:22:00.402"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:00.418" starttime="20190828 20:22:00.402"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:00.418" starttime="20190828 20:22:00.387"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:00.418" starttime="20190828 20:22:00.387"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:00.420" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:01.860" level="INFO">${rc} = 255</msg>
<msg timestamp="20190828 20:22:01.860" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20190828 20:22:01.860" starttime="20190828 20:22:00.419"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:01.861" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-08-28 20:22:01 ERROR OzoneClientFactory:192 - Couldn't create RpcClient protocol exception: 
java.lang.IllegalArgumentException: java.net.UnknownHostException: om
	at org.apache.hadoop.security.SecurityUtil.buildTokenService(SecurityUtil.java:447)
	at org.apache.hadoop.ozone.om.ha.OMProxyInfo.&lt;init&gt;(OMProxyInfo.java:40)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.loadOMClientConfigs(OMFailoverProxyProvider.java:109)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.&lt;init&gt;(OMFailoverProxyProvider.java:77)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.&lt;init&gt;(OzoneManagerProtocolClientSideTranslatorPB.java:195)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:155)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:189)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:152)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:102)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Caused by: java.net.UnknownHostException: om
	... 22 more
om</msg>
<status status="PASS" endtime="20190828 20:22:01.861" starttime="20190828 20:22:01.861"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:01.862" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20190828 20:22:01.862" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20190828 20:22:01.863" starttime="20190828 20:22:01.862"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:01.863" starttime="20190828 20:22:00.418"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:01.863" starttime="20190828 20:22:00.386"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:01.863" starttime="20190828 20:22:00.386"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:01.863" starttime="20190828 20:21:59.565"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:01.864" critical="yes" starttime="20190828 20:21:59.564">Setup failed:
255 != 0</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20190828 20:22:01.865" starttime="20190828 20:21:50.763"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/objectmultidelete.robot" id="s1-s8" name="Objectmultidelete">
<test id="s1-s8-t1" name="Delete file with multi delete">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:01.881" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:01.885" level="INFO">${rc} = 1</msg>
<msg timestamp="20190828 20:22:01.885" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20190828 20:22:01.885" starttime="20190828 20:22:01.879"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20190828 20:22:01.887" starttime="20190828 20:22:01.886"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:01.888" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:02.092" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:02.092" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/Group'
Usage: yum [options] COMMAND

List of Commands:

check          Check for pr...</msg>
<status status="PASS" endtime="20190828 20:22:02.093" starttime="20190828 20:22:01.887"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:02.097" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:02.638" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:02.638" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
P...</msg>
<status status="PASS" endtime="20190828 20:22:02.638" starttime="20190828 20:22:02.095"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:02.640" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20190828 20:22:02.641" starttime="20190828 20:22:02.639"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:02.641" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:22:02.642" starttime="20190828 20:22:02.641"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:02.642" starttime="20190828 20:22:02.095"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:02.643" starttime="20190828 20:22:02.094"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:02.643" starttime="20190828 20:22:02.093"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:02.643" starttime="20190828 20:22:01.879"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:02.643" starttime="20190828 20:22:01.878"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:02.650" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:02.658" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:02.658" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20190828 20:22:02.658" starttime="20190828 20:22:02.648"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:02.660" level="INFO">s3g</msg>
<status status="PASS" endtime="20190828 20:22:02.660" starttime="20190828 20:22:02.659"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:02.661" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:22:02.661" starttime="20190828 20:22:02.660"></status>
</kw>
<msg timestamp="20190828 20:22:02.662" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20190828 20:22:02.662" starttime="20190828 20:22:02.647"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20190828 20:22:02.665" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20190828 20:22:02.665" starttime="20190828 20:22:02.662"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:02.670" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:02.683" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:02.684" level="INFO">${output} = </msg>
<status status="PASS" endtime="20190828 20:22:02.684" starttime="20190828 20:22:02.668"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:02.685" level="INFO"></msg>
<status status="PASS" endtime="20190828 20:22:02.685" starttime="20190828 20:22:02.684"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:02.686" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:22:02.687" starttime="20190828 20:22:02.686"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:02.687" starttime="20190828 20:22:02.667"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:02.687" starttime="20190828 20:22:02.666"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:02.688" starttime="20190828 20:22:02.647"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:02.688" starttime="20190828 20:22:02.646"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:02.691" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:04.138" level="INFO">${rc} = 255</msg>
<msg timestamp="20190828 20:22:04.138" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20190828 20:22:04.138" starttime="20190828 20:22:02.689"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:04.140" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-08-28 20:22:04 ERROR OzoneClientFactory:192 - Couldn't create RpcClient protocol exception: 
java.lang.IllegalArgumentException: java.net.UnknownHostException: om
	at org.apache.hadoop.security.SecurityUtil.buildTokenService(SecurityUtil.java:447)
	at org.apache.hadoop.ozone.om.ha.OMProxyInfo.&lt;init&gt;(OMProxyInfo.java:40)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.loadOMClientConfigs(OMFailoverProxyProvider.java:109)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.&lt;init&gt;(OMFailoverProxyProvider.java:77)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.&lt;init&gt;(OzoneManagerProtocolClientSideTranslatorPB.java:195)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:155)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:189)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:152)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:102)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Caused by: java.net.UnknownHostException: om
	... 22 more
om</msg>
<status status="PASS" endtime="20190828 20:22:04.140" starttime="20190828 20:22:04.139"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:04.141" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20190828 20:22:04.142" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20190828 20:22:04.142" starttime="20190828 20:22:04.140"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:04.142" starttime="20190828 20:22:02.688"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:04.142" starttime="20190828 20:22:02.645"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:04.143" starttime="20190828 20:22:02.644"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:04.143" starttime="20190828 20:22:01.878"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:04.143" critical="yes" starttime="20190828 20:22:01.877">Setup failed:
255 != 0</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20190828 20:22:04.144" starttime="20190828 20:22:01.869"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/objectputget.robot" id="s1-s9" name="Objectputget">
<test id="s1-s9-t1" name="Put object to s3">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:04.162" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:04.169" level="INFO">${rc} = 1</msg>
<msg timestamp="20190828 20:22:04.169" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20190828 20:22:04.169" starttime="20190828 20:22:04.160"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20190828 20:22:04.171" starttime="20190828 20:22:04.170"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:04.174" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:04.348" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:04.349" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/Group'
Usage: yum [options] COMMAND

List of Commands:

check          Check for pr...</msg>
<status status="PASS" endtime="20190828 20:22:04.349" starttime="20190828 20:22:04.172"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:04.355" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:04.920" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:04.920" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
P...</msg>
<status status="PASS" endtime="20190828 20:22:04.920" starttime="20190828 20:22:04.353"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:04.922" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20190828 20:22:04.923" starttime="20190828 20:22:04.921"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:04.924" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:22:04.924" starttime="20190828 20:22:04.923"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:04.924" starttime="20190828 20:22:04.352"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:04.925" starttime="20190828 20:22:04.351"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:04.925" starttime="20190828 20:22:04.350"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:04.925" starttime="20190828 20:22:04.159"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:04.925" starttime="20190828 20:22:04.158"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:04.933" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:04.939" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:04.939" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20190828 20:22:04.939" starttime="20190828 20:22:04.930"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:04.941" level="INFO">s3g</msg>
<status status="PASS" endtime="20190828 20:22:04.941" starttime="20190828 20:22:04.940"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:04.942" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:22:04.942" starttime="20190828 20:22:04.941"></status>
</kw>
<msg timestamp="20190828 20:22:04.943" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20190828 20:22:04.943" starttime="20190828 20:22:04.930"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20190828 20:22:04.946" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20190828 20:22:04.946" starttime="20190828 20:22:04.943"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:04.951" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:04.965" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:04.965" level="INFO">${output} = </msg>
<status status="PASS" endtime="20190828 20:22:04.965" starttime="20190828 20:22:04.948"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:04.967" level="INFO"></msg>
<status status="PASS" endtime="20190828 20:22:04.967" starttime="20190828 20:22:04.966"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:04.968" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:22:04.969" starttime="20190828 20:22:04.968"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:04.969" starttime="20190828 20:22:04.947"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:04.969" starttime="20190828 20:22:04.946"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:04.970" starttime="20190828 20:22:04.929"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:04.970" starttime="20190828 20:22:04.928"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:04.974" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:06.390" level="INFO">${rc} = 255</msg>
<msg timestamp="20190828 20:22:06.390" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20190828 20:22:06.390" starttime="20190828 20:22:04.971"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:06.392" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-08-28 20:22:06 ERROR OzoneClientFactory:192 - Couldn't create RpcClient protocol exception: 
java.lang.IllegalArgumentException: java.net.UnknownHostException: om
	at org.apache.hadoop.security.SecurityUtil.buildTokenService(SecurityUtil.java:447)
	at org.apache.hadoop.ozone.om.ha.OMProxyInfo.&lt;init&gt;(OMProxyInfo.java:40)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.loadOMClientConfigs(OMFailoverProxyProvider.java:109)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.&lt;init&gt;(OMFailoverProxyProvider.java:77)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.&lt;init&gt;(OzoneManagerProtocolClientSideTranslatorPB.java:195)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:155)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:189)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:152)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:102)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Caused by: java.net.UnknownHostException: om
	... 22 more
om</msg>
<status status="PASS" endtime="20190828 20:22:06.393" starttime="20190828 20:22:06.391"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:06.394" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20190828 20:22:06.394" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20190828 20:22:06.394" starttime="20190828 20:22:06.393"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:06.395" starttime="20190828 20:22:04.970"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:06.395" starttime="20190828 20:22:04.927"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:06.395" starttime="20190828 20:22:04.926"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:06.396" starttime="20190828 20:22:04.158"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:06.396" critical="yes" starttime="20190828 20:22:04.157">Setup failed:
255 != 0</status>
</test>
<test id="s1-s9-t2" name="Get object from s3">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:06.403" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:06.410" level="INFO">${rc} = 1</msg>
<msg timestamp="20190828 20:22:06.410" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20190828 20:22:06.410" starttime="20190828 20:22:06.400"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20190828 20:22:06.412" starttime="20190828 20:22:06.411"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:06.415" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:06.604" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:06.605" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/Group'
Usage: yum [options] COMMAND

List of Commands:

check          Check for pr...</msg>
<status status="PASS" endtime="20190828 20:22:06.605" starttime="20190828 20:22:06.412"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:06.611" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:07.169" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:07.169" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
P...</msg>
<status status="PASS" endtime="20190828 20:22:07.169" starttime="20190828 20:22:06.609"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:07.171" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20190828 20:22:07.172" starttime="20190828 20:22:07.170"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:07.173" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:22:07.173" starttime="20190828 20:22:07.172"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:07.173" starttime="20190828 20:22:06.608"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:07.174" starttime="20190828 20:22:06.607"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:07.174" starttime="20190828 20:22:06.606"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:07.174" starttime="20190828 20:22:06.399"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:07.174" starttime="20190828 20:22:06.399"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:07.182" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:07.187" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:07.188" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20190828 20:22:07.188" starttime="20190828 20:22:07.179"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:07.189" level="INFO">s3g</msg>
<status status="PASS" endtime="20190828 20:22:07.189" starttime="20190828 20:22:07.188"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:07.190" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:22:07.190" starttime="20190828 20:22:07.189"></status>
</kw>
<msg timestamp="20190828 20:22:07.191" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20190828 20:22:07.191" starttime="20190828 20:22:07.178"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20190828 20:22:07.192" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20190828 20:22:07.192" starttime="20190828 20:22:07.191"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:07.196" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:07.210" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:07.210" level="INFO">${output} = </msg>
<status status="PASS" endtime="20190828 20:22:07.210" starttime="20190828 20:22:07.194"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:07.211" level="INFO"></msg>
<status status="PASS" endtime="20190828 20:22:07.211" starttime="20190828 20:22:07.210"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:07.212" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:22:07.212" starttime="20190828 20:22:07.211"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:07.212" starttime="20190828 20:22:07.193"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:07.213" starttime="20190828 20:22:07.192"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:07.213" starttime="20190828 20:22:07.177"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:07.213" starttime="20190828 20:22:07.177"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:07.216" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:08.551" level="INFO">${rc} = 255</msg>
<msg timestamp="20190828 20:22:08.551" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20190828 20:22:08.551" starttime="20190828 20:22:07.214"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:08.553" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-08-28 20:22:08 ERROR OzoneClientFactory:192 - Couldn't create RpcClient protocol exception: 
java.lang.IllegalArgumentException: java.net.UnknownHostException: om
	at org.apache.hadoop.security.SecurityUtil.buildTokenService(SecurityUtil.java:447)
	at org.apache.hadoop.ozone.om.ha.OMProxyInfo.&lt;init&gt;(OMProxyInfo.java:40)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.loadOMClientConfigs(OMFailoverProxyProvider.java:109)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.&lt;init&gt;(OMFailoverProxyProvider.java:77)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.&lt;init&gt;(OzoneManagerProtocolClientSideTranslatorPB.java:195)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:155)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:189)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:152)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:102)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Caused by: java.net.UnknownHostException: om
	... 22 more
om</msg>
<status status="PASS" endtime="20190828 20:22:08.553" starttime="20190828 20:22:08.552"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:08.554" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20190828 20:22:08.554" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20190828 20:22:08.554" starttime="20190828 20:22:08.553"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:08.554" starttime="20190828 20:22:07.213"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:08.555" starttime="20190828 20:22:07.176"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:08.555" starttime="20190828 20:22:07.175"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:08.555" starttime="20190828 20:22:06.398"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:08.555" critical="yes" starttime="20190828 20:22:06.397">Setup failed:
255 != 0</status>
</test>
<test id="s1-s9-t3" name="Get Partial object from s3 with both start and endoffset">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:08.561" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:08.566" level="INFO">${rc} = 1</msg>
<msg timestamp="20190828 20:22:08.566" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20190828 20:22:08.566" starttime="20190828 20:22:08.559"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20190828 20:22:08.567" starttime="20190828 20:22:08.567"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:08.569" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:08.769" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:08.769" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/Group'
Usage: yum [options] COMMAND

List of Commands:

check          Check for pr...</msg>
<status status="PASS" endtime="20190828 20:22:08.769" starttime="20190828 20:22:08.568"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:08.773" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:09.353" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:09.353" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
P...</msg>
<status status="PASS" endtime="20190828 20:22:09.353" starttime="20190828 20:22:08.772"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:09.355" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20190828 20:22:09.355" starttime="20190828 20:22:09.354"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:09.356" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:22:09.356" starttime="20190828 20:22:09.355"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:09.356" starttime="20190828 20:22:08.771"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:09.357" starttime="20190828 20:22:08.771"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:09.357" starttime="20190828 20:22:08.770"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:09.357" starttime="20190828 20:22:08.558"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:09.358" starttime="20190828 20:22:08.558"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:09.366" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:09.372" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:09.372" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20190828 20:22:09.372" starttime="20190828 20:22:09.363"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:09.374" level="INFO">s3g</msg>
<status status="PASS" endtime="20190828 20:22:09.374" starttime="20190828 20:22:09.373"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:09.374" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:22:09.375" starttime="20190828 20:22:09.374"></status>
</kw>
<msg timestamp="20190828 20:22:09.375" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20190828 20:22:09.375" starttime="20190828 20:22:09.363"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20190828 20:22:09.376" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20190828 20:22:09.377" starttime="20190828 20:22:09.376"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:09.380" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:09.394" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:09.394" level="INFO">${output} = </msg>
<status status="PASS" endtime="20190828 20:22:09.394" starttime="20190828 20:22:09.378"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:09.395" level="INFO"></msg>
<status status="PASS" endtime="20190828 20:22:09.395" starttime="20190828 20:22:09.395"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:09.396" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:22:09.396" starttime="20190828 20:22:09.396"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:09.396" starttime="20190828 20:22:09.377"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:09.397" starttime="20190828 20:22:09.377"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:09.397" starttime="20190828 20:22:09.362"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:09.397" starttime="20190828 20:22:09.361"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:09.399" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:10.882" level="INFO">${rc} = 255</msg>
<msg timestamp="20190828 20:22:10.882" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20190828 20:22:10.882" starttime="20190828 20:22:09.398"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:10.883" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-08-28 20:22:10 ERROR OzoneClientFactory:192 - Couldn't create RpcClient protocol exception: 
java.lang.IllegalArgumentException: java.net.UnknownHostException: om
	at org.apache.hadoop.security.SecurityUtil.buildTokenService(SecurityUtil.java:447)
	at org.apache.hadoop.ozone.om.ha.OMProxyInfo.&lt;init&gt;(OMProxyInfo.java:40)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.loadOMClientConfigs(OMFailoverProxyProvider.java:109)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.&lt;init&gt;(OMFailoverProxyProvider.java:77)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.&lt;init&gt;(OzoneManagerProtocolClientSideTranslatorPB.java:195)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:155)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:189)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:152)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:102)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Caused by: java.net.UnknownHostException: om
	... 22 more
om</msg>
<status status="PASS" endtime="20190828 20:22:10.883" starttime="20190828 20:22:10.883"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:10.884" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20190828 20:22:10.884" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20190828 20:22:10.885" starttime="20190828 20:22:10.884"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:10.885" starttime="20190828 20:22:09.397"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:10.885" starttime="20190828 20:22:09.360"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:10.885" starttime="20190828 20:22:09.358"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:10.885" starttime="20190828 20:22:08.557"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:10.886" critical="yes" starttime="20190828 20:22:08.556">Setup failed:
255 != 0</status>
</test>
<test id="s1-s9-t4" name="Get Partial object from s3 with both start and endoffset(start offset and endoffset is greater than file size)">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:10.891" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:10.898" level="INFO">${rc} = 1</msg>
<msg timestamp="20190828 20:22:10.898" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20190828 20:22:10.899" starttime="20190828 20:22:10.889"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20190828 20:22:10.900" starttime="20190828 20:22:10.899"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:10.903" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:11.087" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:11.088" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/Group'
Usage: yum [options] COMMAND

List of Commands:

check          Check for pr...</msg>
<status status="PASS" endtime="20190828 20:22:11.088" starttime="20190828 20:22:10.901"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:11.092" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:11.674" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:11.675" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
P...</msg>
<status status="PASS" endtime="20190828 20:22:11.675" starttime="20190828 20:22:11.090"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:11.677" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20190828 20:22:11.677" starttime="20190828 20:22:11.676"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:11.678" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:22:11.679" starttime="20190828 20:22:11.678"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:11.679" starttime="20190828 20:22:11.090"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:11.680" starttime="20190828 20:22:11.089"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:11.680" starttime="20190828 20:22:11.088"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:11.680" starttime="20190828 20:22:10.888"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:11.680" starttime="20190828 20:22:10.888"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:11.689" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:11.697" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:11.697" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20190828 20:22:11.697" starttime="20190828 20:22:11.686"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:11.699" level="INFO">s3g</msg>
<status status="PASS" endtime="20190828 20:22:11.700" starttime="20190828 20:22:11.698"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:11.701" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:22:11.701" starttime="20190828 20:22:11.700"></status>
</kw>
<msg timestamp="20190828 20:22:11.702" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20190828 20:22:11.702" starttime="20190828 20:22:11.685"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20190828 20:22:11.704" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20190828 20:22:11.704" starttime="20190828 20:22:11.702"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:11.709" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:11.726" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:11.727" level="INFO">${output} = </msg>
<status status="PASS" endtime="20190828 20:22:11.727" starttime="20190828 20:22:11.707"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:11.729" level="INFO"></msg>
<status status="PASS" endtime="20190828 20:22:11.729" starttime="20190828 20:22:11.728"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:11.730" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:22:11.730" starttime="20190828 20:22:11.729"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:11.731" starttime="20190828 20:22:11.705"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:11.731" starttime="20190828 20:22:11.704"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:11.731" starttime="20190828 20:22:11.684"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:11.731" starttime="20190828 20:22:11.683"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:11.735" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:13.261" level="INFO">${rc} = 255</msg>
<msg timestamp="20190828 20:22:13.262" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20190828 20:22:13.262" starttime="20190828 20:22:11.733"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:13.263" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-08-28 20:22:13 ERROR OzoneClientFactory:192 - Couldn't create RpcClient protocol exception: 
java.lang.IllegalArgumentException: java.net.UnknownHostException: om
	at org.apache.hadoop.security.SecurityUtil.buildTokenService(SecurityUtil.java:447)
	at org.apache.hadoop.ozone.om.ha.OMProxyInfo.&lt;init&gt;(OMProxyInfo.java:40)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.loadOMClientConfigs(OMFailoverProxyProvider.java:109)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.&lt;init&gt;(OMFailoverProxyProvider.java:77)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.&lt;init&gt;(OzoneManagerProtocolClientSideTranslatorPB.java:195)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:155)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:189)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:152)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:102)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Caused by: java.net.UnknownHostException: om
	... 22 more
om</msg>
<status status="PASS" endtime="20190828 20:22:13.264" starttime="20190828 20:22:13.262"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:13.265" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20190828 20:22:13.265" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20190828 20:22:13.265" starttime="20190828 20:22:13.264"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:13.266" starttime="20190828 20:22:11.732"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:13.266" starttime="20190828 20:22:11.682"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:13.267" starttime="20190828 20:22:11.681"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:13.267" starttime="20190828 20:22:10.887"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:13.267" critical="yes" starttime="20190828 20:22:10.886">Setup failed:
255 != 0</status>
</test>
<test id="s1-s9-t5" name="Get Partial object from s3 with both start and endoffset(end offset is greater than file size)">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:13.275" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:13.280" level="INFO">${rc} = 1</msg>
<msg timestamp="20190828 20:22:13.280" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20190828 20:22:13.280" starttime="20190828 20:22:13.272"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20190828 20:22:13.282" starttime="20190828 20:22:13.281"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:13.284" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:13.470" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:13.470" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/Group'
Usage: yum [options] COMMAND

List of Commands:

check          Check for pr...</msg>
<status status="PASS" endtime="20190828 20:22:13.470" starttime="20190828 20:22:13.282"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:13.476" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:14.057" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:14.057" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
P...</msg>
<status status="PASS" endtime="20190828 20:22:14.057" starttime="20190828 20:22:13.474"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:14.058" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20190828 20:22:14.058" starttime="20190828 20:22:14.057"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:14.059" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:22:14.059" starttime="20190828 20:22:14.058"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:14.059" starttime="20190828 20:22:13.473"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:14.060" starttime="20190828 20:22:13.472"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:14.060" starttime="20190828 20:22:13.471"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:14.060" starttime="20190828 20:22:13.271"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:14.060" starttime="20190828 20:22:13.270"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:14.065" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:14.072" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:14.072" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20190828 20:22:14.072" starttime="20190828 20:22:14.063"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:14.074" level="INFO">s3g</msg>
<status status="PASS" endtime="20190828 20:22:14.074" starttime="20190828 20:22:14.073"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:14.076" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:22:14.076" starttime="20190828 20:22:14.075"></status>
</kw>
<msg timestamp="20190828 20:22:14.076" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20190828 20:22:14.077" starttime="20190828 20:22:14.062"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20190828 20:22:14.078" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20190828 20:22:14.078" starttime="20190828 20:22:14.077"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:14.083" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:14.109" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:14.109" level="INFO">${output} = </msg>
<status status="PASS" endtime="20190828 20:22:14.109" starttime="20190828 20:22:14.081"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:14.111" level="INFO"></msg>
<status status="PASS" endtime="20190828 20:22:14.111" starttime="20190828 20:22:14.110"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:14.112" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:22:14.113" starttime="20190828 20:22:14.112"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:14.113" starttime="20190828 20:22:14.079"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:14.113" starttime="20190828 20:22:14.079"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:14.114" starttime="20190828 20:22:14.062"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:14.114" starttime="20190828 20:22:14.061"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:14.117" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:15.620" level="INFO">${rc} = 255</msg>
<msg timestamp="20190828 20:22:15.620" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20190828 20:22:15.620" starttime="20190828 20:22:14.115"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:15.622" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-08-28 20:22:15 ERROR OzoneClientFactory:192 - Couldn't create RpcClient protocol exception: 
java.lang.IllegalArgumentException: java.net.UnknownHostException: om
	at org.apache.hadoop.security.SecurityUtil.buildTokenService(SecurityUtil.java:447)
	at org.apache.hadoop.ozone.om.ha.OMProxyInfo.&lt;init&gt;(OMProxyInfo.java:40)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.loadOMClientConfigs(OMFailoverProxyProvider.java:109)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.&lt;init&gt;(OMFailoverProxyProvider.java:77)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.&lt;init&gt;(OzoneManagerProtocolClientSideTranslatorPB.java:195)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:155)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:189)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:152)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:102)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Caused by: java.net.UnknownHostException: om
	... 22 more
om</msg>
<status status="PASS" endtime="20190828 20:22:15.622" starttime="20190828 20:22:15.621"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:15.623" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20190828 20:22:15.624" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20190828 20:22:15.624" starttime="20190828 20:22:15.623"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:15.624" starttime="20190828 20:22:14.114"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:15.625" starttime="20190828 20:22:14.061"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:15.625" starttime="20190828 20:22:14.060"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:15.625" starttime="20190828 20:22:13.270"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:15.625" critical="yes" starttime="20190828 20:22:13.268">Setup failed:
255 != 0</status>
</test>
<test id="s1-s9-t6" name="Get Partial object from s3 with only start offset">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:15.631" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:15.638" level="INFO">${rc} = 1</msg>
<msg timestamp="20190828 20:22:15.639" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20190828 20:22:15.639" starttime="20190828 20:22:15.628"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20190828 20:22:15.641" starttime="20190828 20:22:15.640"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:15.644" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:15.842" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:15.843" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/Group'
Usage: yum [options] COMMAND

List of Commands:

check          Check for pr...</msg>
<status status="PASS" endtime="20190828 20:22:15.843" starttime="20190828 20:22:15.642"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:15.849" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:16.449" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:16.449" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
P...</msg>
<status status="PASS" endtime="20190828 20:22:16.449" starttime="20190828 20:22:15.846"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:16.451" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20190828 20:22:16.452" starttime="20190828 20:22:16.450"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:16.453" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:22:16.453" starttime="20190828 20:22:16.452"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:16.453" starttime="20190828 20:22:15.846"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:16.454" starttime="20190828 20:22:15.845"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:16.454" starttime="20190828 20:22:15.844"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:16.454" starttime="20190828 20:22:15.628"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:16.454" starttime="20190828 20:22:15.628"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:16.462" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:16.469" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:16.469" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20190828 20:22:16.469" starttime="20190828 20:22:16.459"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:16.471" level="INFO">s3g</msg>
<status status="PASS" endtime="20190828 20:22:16.471" starttime="20190828 20:22:16.470"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:16.472" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:22:16.472" starttime="20190828 20:22:16.471"></status>
</kw>
<msg timestamp="20190828 20:22:16.473" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20190828 20:22:16.473" starttime="20190828 20:22:16.458"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20190828 20:22:16.474" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20190828 20:22:16.474" starttime="20190828 20:22:16.473"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:16.479" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:16.496" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:16.496" level="INFO">${output} = </msg>
<status status="PASS" endtime="20190828 20:22:16.496" starttime="20190828 20:22:16.477"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:16.498" level="INFO"></msg>
<status status="PASS" endtime="20190828 20:22:16.498" starttime="20190828 20:22:16.497"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:16.499" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:22:16.500" starttime="20190828 20:22:16.499"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:16.500" starttime="20190828 20:22:16.475"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:16.500" starttime="20190828 20:22:16.475"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:16.501" starttime="20190828 20:22:16.458"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:16.501" starttime="20190828 20:22:16.457"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:16.505" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:18.023" level="INFO">${rc} = 255</msg>
<msg timestamp="20190828 20:22:18.023" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20190828 20:22:18.024" starttime="20190828 20:22:16.502"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:18.025" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-08-28 20:22:17 ERROR OzoneClientFactory:192 - Couldn't create RpcClient protocol exception: 
java.lang.IllegalArgumentException: java.net.UnknownHostException: om
	at org.apache.hadoop.security.SecurityUtil.buildTokenService(SecurityUtil.java:447)
	at org.apache.hadoop.ozone.om.ha.OMProxyInfo.&lt;init&gt;(OMProxyInfo.java:40)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.loadOMClientConfigs(OMFailoverProxyProvider.java:109)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.&lt;init&gt;(OMFailoverProxyProvider.java:77)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.&lt;init&gt;(OzoneManagerProtocolClientSideTranslatorPB.java:195)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:155)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:189)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:152)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:102)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Caused by: java.net.UnknownHostException: om
	... 22 more
om</msg>
<status status="PASS" endtime="20190828 20:22:18.025" starttime="20190828 20:22:18.024"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:18.026" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20190828 20:22:18.026" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20190828 20:22:18.026" starttime="20190828 20:22:18.025"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:18.027" starttime="20190828 20:22:16.501"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:18.027" starttime="20190828 20:22:16.456"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:18.027" starttime="20190828 20:22:16.455"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:18.027" starttime="20190828 20:22:15.627"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:18.028" critical="yes" starttime="20190828 20:22:15.626">Setup failed:
255 != 0</status>
</test>
<test id="s1-s9-t7" name="Get Partial object from s3 with both start and endoffset which are equal">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:18.032" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:18.037" level="INFO">${rc} = 1</msg>
<msg timestamp="20190828 20:22:18.037" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20190828 20:22:18.037" starttime="20190828 20:22:18.030"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20190828 20:22:18.038" starttime="20190828 20:22:18.037"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:18.040" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:18.238" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:18.239" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/Group'
Usage: yum [options] COMMAND

List of Commands:

check          Check for pr...</msg>
<status status="PASS" endtime="20190828 20:22:18.239" starttime="20190828 20:22:18.038"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:18.245" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:18.783" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:18.783" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
P...</msg>
<status status="PASS" endtime="20190828 20:22:18.783" starttime="20190828 20:22:18.243"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:18.785" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20190828 20:22:18.785" starttime="20190828 20:22:18.784"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:18.786" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:22:18.787" starttime="20190828 20:22:18.786"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:18.787" starttime="20190828 20:22:18.242"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:18.788" starttime="20190828 20:22:18.241"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:18.788" starttime="20190828 20:22:18.240"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:18.788" starttime="20190828 20:22:18.030"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:18.788" starttime="20190828 20:22:18.029"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:18.796" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:18.803" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:18.803" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20190828 20:22:18.803" starttime="20190828 20:22:18.793"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:18.805" level="INFO">s3g</msg>
<status status="PASS" endtime="20190828 20:22:18.805" starttime="20190828 20:22:18.804"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:18.806" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:22:18.806" starttime="20190828 20:22:18.805"></status>
</kw>
<msg timestamp="20190828 20:22:18.807" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20190828 20:22:18.807" starttime="20190828 20:22:18.792"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20190828 20:22:18.808" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20190828 20:22:18.809" starttime="20190828 20:22:18.807"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:18.813" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:18.828" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:18.829" level="INFO">${output} = </msg>
<status status="PASS" endtime="20190828 20:22:18.829" starttime="20190828 20:22:18.811"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:18.830" level="INFO"></msg>
<status status="PASS" endtime="20190828 20:22:18.830" starttime="20190828 20:22:18.829"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:18.831" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:22:18.831" starttime="20190828 20:22:18.831"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:18.832" starttime="20190828 20:22:18.810"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:18.832" starttime="20190828 20:22:18.809"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:18.832" starttime="20190828 20:22:18.792"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:18.832" starttime="20190828 20:22:18.791"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:18.835" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:20.184" level="INFO">${rc} = 255</msg>
<msg timestamp="20190828 20:22:20.184" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20190828 20:22:20.184" starttime="20190828 20:22:18.833"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:20.185" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-08-28 20:22:20 ERROR OzoneClientFactory:192 - Couldn't create RpcClient protocol exception: 
java.lang.IllegalArgumentException: java.net.UnknownHostException: om
	at org.apache.hadoop.security.SecurityUtil.buildTokenService(SecurityUtil.java:447)
	at org.apache.hadoop.ozone.om.ha.OMProxyInfo.&lt;init&gt;(OMProxyInfo.java:40)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.loadOMClientConfigs(OMFailoverProxyProvider.java:109)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.&lt;init&gt;(OMFailoverProxyProvider.java:77)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.&lt;init&gt;(OzoneManagerProtocolClientSideTranslatorPB.java:195)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:155)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:189)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:152)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:102)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Caused by: java.net.UnknownHostException: om
	... 22 more
om</msg>
<status status="PASS" endtime="20190828 20:22:20.186" starttime="20190828 20:22:20.185"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:20.186" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20190828 20:22:20.186" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20190828 20:22:20.187" starttime="20190828 20:22:20.186"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:20.187" starttime="20190828 20:22:18.833"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:20.187" starttime="20190828 20:22:18.790"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:20.187" starttime="20190828 20:22:18.789"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:20.187" starttime="20190828 20:22:18.029"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:20.188" critical="yes" starttime="20190828 20:22:18.028">Setup failed:
255 != 0</status>
</test>
<test id="s1-s9-t8" name="Get Partial object from s3 to get last n bytes">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:20.193" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:20.198" level="INFO">${rc} = 1</msg>
<msg timestamp="20190828 20:22:20.198" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20190828 20:22:20.198" starttime="20190828 20:22:20.190"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20190828 20:22:20.199" starttime="20190828 20:22:20.198"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:20.200" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:20.343" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:20.343" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/Group'
Usage: yum [options] COMMAND

List of Commands:

check          Check for pr...</msg>
<status status="PASS" endtime="20190828 20:22:20.343" starttime="20190828 20:22:20.199"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:20.350" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:20.983" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:20.983" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
P...</msg>
<status status="PASS" endtime="20190828 20:22:20.983" starttime="20190828 20:22:20.348"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:20.985" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20190828 20:22:20.985" starttime="20190828 20:22:20.984"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:20.986" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:22:20.987" starttime="20190828 20:22:20.986"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:20.987" starttime="20190828 20:22:20.347"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:20.987" starttime="20190828 20:22:20.346"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:20.988" starttime="20190828 20:22:20.344"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:20.988" starttime="20190828 20:22:20.190"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:20.988" starttime="20190828 20:22:20.190"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:20.995" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:21.001" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:21.001" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20190828 20:22:21.001" starttime="20190828 20:22:20.993"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:21.003" level="INFO">s3g</msg>
<status status="PASS" endtime="20190828 20:22:21.003" starttime="20190828 20:22:21.002"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:21.004" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:22:21.004" starttime="20190828 20:22:21.003"></status>
</kw>
<msg timestamp="20190828 20:22:21.004" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20190828 20:22:21.005" starttime="20190828 20:22:20.992"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20190828 20:22:21.006" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20190828 20:22:21.006" starttime="20190828 20:22:21.005"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:21.010" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:21.026" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:21.026" level="INFO">${output} = </msg>
<status status="PASS" endtime="20190828 20:22:21.026" starttime="20190828 20:22:21.008"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:21.029" level="INFO"></msg>
<status status="PASS" endtime="20190828 20:22:21.029" starttime="20190828 20:22:21.028"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:21.030" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:22:21.030" starttime="20190828 20:22:21.029"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:21.031" starttime="20190828 20:22:21.007"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:21.031" starttime="20190828 20:22:21.006"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:21.031" starttime="20190828 20:22:20.991"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:21.031" starttime="20190828 20:22:20.990"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:21.035" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:22.502" level="INFO">${rc} = 255</msg>
<msg timestamp="20190828 20:22:22.503" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20190828 20:22:22.503" starttime="20190828 20:22:21.032"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:22.505" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-08-28 20:22:22 ERROR OzoneClientFactory:192 - Couldn't create RpcClient protocol exception: 
java.lang.IllegalArgumentException: java.net.UnknownHostException: om
	at org.apache.hadoop.security.SecurityUtil.buildTokenService(SecurityUtil.java:447)
	at org.apache.hadoop.ozone.om.ha.OMProxyInfo.&lt;init&gt;(OMProxyInfo.java:40)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.loadOMClientConfigs(OMFailoverProxyProvider.java:109)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.&lt;init&gt;(OMFailoverProxyProvider.java:77)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.&lt;init&gt;(OzoneManagerProtocolClientSideTranslatorPB.java:195)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:155)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:189)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:152)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:102)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Caused by: java.net.UnknownHostException: om
	... 22 more
om</msg>
<status status="PASS" endtime="20190828 20:22:22.505" starttime="20190828 20:22:22.504"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:22.506" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20190828 20:22:22.507" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20190828 20:22:22.507" starttime="20190828 20:22:22.505"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:22.507" starttime="20190828 20:22:21.031"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:22.508" starttime="20190828 20:22:20.989"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:22.508" starttime="20190828 20:22:20.988"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:22.508" starttime="20190828 20:22:20.189"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:22.509" critical="yes" starttime="20190828 20:22:20.188">Setup failed:
255 != 0</status>
</test>
<test id="s1-s9-t9" name="Incorrect values for end and start offset">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:22.515" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:22.523" level="INFO">${rc} = 1</msg>
<msg timestamp="20190828 20:22:22.523" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20190828 20:22:22.523" starttime="20190828 20:22:22.512"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20190828 20:22:22.524" starttime="20190828 20:22:22.524"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:22.527" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:22.716" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:22.717" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/Group'
Usage: yum [options] COMMAND

List of Commands:

check          Check for pr...</msg>
<status status="PASS" endtime="20190828 20:22:22.717" starttime="20190828 20:22:22.525"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:22.724" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:23.454" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:23.454" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
P...</msg>
<status status="PASS" endtime="20190828 20:22:23.454" starttime="20190828 20:22:22.721"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:23.455" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20190828 20:22:23.456" starttime="20190828 20:22:23.455"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:23.456" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:22:23.457" starttime="20190828 20:22:23.456"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:23.457" starttime="20190828 20:22:22.720"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:23.457" starttime="20190828 20:22:22.719"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:23.457" starttime="20190828 20:22:22.718"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:23.457" starttime="20190828 20:22:22.512"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:23.458" starttime="20190828 20:22:22.511"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:23.463" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:23.470" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:23.471" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20190828 20:22:23.471" starttime="20190828 20:22:23.461"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:23.473" level="INFO">s3g</msg>
<status status="PASS" endtime="20190828 20:22:23.473" starttime="20190828 20:22:23.472"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:23.474" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:22:23.474" starttime="20190828 20:22:23.473"></status>
</kw>
<msg timestamp="20190828 20:22:23.475" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20190828 20:22:23.475" starttime="20190828 20:22:23.460"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20190828 20:22:23.476" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20190828 20:22:23.476" starttime="20190828 20:22:23.475"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:23.481" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:23.514" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:23.514" level="INFO">${output} = </msg>
<status status="PASS" endtime="20190828 20:22:23.514" starttime="20190828 20:22:23.479"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:23.516" level="INFO"></msg>
<status status="PASS" endtime="20190828 20:22:23.516" starttime="20190828 20:22:23.515"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:23.518" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:22:23.518" starttime="20190828 20:22:23.517"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:23.519" starttime="20190828 20:22:23.478"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:23.519" starttime="20190828 20:22:23.477"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:23.519" starttime="20190828 20:22:23.460"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:23.519" starttime="20190828 20:22:23.459"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:23.524" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:24.968" level="INFO">${rc} = 255</msg>
<msg timestamp="20190828 20:22:24.968" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20190828 20:22:24.968" starttime="20190828 20:22:23.521"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:24.970" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-08-28 20:22:24 ERROR OzoneClientFactory:192 - Couldn't create RpcClient protocol exception: 
java.lang.IllegalArgumentException: java.net.UnknownHostException: om
	at org.apache.hadoop.security.SecurityUtil.buildTokenService(SecurityUtil.java:447)
	at org.apache.hadoop.ozone.om.ha.OMProxyInfo.&lt;init&gt;(OMProxyInfo.java:40)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.loadOMClientConfigs(OMFailoverProxyProvider.java:109)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.&lt;init&gt;(OMFailoverProxyProvider.java:77)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.&lt;init&gt;(OzoneManagerProtocolClientSideTranslatorPB.java:195)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:155)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:189)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:152)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:102)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Caused by: java.net.UnknownHostException: om
	... 22 more
om</msg>
<status status="PASS" endtime="20190828 20:22:24.970" starttime="20190828 20:22:24.969"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:24.970" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20190828 20:22:24.971" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20190828 20:22:24.971" starttime="20190828 20:22:24.970"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:24.971" starttime="20190828 20:22:23.520"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:24.971" starttime="20190828 20:22:23.459"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:24.972" starttime="20190828 20:22:23.458"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:24.972" starttime="20190828 20:22:22.510"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:24.972" critical="yes" starttime="20190828 20:22:22.509">Setup failed:
255 != 0</status>
</test>
<test id="s1-s9-t10" name="Zero byte file">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:24.977" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:24.983" level="INFO">${rc} = 1</msg>
<msg timestamp="20190828 20:22:24.984" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20190828 20:22:24.984" starttime="20190828 20:22:24.975"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20190828 20:22:24.986" starttime="20190828 20:22:24.985"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:24.988" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:25.211" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:25.211" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/Group'
Usage: yum [options] COMMAND

List of Commands:

check          Check for pr...</msg>
<status status="PASS" endtime="20190828 20:22:25.211" starttime="20190828 20:22:24.986"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:25.218" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:25.739" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:25.739" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
P...</msg>
<status status="PASS" endtime="20190828 20:22:25.739" starttime="20190828 20:22:25.215"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:25.741" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20190828 20:22:25.742" starttime="20190828 20:22:25.740"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:25.743" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:22:25.743" starttime="20190828 20:22:25.742"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:25.744" starttime="20190828 20:22:25.214"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:25.744" starttime="20190828 20:22:25.214"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:25.744" starttime="20190828 20:22:25.212"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:25.745" starttime="20190828 20:22:24.974"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:25.745" starttime="20190828 20:22:24.974"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:25.752" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:25.758" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:25.758" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20190828 20:22:25.758" starttime="20190828 20:22:25.749"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:25.760" level="INFO">s3g</msg>
<status status="PASS" endtime="20190828 20:22:25.761" starttime="20190828 20:22:25.759"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:25.761" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:22:25.762" starttime="20190828 20:22:25.761"></status>
</kw>
<msg timestamp="20190828 20:22:25.762" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20190828 20:22:25.762" starttime="20190828 20:22:25.749"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20190828 20:22:25.764" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20190828 20:22:25.764" starttime="20190828 20:22:25.763"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:25.768" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:25.781" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:25.781" level="INFO">${output} = </msg>
<status status="PASS" endtime="20190828 20:22:25.781" starttime="20190828 20:22:25.766"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:25.783" level="INFO"></msg>
<status status="PASS" endtime="20190828 20:22:25.783" starttime="20190828 20:22:25.782"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:25.783" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:22:25.784" starttime="20190828 20:22:25.783"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:25.784" starttime="20190828 20:22:25.765"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:25.784" starttime="20190828 20:22:25.764"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:25.784" starttime="20190828 20:22:25.748"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:25.785" starttime="20190828 20:22:25.747"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:25.787" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:27.205" level="INFO">${rc} = 255</msg>
<msg timestamp="20190828 20:22:27.205" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20190828 20:22:27.205" starttime="20190828 20:22:25.785"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:27.206" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-08-28 20:22:27 ERROR OzoneClientFactory:192 - Couldn't create RpcClient protocol exception: 
java.lang.IllegalArgumentException: java.net.UnknownHostException: om
	at org.apache.hadoop.security.SecurityUtil.buildTokenService(SecurityUtil.java:447)
	at org.apache.hadoop.ozone.om.ha.OMProxyInfo.&lt;init&gt;(OMProxyInfo.java:40)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.loadOMClientConfigs(OMFailoverProxyProvider.java:109)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.&lt;init&gt;(OMFailoverProxyProvider.java:77)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.&lt;init&gt;(OzoneManagerProtocolClientSideTranslatorPB.java:195)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:155)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:189)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:152)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:102)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Caused by: java.net.UnknownHostException: om
	... 22 more
om</msg>
<status status="PASS" endtime="20190828 20:22:27.207" starttime="20190828 20:22:27.206"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:27.208" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20190828 20:22:27.208" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20190828 20:22:27.208" starttime="20190828 20:22:27.207"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:27.208" starttime="20190828 20:22:25.785"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:27.209" starttime="20190828 20:22:25.746"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:27.209" starttime="20190828 20:22:25.745"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:27.209" starttime="20190828 20:22:24.973"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:27.210" critical="yes" starttime="20190828 20:22:24.973">Setup failed:
255 != 0</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20190828 20:22:27.212" starttime="20190828 20:22:04.147"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/webui.robot" id="s1-s10" name="Webui">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:27.229" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:27.234" level="INFO">${rc} = 1</msg>
<msg timestamp="20190828 20:22:27.234" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20190828 20:22:27.234" starttime="20190828 20:22:27.228"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20190828 20:22:27.236" starttime="20190828 20:22:27.235"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:27.237" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:27.444" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:27.444" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/Group'
Usage: yum [options] COMMAND

List of Commands:

check          Check for pr...</msg>
<status status="PASS" endtime="20190828 20:22:27.444" starttime="20190828 20:22:27.236"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:27.449" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:27.960" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:27.960" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
P...</msg>
<status status="PASS" endtime="20190828 20:22:27.960" starttime="20190828 20:22:27.447"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:27.962" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: sjc.edge.kernel.org
 * epel: sjc.edge.kernel.org
 * extras: sjc.edge.kernel.org
 * updates: sjc.edge.kernel.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20190828 20:22:27.962" starttime="20190828 20:22:27.961"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:27.963" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:22:27.963" starttime="20190828 20:22:27.962"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:27.964" starttime="20190828 20:22:27.447"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:27.964" starttime="20190828 20:22:27.446"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:27.964" starttime="20190828 20:22:27.445"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:27.964" starttime="20190828 20:22:27.227"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:27.965" starttime="20190828 20:22:27.227"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:27.971" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:27.978" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:27.978" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20190828 20:22:27.979" starttime="20190828 20:22:27.969"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:27.981" level="INFO">s3g</msg>
<status status="PASS" endtime="20190828 20:22:27.981" starttime="20190828 20:22:27.979"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:27.981" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:22:27.992" starttime="20190828 20:22:27.981"></status>
</kw>
<msg timestamp="20190828 20:22:27.992" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20190828 20:22:27.992" starttime="20190828 20:22:27.968"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20190828 20:22:27.995" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20190828 20:22:27.995" starttime="20190828 20:22:27.993"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:27.998" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:28.012" level="INFO">${rc} = 0</msg>
<msg timestamp="20190828 20:22:28.012" level="INFO">${output} = </msg>
<status status="PASS" endtime="20190828 20:22:28.012" starttime="20190828 20:22:27.996"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:28.014" level="INFO"></msg>
<status status="PASS" endtime="20190828 20:22:28.014" starttime="20190828 20:22:28.013"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:28.015" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20190828 20:22:28.015" starttime="20190828 20:22:28.015"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:28.016" starttime="20190828 20:22:27.996"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:28.016" starttime="20190828 20:22:27.995"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:28.016" starttime="20190828 20:22:27.967"></status>
</kw>
<status status="PASS" endtime="20190828 20:22:28.017" starttime="20190828 20:22:27.966"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20190828 20:22:28.020" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20190828 20:22:29.470" level="INFO">${rc} = 255</msg>
<msg timestamp="20190828 20:22:29.470" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20190828 20:22:29.470" starttime="20190828 20:22:28.018"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20190828 20:22:29.471" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-08-28 20:22:29 ERROR OzoneClientFactory:192 - Couldn't create RpcClient protocol exception: 
java.lang.IllegalArgumentException: java.net.UnknownHostException: om
	at org.apache.hadoop.security.SecurityUtil.buildTokenService(SecurityUtil.java:447)
	at org.apache.hadoop.ozone.om.ha.OMProxyInfo.&lt;init&gt;(OMProxyInfo.java:40)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.loadOMClientConfigs(OMFailoverProxyProvider.java:109)
	at org.apache.hadoop.ozone.om.ha.OMFailoverProxyProvider.&lt;init&gt;(OMFailoverProxyProvider.java:77)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.&lt;init&gt;(OzoneManagerProtocolClientSideTranslatorPB.java:195)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:155)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:189)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:152)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:102)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Caused by: java.net.UnknownHostException: om
	... 22 more
om</msg>
<status status="PASS" endtime="20190828 20:22:29.472" starttime="20190828 20:22:29.471"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20190828 20:22:29.472" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20190828 20:22:29.473" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20190828 20:22:29.473" starttime="20190828 20:22:29.472"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:29.473" starttime="20190828 20:22:28.017"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:29.474" starttime="20190828 20:22:27.966"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:29.474" starttime="20190828 20:22:27.965"></status>
</kw>
<status status="FAIL" endtime="20190828 20:22:29.474" starttime="20190828 20:22:27.227"></status>
</kw>
<test id="s1-s10-t1" name="S3 Gateway Web UI">
<status status="FAIL" endtime="20190828 20:22:29.475" critical="yes" starttime="20190828 20:22:29.474">Parent suite setup failed:
255 != 0</status>
</test>
<doc>S3 gateway web ui test</doc>
<status status="FAIL" endtime="20190828 20:22:29.476" starttime="20190828 20:22:27.218">Suite setup failed:
255 != 0</status>
</suite>
<status status="FAIL" endtime="20190828 20:22:29.483" starttime="20190828 20:20:41.157"></status>
</suite>
<statistics>
<total>
<stat fail="34" pass="0">Critical Tests</stat>
<stat fail="34" pass="0">All Tests</stat>
</total>
<tag>
</tag>
<suite>
<stat fail="34" id="s1" name="ozonesecure-s3" pass="0">ozonesecure-s3</stat>
<stat fail="1" id="s1-s1" name="Awss3" pass="0">ozonesecure-s3.Awss3</stat>
<stat fail="1" id="s1-s2" name="Bucketcreate" pass="0">ozonesecure-s3.Bucketcreate</stat>
<stat fail="1" id="s1-s3" name="Buckethead" pass="0">ozonesecure-s3.Buckethead</stat>
<stat fail="1" id="s1-s4" name="Bucketlist" pass="0">ozonesecure-s3.Bucketlist</stat>
<stat fail="9" id="s1-s5" name="MultipartUpload" pass="0">ozonesecure-s3.MultipartUpload</stat>
<stat fail="4" id="s1-s6" name="Objectcopy" pass="0">ozonesecure-s3.Objectcopy</stat>
<stat fail="5" id="s1-s7" name="Objectdelete" pass="0">ozonesecure-s3.Objectdelete</stat>
<stat fail="1" id="s1-s8" name="Objectmultidelete" pass="0">ozonesecure-s3.Objectmultidelete</stat>
<stat fail="10" id="s1-s9" name="Objectputget" pass="0">ozonesecure-s3.Objectputget</stat>
<stat fail="1" id="s1-s10" name="Webui" pass="0">ozonesecure-s3.Webui</stat>
</suite>
</statistics>
<errors>
</errors>
</robot>
